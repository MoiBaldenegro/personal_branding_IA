const Ln="astro",Un="4.15.12",Zn="Astro is a modern site builder with web best practices, performance, and DX front-of-mind.",Mn="module",$n="withastro",Fn="MIT",qn={type:"git",url:"https://github.com/withastro/astro.git",directory:"packages/astro"},Vn="https://github.com/withastro/astro/issues",Jn="https://astro.build",Wn="./index.d.ts",Hn={"*":{app:["./dist/core/app/index"],"app/*":["./dist/core/app/*"],middleware:["./dist/virtual-modules/middleware.d.ts"]}},Gn={".":{types:"./index.d.ts",default:"./dist/core/index.js"},"./env":"./env.d.ts","./env/runtime":"./dist/env/runtime.js","./env/setup":"./dist/env/setup.js","./types":"./types.d.ts","./client":"./client.d.ts","./astro-jsx":"./astro-jsx.d.ts","./tsconfigs/*.json":"./tsconfigs/*","./tsconfigs/*":"./tsconfigs/*.json","./jsx/*":"./dist/jsx/*","./jsx-runtime":{types:"./jsx-runtime.d.ts",default:"./dist/jsx-runtime/index.js"},"./compiler-runtime":"./dist/runtime/compiler/index.js","./runtime/*":"./dist/runtime/*","./config":{types:"./config.d.ts",default:"./config.mjs"},"./container":{types:"./dist/container/index.d.ts",default:"./dist/container/index.js"},"./app":"./dist/core/app/index.js","./app/node":"./dist/core/app/node.js","./client/*":"./dist/runtime/client/*","./components":"./components/index.ts","./components/*":"./components/*","./toolbar":"./dist/toolbar/index.js","./actions/runtime/*":"./dist/actions/runtime/*","./assets":"./dist/assets/index.js","./assets/utils":"./dist/assets/utils/index.js","./assets/utils/inferRemoteSize.js":"./dist/assets/utils/remoteProbe.js","./assets/endpoint/*":"./dist/assets/endpoint/*.js","./assets/services/sharp":"./dist/assets/services/sharp.js","./assets/services/squoosh":"./dist/assets/services/squoosh.js","./assets/services/noop":"./dist/assets/services/noop.js","./loaders":"./dist/content/loaders/index.js","./content/runtime":"./dist/content/runtime.js","./content/runtime-assets":"./dist/content/runtime-assets.js","./debug":"./components/Debug.astro","./package.json":"./package.json","./zod":{types:"./zod.d.ts",default:"./zod.mjs"},"./errors":"./dist/core/errors/userError.js","./middleware":{types:"./dist/core/middleware/index.d.ts",default:"./dist/core/middleware/index.js"},"./virtual-modules/*":"./dist/virtual-modules/*"},Yn={astro:"astro.js"},Kn=["components","tsconfigs","dist","types","astro.js","index.d.ts","config.d.ts","config.mjs","zod.d.ts","zod.mjs","env.d.ts","client.d.ts","jsx-runtime.d.ts","templates","astro-jsx.d.ts","types.d.ts","README.md","vendor"],Xn={"@astrojs/compiler":"^2.10.3","@babel/core":"^7.25.7","@babel/plugin-transform-react-jsx":"^7.25.7","@babel/types":"^7.25.7","@oslojs/encoding":"^1.1.0","@rollup/pluginutils":"^5.1.2","@types/babel__core":"^7.20.5","@types/cookie":"^0.6.0",acorn:"^8.12.1","aria-query":"^5.3.2","axobject-query":"^4.1.0",boxen:"8.0.1","ci-info":"^4.0.0",clsx:"^2.1.1","common-ancestor-path":"^1.0.1",cookie:"^0.7.2",cssesc:"^3.0.0",debug:"^4.3.7","deterministic-object-hash":"^2.0.2",devalue:"^5.1.1",diff:"^5.2.0",dlv:"^1.1.3",dset:"^3.1.4","es-module-lexer":"^1.5.4",esbuild:"^0.21.5","estree-walker":"^3.0.3","fast-glob":"^3.3.2",fastq:"^1.17.1",flattie:"^1.1.1","github-slugger":"^2.0.0","gray-matter":"^4.0.3","html-escaper":"^3.0.3","http-cache-semantics":"^4.1.1","js-yaml":"^4.1.0",kleur:"^4.1.5","magic-string":"^0.30.11",magicast:"^0.3.5",micromatch:"^4.0.8",mrmime:"^2.0.0",neotraverse:"^0.6.18",ora:"^8.1.0","p-limit":"^6.1.0","p-queue":"^8.0.1","preferred-pm":"^4.0.0",prompts:"^2.4.2",rehype:"^13.0.2",semver:"^7.6.3",shiki:"^1.22.0","string-width":"^7.2.0",tinyexec:"^0.3.0",tsconfck:"^3.1.3","unist-util-visit":"^5.0.0",vfile:"^6.0.3",vite:"^5.4.8",vitefu:"^1.0.2","which-pm":"^3.0.0","xxhash-wasm":"^1.0.2","yargs-parser":"^21.1.1",zod:"^3.23.8","zod-to-json-schema":"^3.23.3","zod-to-ts":"^1.2.0","@astrojs/internal-helpers":"0.4.1","@astrojs/markdown-remark":"5.2.0","@astrojs/telemetry":"3.1.0"},Qn={sharp:"^0.33.3"},ei={"@astrojs/check":"^0.9.4","@playwright/test":"^1.47.2","@types/aria-query":"^5.0.4","@types/common-ancestor-path":"^1.0.2","@types/cssesc":"^3.0.2","@types/debug":"^4.1.12","@types/diff":"^5.2.2","@types/dlv":"^1.1.4","@types/hast":"^3.0.4","@types/html-escaper":"^3.0.2","@types/http-cache-semantics":"^4.0.4","@types/js-yaml":"^4.0.9","@types/micromatch":"^4.0.9","@types/prompts":"^2.4.9","@types/semver":"^7.5.8","@types/yargs-parser":"^21.0.3",cheerio:"1.0.0",eol:"^0.10.0",execa:"^8.0.1","expect-type":"^1.0.0","mdast-util-mdx":"^3.0.0","mdast-util-mdx-jsx":"^3.1.3",memfs:"^4.12.0","node-mocks-http":"^1.16.1","parse-srcset":"^1.0.2","rehype-autolink-headings":"^7.1.0","rehype-slug":"^6.0.0","rehype-toc":"^3.0.2","remark-code-titles":"^0.1.2",rollup:"^4.24.0",sass:"^1.79.4",undici:"^6.19.8",unified:"^11.0.5","astro-scripts":"0.0.14"},ti={node:"^18.17.1 || ^20.3.0 || >=21.0.0",npm:">=9.6.5",pnpm:">=7.1.0"},ri={provenance:!0},ni={prebuild:'astro-scripts prebuild --to-string "src/runtime/server/astro-island.ts" "src/runtime/client/{idle,load,media,only,visible}.ts"',build:'pnpm run prebuild && astro-scripts build "src/**/*.{ts,js}" --copy-wasm && tsc',"build:ci":'pnpm run prebuild && astro-scripts build "src/**/*.{ts,js}" --copy-wasm',dev:'astro-scripts dev --copy-wasm --prebuild "src/runtime/server/astro-island.ts" --prebuild "src/runtime/client/{idle,load,media,only,visible}.ts" "src/**/*.{ts,js}"',test:"pnpm run test:node && pnpm run test:types","test:match":"pnpm run test:node --match","test:e2e":"pnpm test:e2e:chrome && pnpm test:e2e:firefox","test:e2e:match":"playwright test -g","test:e2e:chrome":"playwright test","test:e2e:firefox":"playwright test --config playwright.firefox.config.js","test:types":"tsc --project tsconfig.tests.json","test:node":'astro-scripts test "test/**/*.test.js"'},ii={name:Ln,version:Un,description:Zn,type:Mn,author:$n,license:Fn,repository:qn,bugs:Vn,homepage:Jn,types:Wn,typesVersions:Hn,exports:Gn,bin:Yn,files:Kn,dependencies:Xn,optionalDependencies:Qn,devDependencies:ei,engines:ti,publishConfig:ri,scripts:ni};var si={name:"astro-cloudinary",version:"1.1.0",type:"module",license:"MIT",module:"./index.ts",keywords:["cloudinary","astro","astro-loader"],exports:{".":{import:"./index.ts"},"./helpers":{types:"./dist/helpers/index.d.ts",import:"./dist/helpers/index.js"},"./loaders":{types:"./dist/loaders/index.d.ts",import:"./dist/loaders/index.js"},"./package.json":"./package.json"},files:["dist","helpers","loaders","src","index.ts"],scripts:{dev:"tsup --watch",build:"tsup",prepublishOnly:"cp ../README.md . && cp ../LICENSE . && pnpm build",postpublish:"rm ./README.md && rm ./LICENSE"},dependencies:{"@cloudinary-util/types":"1.5.7","@cloudinary-util/url-loader":"5.10.2","@cloudinary-util/util":"^3.3.2","@cloudinary/url-gen":"^1.20.0","@unpic/astro":"^0.0.46","@unpic/core":"^0.0.49",tsup:"^8.2.4",unpic:"^3.18.0"},peerDependencies:{astro:"^3.2.0 || ^4.0.0"},devDependencies:{astro:"^4.15.6"}},ai="B",oi="G",ci=Br(ii.version),li=Br(si.version);function Br(n){let e=n;return e.includes("-")&&(e=e.split("-")[0]),e}var ui=/\/v\d+\//,di=/\.(ai|avif|gif|png|webp|bmp|bw|djvu|dng|ps|ept|eps|eps3|fbx|flif|gif|glb|gltf|heif|heic|ico|indd|jpg|jpe|jpeg|jp2|wdp|jxr|hdp|obj|pdf|ply|png|psd|arw|cr2|svg|tga|tif|tiff|u3ma|usdz|webp|3g2|3gp|avi|flv|m3u8|ts|m2ts|mts|mov|mkv|mp4|mpeg|mpd|mxf|ogv|webm|wmv)$/i,fi=/https?:\/\/(?<host>[^/]+)\/(?<cloudName>[^/]+)?\/?(?<assetType>image|images|video|videos|raw|files)\/(?<deliveryType>upload|fetch|private|authenticated|sprite|facebook|twitter|youtube|vimeo)?\/?(?<signature>s--([a-zA-Z0-9_-]{8}|[a-zA-Z0-9_-]{32})--)?\/?(?<transformations>(?:[^_/]+_[^,/]+,?\/?)*\/)*(?<version>v\d+|\w{1,2})\/(?<publicId>[^\s]+)$/,hi=["images","videos","files"],pi="res.cloudinary.com";function Lr(n){if(typeof n!="string")throw new Error("Failed to parse URL - Invalid src: Is not a string");if(!ui.test(n))throw new Error("Failed to parse URL - Invalid src: Does not include version (Ex: /v1234/)");const[t,r]=n.split("?"),s=Ur(t);let i=t;s&&(i=t.replace(new RegExp(`${s}$`),""));const o=i.match(fi),a=o?.groups?.transformations?.split("/").filter(d=>!!d),u={...o?.groups,format:s,seoSuffix:void 0,transformations:a||[],queryParams:{},version:o?.groups?.version?parseInt(o.groups.version.replace("v","")):void 0};if(u.host===pi&&!u.cloudName)throw new Error("Failed to parse URL - Invalid src: Cloudinary URL delivered from res.cloudinary.com must include Cloud Name (ex: res.cloudinary.com/<Cloud Name>/image/...)");if(r&&(u.queryParams=r.split("&").reduce((d,m)=>{const[v,x]=m.split("=");return d[v]=x,d},{})),u.assetType&&hi.includes(u.assetType)){const d=u.publicId?.split("/")||[];u.seoSuffix=d.pop(),u.publicId=d.join("/")}return u.publicId&&(u.publicId=decodeURIComponent(u.publicId)),u}function mi(n){const{transformations:e=[]}=Lr(n)||{};return e.map(t=>t.split(","))}function Ur(n){const e=n.match(di);if(e!==null)return e[0]}async function gi(n){try{const e=await fetch(n.src);return e.status===423?(await new Promise(t=>setTimeout(t,500)),await gi(n)):e.ok}catch{return!1}}function yi(n){return typeof n!="string"?!1:!!n.startsWith("#")}function _i(n){return`rgb:${n.replace("#","")}`}function vi(n){if(typeof btoa=="function")return btoa(n);if(typeof Buffer<"u")return Buffer.from(n).toString("base64")}function Be(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function bi(n=[],e,t="asc"){function r(i,o){let a=i[e],u=o[e];return typeof a=="string"&&(a=a.toLowerCase()),typeof u=="string"&&(u=u.toLowerCase()),a<u?-1:a>u?1:0}let s=[...n];return s=s.sort(r),t==="desc"?s.reverse():s}var he;(function(n){n.assertEqual=s=>s;function e(s){}n.assertIs=e;function t(s){throw new Error}n.assertNever=t,n.arrayToEnum=s=>{const i={};for(const o of s)i[o]=o;return i},n.getValidEnumValues=s=>{const i=n.objectKeys(s).filter(a=>typeof s[s[a]]!="number"),o={};for(const a of i)o[a]=s[a];return n.objectValues(o)},n.objectValues=s=>n.objectKeys(s).map(function(i){return s[i]}),n.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const i=[];for(const o in s)Object.prototype.hasOwnProperty.call(s,o)&&i.push(o);return i},n.find=(s,i)=>{for(const o of s)if(i(o))return o},n.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function r(s,i=" | "){return s.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}n.joinValues=r,n.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(he||(he={}));var or;(function(n){n.mergeShapes=(e,t)=>({...e,...t})})(or||(or={}));const Y=he.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Ze=n=>{switch(typeof n){case"undefined":return Y.undefined;case"string":return Y.string;case"number":return isNaN(n)?Y.nan:Y.number;case"boolean":return Y.boolean;case"function":return Y.function;case"bigint":return Y.bigint;case"symbol":return Y.symbol;case"object":return Array.isArray(n)?Y.array:n===null?Y.null:n.then&&typeof n.then=="function"&&n.catch&&typeof n.catch=="function"?Y.promise:typeof Map<"u"&&n instanceof Map?Y.map:typeof Set<"u"&&n instanceof Set?Y.set:typeof Date<"u"&&n instanceof Date?Y.date:Y.object;default:return Y.unknown}},F=he.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),wi=n=>JSON.stringify(n,null,2).replace(/"([^"]+)":/g,"$1:");class Se extends Error{constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const t=e||function(i){return i.message},r={_errors:[]},s=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(s);else if(o.code==="invalid_return_type")s(o.returnTypeError);else if(o.code==="invalid_arguments")s(o.argumentsError);else if(o.path.length===0)r._errors.push(t(o));else{let a=r,u=0;for(;u<o.path.length;){const d=o.path[u];u===o.path.length-1?(a[d]=a[d]||{_errors:[]},a[d]._errors.push(t(o))):a[d]=a[d]||{_errors:[]},a=a[d],u++}}};return s(this),r}static assert(e){if(!(e instanceof Se))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,he.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){const t={},r=[];for(const s of this.issues)s.path.length>0?(t[s.path[0]]=t[s.path[0]]||[],t[s.path[0]].push(e(s))):r.push(e(s));return{formErrors:r,fieldErrors:t}}get formErrors(){return this.flatten()}}Se.create=n=>new Se(n);const it=(n,e)=>{let t;switch(n.code){case F.invalid_type:n.received===Y.undefined?t="Required":t=`Expected ${n.expected}, received ${n.received}`;break;case F.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(n.expected,he.jsonStringifyReplacer)}`;break;case F.unrecognized_keys:t=`Unrecognized key(s) in object: ${he.joinValues(n.keys,", ")}`;break;case F.invalid_union:t="Invalid input";break;case F.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${he.joinValues(n.options)}`;break;case F.invalid_enum_value:t=`Invalid enum value. Expected ${he.joinValues(n.options)}, received '${n.received}'`;break;case F.invalid_arguments:t="Invalid function arguments";break;case F.invalid_return_type:t="Invalid function return type";break;case F.invalid_date:t="Invalid date";break;case F.invalid_string:typeof n.validation=="object"?"includes"in n.validation?(t=`Invalid input: must include "${n.validation.includes}"`,typeof n.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${n.validation.position}`)):"startsWith"in n.validation?t=`Invalid input: must start with "${n.validation.startsWith}"`:"endsWith"in n.validation?t=`Invalid input: must end with "${n.validation.endsWith}"`:he.assertNever(n.validation):n.validation!=="regex"?t=`Invalid ${n.validation}`:t="Invalid";break;case F.too_small:n.type==="array"?t=`Array must contain ${n.exact?"exactly":n.inclusive?"at least":"more than"} ${n.minimum} element(s)`:n.type==="string"?t=`String must contain ${n.exact?"exactly":n.inclusive?"at least":"over"} ${n.minimum} character(s)`:n.type==="number"?t=`Number must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${n.minimum}`:n.type==="date"?t=`Date must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(n.minimum))}`:t="Invalid input";break;case F.too_big:n.type==="array"?t=`Array must contain ${n.exact?"exactly":n.inclusive?"at most":"less than"} ${n.maximum} element(s)`:n.type==="string"?t=`String must contain ${n.exact?"exactly":n.inclusive?"at most":"under"} ${n.maximum} character(s)`:n.type==="number"?t=`Number must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="bigint"?t=`BigInt must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="date"?t=`Date must be ${n.exact?"exactly":n.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(n.maximum))}`:t="Invalid input";break;case F.custom:t="Invalid input";break;case F.invalid_intersection_types:t="Intersection results could not be merged";break;case F.not_multiple_of:t=`Number must be a multiple of ${n.multipleOf}`;break;case F.not_finite:t="Number must be finite";break;default:t=e.defaultError,he.assertNever(n)}return{message:t}};let Zr=it;function xi(n){Zr=n}function Mt(){return Zr}const $t=n=>{const{data:e,path:t,errorMaps:r,issueData:s}=n,i=[...t,...s.path||[]],o={...s,path:i};if(s.message!==void 0)return{...s,path:i,message:s.message};let a="";const u=r.filter(d=>!!d).slice().reverse();for(const d of u)a=d(o,{data:e,defaultError:a}).message;return{...s,path:i,message:a}},ki=[];function G(n,e){const t=Mt(),r=$t({issueData:e,data:n.data,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,t,t===it?void 0:it].filter(s=>!!s)});n.common.issues.push(r)}class xe{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){const r=[];for(const s of t){if(s.status==="aborted")return ae;s.status==="dirty"&&e.dirty(),r.push(s.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,t){const r=[];for(const s of t){const i=await s.key,o=await s.value;r.push({key:i,value:o})}return xe.mergeObjectSync(e,r)}static mergeObjectSync(e,t){const r={};for(const s of t){const{key:i,value:o}=s;if(i.status==="aborted"||o.status==="aborted")return ae;i.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||s.alwaysSet)&&(r[i.value]=o.value)}return{status:e.value,value:r}}}const ae=Object.freeze({status:"aborted"}),tt=n=>({status:"dirty",value:n}),ke=n=>({status:"valid",value:n}),cr=n=>n.status==="aborted",lr=n=>n.status==="dirty",mt=n=>n.status==="valid",gt=n=>typeof Promise<"u"&&n instanceof Promise;function Ft(n,e,t,r){if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e.get(n)}function Mr(n,e,t,r,s){if(typeof e=="function"?n!==e||!s:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(n,t),t}var ee;(function(n){n.errToObj=e=>typeof e=="string"?{message:e}:e||{},n.toString=e=>typeof e=="string"?e:e?.message})(ee||(ee={}));var dt,ft;class Ne{constructor(e,t,r,s){this._cachedPath=[],this.parent=e,this.data=t,this._path=r,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const vr=(n,e)=>{if(mt(e))return{success:!0,data:e.value};if(!n.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new Se(n.common.issues);return this._error=t,this._error}}};function ce(n){if(!n)return{};const{errorMap:e,invalid_type_error:t,required_error:r,description:s}=n;if(e&&(t||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(o,a)=>{var u,d;const{message:m}=n;return o.code==="invalid_enum_value"?{message:m??a.defaultError}:typeof a.data>"u"?{message:(u=m??r)!==null&&u!==void 0?u:a.defaultError}:o.code!=="invalid_type"?{message:a.defaultError}:{message:(d=m??t)!==null&&d!==void 0?d:a.defaultError}},description:s}}class ue{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return Ze(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:Ze(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new xe,ctx:{common:e.parent.common,data:e.data,parsedType:Ze(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(gt(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const r=this.safeParse(e,t);if(r.success)return r.data;throw r.error}safeParse(e,t){var r;const s={common:{issues:[],async:(r=t?.async)!==null&&r!==void 0?r:!1,contextualErrorMap:t?.errorMap},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ze(e)},i=this._parseSync({data:e,path:s.path,parent:s});return vr(s,i)}async parseAsync(e,t){const r=await this.safeParseAsync(e,t);if(r.success)return r.data;throw r.error}async safeParseAsync(e,t){const r={common:{issues:[],contextualErrorMap:t?.errorMap,async:!0},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ze(e)},s=this._parse({data:e,path:r.path,parent:r}),i=await(gt(s)?s:Promise.resolve(s));return vr(r,i)}refine(e,t){const r=s=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(s):t;return this._refinement((s,i)=>{const o=e(s),a=()=>i.addIssue({code:F.custom,...r(s)});return typeof Promise<"u"&&o instanceof Promise?o.then(u=>u?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,t){return this._refinement((r,s)=>e(r)?!0:(s.addIssue(typeof t=="function"?t(r,s):t),!1))}_refinement(e){return new Ce({schema:this,typeName:se.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return Ie.create(this,this._def)}nullable(){return Je.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Ee.create(this,this._def)}promise(){return at.create(this,this._def)}or(e){return bt.create([this,e],this._def)}and(e){return wt.create(this,e,this._def)}transform(e){return new Ce({...ce(this._def),schema:this,typeName:se.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t=typeof e=="function"?e:()=>e;return new At({...ce(this._def),innerType:this,defaultValue:t,typeName:se.ZodDefault})}brand(){return new dr({typeName:se.ZodBranded,type:this,...ce(this._def)})}catch(e){const t=typeof e=="function"?e:()=>e;return new Ot({...ce(this._def),innerType:this,catchValue:t,typeName:se.ZodCatch})}describe(e){const t=this.constructor;return new t({...this._def,description:e})}pipe(e){return jt.create(this,e)}readonly(){return Et.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const Si=/^c[^\s-]{8,}$/i,Ti=/^[0-9a-z]+$/,Ai=/^[0-9A-HJKMNP-TV-Z]{26}$/,Oi=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Ei=/^[a-z0-9_-]{21}$/i,Ci=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,ji=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Ri="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let nr;const Ii=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Ni=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,zi=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,$r="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Pi=new RegExp(`^${$r}$`);function Fr(n){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return n.precision?e=`${e}\\.\\d{${n.precision}}`:n.precision==null&&(e=`${e}(\\.\\d+)?`),e}function Di(n){return new RegExp(`^${Fr(n)}$`)}function qr(n){let e=`${$r}T${Fr(n)}`;const t=[];return t.push(n.local?"Z?":"Z"),n.offset&&t.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${t.join("|")})`,new RegExp(`^${e}$`)}function Bi(n,e){return!!((e==="v4"||!e)&&Ii.test(n)||(e==="v6"||!e)&&Ni.test(n))}class Oe extends ue{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==Y.string){const i=this._getOrReturnCtx(e);return G(i,{code:F.invalid_type,expected:Y.string,received:i.parsedType}),ae}const r=new xe;let s;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),G(s,{code:F.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="max")e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),G(s,{code:F.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="length"){const o=e.data.length>i.value,a=e.data.length<i.value;(o||a)&&(s=this._getOrReturnCtx(e,s),o?G(s,{code:F.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):a&&G(s,{code:F.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if(i.kind==="email")ji.test(e.data)||(s=this._getOrReturnCtx(e,s),G(s,{validation:"email",code:F.invalid_string,message:i.message}),r.dirty());else if(i.kind==="emoji")nr||(nr=new RegExp(Ri,"u")),nr.test(e.data)||(s=this._getOrReturnCtx(e,s),G(s,{validation:"emoji",code:F.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")Oi.test(e.data)||(s=this._getOrReturnCtx(e,s),G(s,{validation:"uuid",code:F.invalid_string,message:i.message}),r.dirty());else if(i.kind==="nanoid")Ei.test(e.data)||(s=this._getOrReturnCtx(e,s),G(s,{validation:"nanoid",code:F.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")Si.test(e.data)||(s=this._getOrReturnCtx(e,s),G(s,{validation:"cuid",code:F.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid2")Ti.test(e.data)||(s=this._getOrReturnCtx(e,s),G(s,{validation:"cuid2",code:F.invalid_string,message:i.message}),r.dirty());else if(i.kind==="ulid")Ai.test(e.data)||(s=this._getOrReturnCtx(e,s),G(s,{validation:"ulid",code:F.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),G(s,{validation:"url",code:F.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),G(s,{validation:"regex",code:F.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(e,s),G(s,{code:F.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(s=this._getOrReturnCtx(e,s),G(s,{code:F.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(s=this._getOrReturnCtx(e,s),G(s,{code:F.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):i.kind==="datetime"?qr(i).test(e.data)||(s=this._getOrReturnCtx(e,s),G(s,{code:F.invalid_string,validation:"datetime",message:i.message}),r.dirty()):i.kind==="date"?Pi.test(e.data)||(s=this._getOrReturnCtx(e,s),G(s,{code:F.invalid_string,validation:"date",message:i.message}),r.dirty()):i.kind==="time"?Di(i).test(e.data)||(s=this._getOrReturnCtx(e,s),G(s,{code:F.invalid_string,validation:"time",message:i.message}),r.dirty()):i.kind==="duration"?Ci.test(e.data)||(s=this._getOrReturnCtx(e,s),G(s,{validation:"duration",code:F.invalid_string,message:i.message}),r.dirty()):i.kind==="ip"?Bi(e.data,i.version)||(s=this._getOrReturnCtx(e,s),G(s,{validation:"ip",code:F.invalid_string,message:i.message}),r.dirty()):i.kind==="base64"?zi.test(e.data)||(s=this._getOrReturnCtx(e,s),G(s,{validation:"base64",code:F.invalid_string,message:i.message}),r.dirty()):he.assertNever(i);return{status:r.value,value:e.data}}_regex(e,t,r){return this.refinement(s=>e.test(s),{validation:t,code:F.invalid_string,...ee.errToObj(r)})}_addCheck(e){return new Oe({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...ee.errToObj(e)})}url(e){return this._addCheck({kind:"url",...ee.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...ee.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...ee.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...ee.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...ee.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...ee.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...ee.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...ee.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...ee.errToObj(e)})}datetime(e){var t,r;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:(t=e?.offset)!==null&&t!==void 0?t:!1,local:(r=e?.local)!==null&&r!==void 0?r:!1,...ee.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...ee.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...ee.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...ee.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t?.position,...ee.errToObj(t?.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...ee.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...ee.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...ee.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...ee.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...ee.errToObj(t)})}nonempty(e){return this.min(1,ee.errToObj(e))}trim(){return new Oe({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Oe({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Oe({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get minLength(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}Oe.create=n=>{var e;return new Oe({checks:[],typeName:se.ZodString,coerce:(e=n?.coerce)!==null&&e!==void 0?e:!1,...ce(n)})};function Li(n,e){const t=(n.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,s=t>r?t:r,i=parseInt(n.toFixed(s).replace(".","")),o=parseInt(e.toFixed(s).replace(".",""));return i%o/Math.pow(10,s)}class Fe extends ue{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==Y.number){const i=this._getOrReturnCtx(e);return G(i,{code:F.invalid_type,expected:Y.number,received:i.parsedType}),ae}let r;const s=new xe;for(const i of this._def.checks)i.kind==="int"?he.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),G(r,{code:F.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),G(r,{code:F.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),G(r,{code:F.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?Li(e.data,i.value)!==0&&(r=this._getOrReturnCtx(e,r),G(r,{code:F.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),G(r,{code:F.not_finite,message:i.message}),s.dirty()):he.assertNever(i);return{status:s.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,ee.toString(t))}gt(e,t){return this.setLimit("min",e,!1,ee.toString(t))}lte(e,t){return this.setLimit("max",e,!0,ee.toString(t))}lt(e,t){return this.setLimit("max",e,!1,ee.toString(t))}setLimit(e,t,r,s){return new Fe({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:ee.toString(s)}]})}_addCheck(e){return new Fe({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:ee.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:ee.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:ee.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:ee.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:ee.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:ee.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:ee.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:ee.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:ee.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&he.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(t===null||r.value>t)&&(t=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(t)&&Number.isFinite(e)}}Fe.create=n=>new Fe({checks:[],typeName:se.ZodNumber,coerce:n?.coerce||!1,...ce(n)});class qe extends ue{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==Y.bigint){const i=this._getOrReturnCtx(e);return G(i,{code:F.invalid_type,expected:Y.bigint,received:i.parsedType}),ae}let r;const s=new xe;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),G(r,{code:F.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),G(r,{code:F.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),G(r,{code:F.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):he.assertNever(i);return{status:s.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,ee.toString(t))}gt(e,t){return this.setLimit("min",e,!1,ee.toString(t))}lte(e,t){return this.setLimit("max",e,!0,ee.toString(t))}lt(e,t){return this.setLimit("max",e,!1,ee.toString(t))}setLimit(e,t,r,s){return new qe({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:ee.toString(s)}]})}_addCheck(e){return new qe({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:ee.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:ee.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:ee.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:ee.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:ee.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}qe.create=n=>{var e;return new qe({checks:[],typeName:se.ZodBigInt,coerce:(e=n?.coerce)!==null&&e!==void 0?e:!1,...ce(n)})};class yt extends ue{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==Y.boolean){const r=this._getOrReturnCtx(e);return G(r,{code:F.invalid_type,expected:Y.boolean,received:r.parsedType}),ae}return ke(e.data)}}yt.create=n=>new yt({typeName:se.ZodBoolean,coerce:n?.coerce||!1,...ce(n)});class Ge extends ue{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==Y.date){const i=this._getOrReturnCtx(e);return G(i,{code:F.invalid_type,expected:Y.date,received:i.parsedType}),ae}if(isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return G(i,{code:F.invalid_date}),ae}const r=new xe;let s;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(s=this._getOrReturnCtx(e,s),G(s,{code:F.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(s=this._getOrReturnCtx(e,s),G(s,{code:F.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):he.assertNever(i);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Ge({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:ee.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:ee.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}}Ge.create=n=>new Ge({checks:[],coerce:n?.coerce||!1,typeName:se.ZodDate,...ce(n)});class qt extends ue{_parse(e){if(this._getType(e)!==Y.symbol){const r=this._getOrReturnCtx(e);return G(r,{code:F.invalid_type,expected:Y.symbol,received:r.parsedType}),ae}return ke(e.data)}}qt.create=n=>new qt({typeName:se.ZodSymbol,...ce(n)});class _t extends ue{_parse(e){if(this._getType(e)!==Y.undefined){const r=this._getOrReturnCtx(e);return G(r,{code:F.invalid_type,expected:Y.undefined,received:r.parsedType}),ae}return ke(e.data)}}_t.create=n=>new _t({typeName:se.ZodUndefined,...ce(n)});class vt extends ue{_parse(e){if(this._getType(e)!==Y.null){const r=this._getOrReturnCtx(e);return G(r,{code:F.invalid_type,expected:Y.null,received:r.parsedType}),ae}return ke(e.data)}}vt.create=n=>new vt({typeName:se.ZodNull,...ce(n)});class st extends ue{constructor(){super(...arguments),this._any=!0}_parse(e){return ke(e.data)}}st.create=n=>new st({typeName:se.ZodAny,...ce(n)});class He extends ue{constructor(){super(...arguments),this._unknown=!0}_parse(e){return ke(e.data)}}He.create=n=>new He({typeName:se.ZodUnknown,...ce(n)});class Ue extends ue{_parse(e){const t=this._getOrReturnCtx(e);return G(t,{code:F.invalid_type,expected:Y.never,received:t.parsedType}),ae}}Ue.create=n=>new Ue({typeName:se.ZodNever,...ce(n)});class Vt extends ue{_parse(e){if(this._getType(e)!==Y.undefined){const r=this._getOrReturnCtx(e);return G(r,{code:F.invalid_type,expected:Y.void,received:r.parsedType}),ae}return ke(e.data)}}Vt.create=n=>new Vt({typeName:se.ZodVoid,...ce(n)});class Ee extends ue{_parse(e){const{ctx:t,status:r}=this._processInputParams(e),s=this._def;if(t.parsedType!==Y.array)return G(t,{code:F.invalid_type,expected:Y.array,received:t.parsedType}),ae;if(s.exactLength!==null){const o=t.data.length>s.exactLength.value,a=t.data.length<s.exactLength.value;(o||a)&&(G(t,{code:o?F.too_big:F.too_small,minimum:a?s.exactLength.value:void 0,maximum:o?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(s.minLength!==null&&t.data.length<s.minLength.value&&(G(t,{code:F.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),s.maxLength!==null&&t.data.length>s.maxLength.value&&(G(t,{code:F.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),t.common.async)return Promise.all([...t.data].map((o,a)=>s.type._parseAsync(new Ne(t,o,t.path,a)))).then(o=>xe.mergeArray(r,o));const i=[...t.data].map((o,a)=>s.type._parseSync(new Ne(t,o,t.path,a)));return xe.mergeArray(r,i)}get element(){return this._def.type}min(e,t){return new Ee({...this._def,minLength:{value:e,message:ee.toString(t)}})}max(e,t){return new Ee({...this._def,maxLength:{value:e,message:ee.toString(t)}})}length(e,t){return new Ee({...this._def,exactLength:{value:e,message:ee.toString(t)}})}nonempty(e){return this.min(1,e)}}Ee.create=(n,e)=>new Ee({type:n,minLength:null,maxLength:null,exactLength:null,typeName:se.ZodArray,...ce(e)});function et(n){if(n instanceof ge){const e={};for(const t in n.shape){const r=n.shape[t];e[t]=Ie.create(et(r))}return new ge({...n._def,shape:()=>e})}else return n instanceof Ee?new Ee({...n._def,type:et(n.element)}):n instanceof Ie?Ie.create(et(n.unwrap())):n instanceof Je?Je.create(et(n.unwrap())):n instanceof ze?ze.create(n.items.map(e=>et(e))):n}class ge extends ue{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),t=he.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==Y.object){const d=this._getOrReturnCtx(e);return G(d,{code:F.invalid_type,expected:Y.object,received:d.parsedType}),ae}const{status:r,ctx:s}=this._processInputParams(e),{shape:i,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof Ue&&this._def.unknownKeys==="strip"))for(const d in s.data)o.includes(d)||a.push(d);const u=[];for(const d of o){const m=i[d],v=s.data[d];u.push({key:{status:"valid",value:d},value:m._parse(new Ne(s,v,s.path,d)),alwaysSet:d in s.data})}if(this._def.catchall instanceof Ue){const d=this._def.unknownKeys;if(d==="passthrough")for(const m of a)u.push({key:{status:"valid",value:m},value:{status:"valid",value:s.data[m]}});else if(d==="strict")a.length>0&&(G(s,{code:F.unrecognized_keys,keys:a}),r.dirty());else if(d!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const d=this._def.catchall;for(const m of a){const v=s.data[m];u.push({key:{status:"valid",value:m},value:d._parse(new Ne(s,v,s.path,m)),alwaysSet:m in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const d=[];for(const m of u){const v=await m.key,x=await m.value;d.push({key:v,value:x,alwaysSet:m.alwaysSet})}return d}).then(d=>xe.mergeObjectSync(r,d)):xe.mergeObjectSync(r,u)}get shape(){return this._def.shape()}strict(e){return ee.errToObj,new ge({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,r)=>{var s,i,o,a;const u=(o=(i=(s=this._def).errorMap)===null||i===void 0?void 0:i.call(s,t,r).message)!==null&&o!==void 0?o:r.defaultError;return t.code==="unrecognized_keys"?{message:(a=ee.errToObj(e).message)!==null&&a!==void 0?a:u}:{message:u}}}:{}})}strip(){return new ge({...this._def,unknownKeys:"strip"})}passthrough(){return new ge({...this._def,unknownKeys:"passthrough"})}extend(e){return new ge({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new ge({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:se.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new ge({...this._def,catchall:e})}pick(e){const t={};return he.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(t[r]=this.shape[r])}),new ge({...this._def,shape:()=>t})}omit(e){const t={};return he.objectKeys(this.shape).forEach(r=>{e[r]||(t[r]=this.shape[r])}),new ge({...this._def,shape:()=>t})}deepPartial(){return et(this)}partial(e){const t={};return he.objectKeys(this.shape).forEach(r=>{const s=this.shape[r];e&&!e[r]?t[r]=s:t[r]=s.optional()}),new ge({...this._def,shape:()=>t})}required(e){const t={};return he.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])t[r]=this.shape[r];else{let i=this.shape[r];for(;i instanceof Ie;)i=i._def.innerType;t[r]=i}}),new ge({...this._def,shape:()=>t})}keyof(){return Vr(he.objectKeys(this.shape))}}ge.create=(n,e)=>new ge({shape:()=>n,unknownKeys:"strip",catchall:Ue.create(),typeName:se.ZodObject,...ce(e)});ge.strictCreate=(n,e)=>new ge({shape:()=>n,unknownKeys:"strict",catchall:Ue.create(),typeName:se.ZodObject,...ce(e)});ge.lazycreate=(n,e)=>new ge({shape:n,unknownKeys:"strip",catchall:Ue.create(),typeName:se.ZodObject,...ce(e)});class bt extends ue{_parse(e){const{ctx:t}=this._processInputParams(e),r=this._def.options;function s(i){for(const a of i)if(a.result.status==="valid")return a.result;for(const a of i)if(a.result.status==="dirty")return t.common.issues.push(...a.ctx.common.issues),a.result;const o=i.map(a=>new Se(a.ctx.common.issues));return G(t,{code:F.invalid_union,unionErrors:o}),ae}if(t.common.async)return Promise.all(r.map(async i=>{const o={...t,common:{...t.common,issues:[]},parent:null};return{result:await i._parseAsync({data:t.data,path:t.path,parent:o}),ctx:o}})).then(s);{let i;const o=[];for(const u of r){const d={...t,common:{...t.common,issues:[]},parent:null},m=u._parseSync({data:t.data,path:t.path,parent:d});if(m.status==="valid")return m;m.status==="dirty"&&!i&&(i={result:m,ctx:d}),d.common.issues.length&&o.push(d.common.issues)}if(i)return t.common.issues.push(...i.ctx.common.issues),i.result;const a=o.map(u=>new Se(u));return G(t,{code:F.invalid_union,unionErrors:a}),ae}}get options(){return this._def.options}}bt.create=(n,e)=>new bt({options:n,typeName:se.ZodUnion,...ce(e)});const De=n=>n instanceof kt?De(n.schema):n instanceof Ce?De(n.innerType()):n instanceof St?[n.value]:n instanceof Ve?n.options:n instanceof Tt?he.objectValues(n.enum):n instanceof At?De(n._def.innerType):n instanceof _t?[void 0]:n instanceof vt?[null]:n instanceof Ie?[void 0,...De(n.unwrap())]:n instanceof Je?[null,...De(n.unwrap())]:n instanceof dr||n instanceof Et?De(n.unwrap()):n instanceof Ot?De(n._def.innerType):[];class Kt extends ue{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==Y.object)return G(t,{code:F.invalid_type,expected:Y.object,received:t.parsedType}),ae;const r=this.discriminator,s=t.data[r],i=this.optionsMap.get(s);return i?t.common.async?i._parseAsync({data:t.data,path:t.path,parent:t}):i._parseSync({data:t.data,path:t.path,parent:t}):(G(t,{code:F.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),ae)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,r){const s=new Map;for(const i of t){const o=De(i.shape[e]);if(!o.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const a of o){if(s.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);s.set(a,i)}}return new Kt({typeName:se.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:s,...ce(r)})}}function ur(n,e){const t=Ze(n),r=Ze(e);if(n===e)return{valid:!0,data:n};if(t===Y.object&&r===Y.object){const s=he.objectKeys(e),i=he.objectKeys(n).filter(a=>s.indexOf(a)!==-1),o={...n,...e};for(const a of i){const u=ur(n[a],e[a]);if(!u.valid)return{valid:!1};o[a]=u.data}return{valid:!0,data:o}}else if(t===Y.array&&r===Y.array){if(n.length!==e.length)return{valid:!1};const s=[];for(let i=0;i<n.length;i++){const o=n[i],a=e[i],u=ur(o,a);if(!u.valid)return{valid:!1};s.push(u.data)}return{valid:!0,data:s}}else return t===Y.date&&r===Y.date&&+n==+e?{valid:!0,data:n}:{valid:!1}}class wt extends ue{_parse(e){const{status:t,ctx:r}=this._processInputParams(e),s=(i,o)=>{if(cr(i)||cr(o))return ae;const a=ur(i.value,o.value);return a.valid?((lr(i)||lr(o))&&t.dirty(),{status:t.value,value:a.data}):(G(r,{code:F.invalid_intersection_types}),ae)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,o])=>s(i,o)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}wt.create=(n,e,t)=>new wt({left:n,right:e,typeName:se.ZodIntersection,...ce(t)});class ze extends ue{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==Y.array)return G(r,{code:F.invalid_type,expected:Y.array,received:r.parsedType}),ae;if(r.data.length<this._def.items.length)return G(r,{code:F.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),ae;!this._def.rest&&r.data.length>this._def.items.length&&(G(r,{code:F.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const i=[...r.data].map((o,a)=>{const u=this._def.items[a]||this._def.rest;return u?u._parse(new Ne(r,o,r.path,a)):null}).filter(o=>!!o);return r.common.async?Promise.all(i).then(o=>xe.mergeArray(t,o)):xe.mergeArray(t,i)}get items(){return this._def.items}rest(e){return new ze({...this._def,rest:e})}}ze.create=(n,e)=>{if(!Array.isArray(n))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ze({items:n,typeName:se.ZodTuple,rest:null,...ce(e)})};class xt extends ue{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==Y.object)return G(r,{code:F.invalid_type,expected:Y.object,received:r.parsedType}),ae;const s=[],i=this._def.keyType,o=this._def.valueType;for(const a in r.data)s.push({key:i._parse(new Ne(r,a,r.path,a)),value:o._parse(new Ne(r,r.data[a],r.path,a)),alwaysSet:a in r.data});return r.common.async?xe.mergeObjectAsync(t,s):xe.mergeObjectSync(t,s)}get element(){return this._def.valueType}static create(e,t,r){return t instanceof ue?new xt({keyType:e,valueType:t,typeName:se.ZodRecord,...ce(r)}):new xt({keyType:Oe.create(),valueType:e,typeName:se.ZodRecord,...ce(t)})}}class Jt extends ue{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==Y.map)return G(r,{code:F.invalid_type,expected:Y.map,received:r.parsedType}),ae;const s=this._def.keyType,i=this._def.valueType,o=[...r.data.entries()].map(([a,u],d)=>({key:s._parse(new Ne(r,a,r.path,[d,"key"])),value:i._parse(new Ne(r,u,r.path,[d,"value"]))}));if(r.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const u of o){const d=await u.key,m=await u.value;if(d.status==="aborted"||m.status==="aborted")return ae;(d.status==="dirty"||m.status==="dirty")&&t.dirty(),a.set(d.value,m.value)}return{status:t.value,value:a}})}else{const a=new Map;for(const u of o){const d=u.key,m=u.value;if(d.status==="aborted"||m.status==="aborted")return ae;(d.status==="dirty"||m.status==="dirty")&&t.dirty(),a.set(d.value,m.value)}return{status:t.value,value:a}}}}Jt.create=(n,e,t)=>new Jt({valueType:e,keyType:n,typeName:se.ZodMap,...ce(t)});class Ye extends ue{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==Y.set)return G(r,{code:F.invalid_type,expected:Y.set,received:r.parsedType}),ae;const s=this._def;s.minSize!==null&&r.data.size<s.minSize.value&&(G(r,{code:F.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),t.dirty()),s.maxSize!==null&&r.data.size>s.maxSize.value&&(G(r,{code:F.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),t.dirty());const i=this._def.valueType;function o(u){const d=new Set;for(const m of u){if(m.status==="aborted")return ae;m.status==="dirty"&&t.dirty(),d.add(m.value)}return{status:t.value,value:d}}const a=[...r.data.values()].map((u,d)=>i._parse(new Ne(r,u,r.path,d)));return r.common.async?Promise.all(a).then(u=>o(u)):o(a)}min(e,t){return new Ye({...this._def,minSize:{value:e,message:ee.toString(t)}})}max(e,t){return new Ye({...this._def,maxSize:{value:e,message:ee.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}Ye.create=(n,e)=>new Ye({valueType:n,minSize:null,maxSize:null,typeName:se.ZodSet,...ce(e)});class nt extends ue{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==Y.function)return G(t,{code:F.invalid_type,expected:Y.function,received:t.parsedType}),ae;function r(a,u){return $t({data:a,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Mt(),it].filter(d=>!!d),issueData:{code:F.invalid_arguments,argumentsError:u}})}function s(a,u){return $t({data:a,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Mt(),it].filter(d=>!!d),issueData:{code:F.invalid_return_type,returnTypeError:u}})}const i={errorMap:t.common.contextualErrorMap},o=t.data;if(this._def.returns instanceof at){const a=this;return ke(async function(...u){const d=new Se([]),m=await a._def.args.parseAsync(u,i).catch(h=>{throw d.addIssue(r(u,h)),d}),v=await Reflect.apply(o,this,m);return await a._def.returns._def.type.parseAsync(v,i).catch(h=>{throw d.addIssue(s(v,h)),d})})}else{const a=this;return ke(function(...u){const d=a._def.args.safeParse(u,i);if(!d.success)throw new Se([r(u,d.error)]);const m=Reflect.apply(o,this,d.data),v=a._def.returns.safeParse(m,i);if(!v.success)throw new Se([s(m,v.error)]);return v.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new nt({...this._def,args:ze.create(e).rest(He.create())})}returns(e){return new nt({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,r){return new nt({args:e||ze.create([]).rest(He.create()),returns:t||He.create(),typeName:se.ZodFunction,...ce(r)})}}class kt extends ue{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}kt.create=(n,e)=>new kt({getter:n,typeName:se.ZodLazy,...ce(e)});class St extends ue{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return G(t,{received:t.data,code:F.invalid_literal,expected:this._def.value}),ae}return{status:"valid",value:e.data}}get value(){return this._def.value}}St.create=(n,e)=>new St({value:n,typeName:se.ZodLiteral,...ce(e)});function Vr(n,e){return new Ve({values:n,typeName:se.ZodEnum,...ce(e)})}class Ve extends ue{constructor(){super(...arguments),dt.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const t=this._getOrReturnCtx(e),r=this._def.values;return G(t,{expected:he.joinValues(r),received:t.parsedType,code:F.invalid_type}),ae}if(Ft(this,dt)||Mr(this,dt,new Set(this._def.values)),!Ft(this,dt).has(e.data)){const t=this._getOrReturnCtx(e),r=this._def.values;return G(t,{received:t.data,code:F.invalid_enum_value,options:r}),ae}return ke(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return Ve.create(e,{...this._def,...t})}exclude(e,t=this._def){return Ve.create(this.options.filter(r=>!e.includes(r)),{...this._def,...t})}}dt=new WeakMap;Ve.create=Vr;class Tt extends ue{constructor(){super(...arguments),ft.set(this,void 0)}_parse(e){const t=he.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==Y.string&&r.parsedType!==Y.number){const s=he.objectValues(t);return G(r,{expected:he.joinValues(s),received:r.parsedType,code:F.invalid_type}),ae}if(Ft(this,ft)||Mr(this,ft,new Set(he.getValidEnumValues(this._def.values))),!Ft(this,ft).has(e.data)){const s=he.objectValues(t);return G(r,{received:r.data,code:F.invalid_enum_value,options:s}),ae}return ke(e.data)}get enum(){return this._def.values}}ft=new WeakMap;Tt.create=(n,e)=>new Tt({values:n,typeName:se.ZodNativeEnum,...ce(e)});class at extends ue{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==Y.promise&&t.common.async===!1)return G(t,{code:F.invalid_type,expected:Y.promise,received:t.parsedType}),ae;const r=t.parsedType===Y.promise?t.data:Promise.resolve(t.data);return ke(r.then(s=>this._def.type.parseAsync(s,{path:t.path,errorMap:t.common.contextualErrorMap})))}}at.create=(n,e)=>new at({type:n,typeName:se.ZodPromise,...ce(e)});class Ce extends ue{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===se.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:r}=this._processInputParams(e),s=this._def.effect||null,i={addIssue:o=>{G(r,o),o.fatal?t.abort():t.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="preprocess"){const o=s.transform(r.data,i);if(r.common.async)return Promise.resolve(o).then(async a=>{if(t.value==="aborted")return ae;const u=await this._def.schema._parseAsync({data:a,path:r.path,parent:r});return u.status==="aborted"?ae:u.status==="dirty"||t.value==="dirty"?tt(u.value):u});{if(t.value==="aborted")return ae;const a=this._def.schema._parseSync({data:o,path:r.path,parent:r});return a.status==="aborted"?ae:a.status==="dirty"||t.value==="dirty"?tt(a.value):a}}if(s.type==="refinement"){const o=a=>{const u=s.refinement(a,i);if(r.common.async)return Promise.resolve(u);if(u instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?ae:(a.status==="dirty"&&t.dirty(),o(a.value),{status:t.value,value:a.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>a.status==="aborted"?ae:(a.status==="dirty"&&t.dirty(),o(a.value).then(()=>({status:t.value,value:a.value}))))}if(s.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!mt(o))return o;const a=s.transform(o.value,i);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:a}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>mt(o)?Promise.resolve(s.transform(o.value,i)).then(a=>({status:t.value,value:a})):o);he.assertNever(s)}}Ce.create=(n,e,t)=>new Ce({schema:n,typeName:se.ZodEffects,effect:e,...ce(t)});Ce.createWithPreprocess=(n,e,t)=>new Ce({schema:e,effect:{type:"preprocess",transform:n},typeName:se.ZodEffects,...ce(t)});class Ie extends ue{_parse(e){return this._getType(e)===Y.undefined?ke(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Ie.create=(n,e)=>new Ie({innerType:n,typeName:se.ZodOptional,...ce(e)});class Je extends ue{_parse(e){return this._getType(e)===Y.null?ke(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Je.create=(n,e)=>new Je({innerType:n,typeName:se.ZodNullable,...ce(e)});class At extends ue{_parse(e){const{ctx:t}=this._processInputParams(e);let r=t.data;return t.parsedType===Y.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}At.create=(n,e)=>new At({innerType:n,typeName:se.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...ce(e)});class Ot extends ue{_parse(e){const{ctx:t}=this._processInputParams(e),r={...t,common:{...t.common,issues:[]}},s=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return gt(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Se(r.common.issues)},input:r.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Se(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}Ot.create=(n,e)=>new Ot({innerType:n,typeName:se.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...ce(e)});class Wt extends ue{_parse(e){if(this._getType(e)!==Y.nan){const r=this._getOrReturnCtx(e);return G(r,{code:F.invalid_type,expected:Y.nan,received:r.parsedType}),ae}return{status:"valid",value:e.data}}}Wt.create=n=>new Wt({typeName:se.ZodNaN,...ce(n)});const Ui=Symbol("zod_brand");class dr extends ue{_parse(e){const{ctx:t}=this._processInputParams(e),r=t.data;return this._def.type._parse({data:r,path:t.path,parent:t})}unwrap(){return this._def.type}}class jt extends ue{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?ae:i.status==="dirty"?(t.dirty(),tt(i.value)):this._def.out._parseAsync({data:i.value,path:r.path,parent:r})})();{const s=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?ae:s.status==="dirty"?(t.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:r.path,parent:r})}}static create(e,t){return new jt({in:e,out:t,typeName:se.ZodPipeline})}}class Et extends ue{_parse(e){const t=this._def.innerType._parse(e),r=s=>(mt(s)&&(s.value=Object.freeze(s.value)),s);return gt(t)?t.then(s=>r(s)):r(t)}unwrap(){return this._def.innerType}}Et.create=(n,e)=>new Et({innerType:n,typeName:se.ZodReadonly,...ce(e)});function Jr(n,e={},t){return n?st.create().superRefine((r,s)=>{var i,o;if(!n(r)){const a=typeof e=="function"?e(r):typeof e=="string"?{message:e}:e,u=(o=(i=a.fatal)!==null&&i!==void 0?i:t)!==null&&o!==void 0?o:!0,d=typeof a=="string"?{message:a}:a;s.addIssue({code:"custom",...d,fatal:u})}}):st.create()}const Zi={object:ge.lazycreate};var se;(function(n){n.ZodString="ZodString",n.ZodNumber="ZodNumber",n.ZodNaN="ZodNaN",n.ZodBigInt="ZodBigInt",n.ZodBoolean="ZodBoolean",n.ZodDate="ZodDate",n.ZodSymbol="ZodSymbol",n.ZodUndefined="ZodUndefined",n.ZodNull="ZodNull",n.ZodAny="ZodAny",n.ZodUnknown="ZodUnknown",n.ZodNever="ZodNever",n.ZodVoid="ZodVoid",n.ZodArray="ZodArray",n.ZodObject="ZodObject",n.ZodUnion="ZodUnion",n.ZodDiscriminatedUnion="ZodDiscriminatedUnion",n.ZodIntersection="ZodIntersection",n.ZodTuple="ZodTuple",n.ZodRecord="ZodRecord",n.ZodMap="ZodMap",n.ZodSet="ZodSet",n.ZodFunction="ZodFunction",n.ZodLazy="ZodLazy",n.ZodLiteral="ZodLiteral",n.ZodEnum="ZodEnum",n.ZodEffects="ZodEffects",n.ZodNativeEnum="ZodNativeEnum",n.ZodOptional="ZodOptional",n.ZodNullable="ZodNullable",n.ZodDefault="ZodDefault",n.ZodCatch="ZodCatch",n.ZodPromise="ZodPromise",n.ZodBranded="ZodBranded",n.ZodPipeline="ZodPipeline",n.ZodReadonly="ZodReadonly"})(se||(se={}));const Mi=(n,e={message:`Input not instance of ${n.name}`})=>Jr(t=>t instanceof n,e),Wr=Oe.create,Hr=Fe.create,$i=Wt.create,Fi=qe.create,Gr=yt.create,qi=Ge.create,Vi=qt.create,Ji=_t.create,Wi=vt.create,Hi=st.create,Gi=He.create,Yi=Ue.create,Ki=Vt.create,Xi=Ee.create,Qi=ge.create,es=ge.strictCreate,ts=bt.create,rs=Kt.create,ns=wt.create,is=ze.create,ss=xt.create,as=Jt.create,os=Ye.create,cs=nt.create,ls=kt.create,us=St.create,ds=Ve.create,fs=Tt.create,hs=at.create,br=Ce.create,ps=Ie.create,ms=Je.create,gs=Ce.createWithPreprocess,ys=jt.create,_s=()=>Wr().optional(),vs=()=>Hr().optional(),bs=()=>Gr().optional(),ws={string:n=>Oe.create({...n,coerce:!0}),number:n=>Fe.create({...n,coerce:!0}),boolean:n=>yt.create({...n,coerce:!0}),bigint:n=>qe.create({...n,coerce:!0}),date:n=>Ge.create({...n,coerce:!0})},xs=ae;var p=Object.freeze({__proto__:null,defaultErrorMap:it,setErrorMap:xi,getErrorMap:Mt,makeIssue:$t,EMPTY_PATH:ki,addIssueToContext:G,ParseStatus:xe,INVALID:ae,DIRTY:tt,OK:ke,isAborted:cr,isDirty:lr,isValid:mt,isAsync:gt,get util(){return he},get objectUtil(){return or},ZodParsedType:Y,getParsedType:Ze,ZodType:ue,datetimeRegex:qr,ZodString:Oe,ZodNumber:Fe,ZodBigInt:qe,ZodBoolean:yt,ZodDate:Ge,ZodSymbol:qt,ZodUndefined:_t,ZodNull:vt,ZodAny:st,ZodUnknown:He,ZodNever:Ue,ZodVoid:Vt,ZodArray:Ee,ZodObject:ge,ZodUnion:bt,ZodDiscriminatedUnion:Kt,ZodIntersection:wt,ZodTuple:ze,ZodRecord:xt,ZodMap:Jt,ZodSet:Ye,ZodFunction:nt,ZodLazy:kt,ZodLiteral:St,ZodEnum:Ve,ZodNativeEnum:Tt,ZodPromise:at,ZodEffects:Ce,ZodTransformer:Ce,ZodOptional:Ie,ZodNullable:Je,ZodDefault:At,ZodCatch:Ot,ZodNaN:Wt,BRAND:Ui,ZodBranded:dr,ZodPipeline:jt,ZodReadonly:Et,custom:Jr,Schema:ue,ZodSchema:ue,late:Zi,get ZodFirstPartyTypeKind(){return se},coerce:ws,any:Hi,array:Xi,bigint:Fi,boolean:Gr,date:qi,discriminatedUnion:rs,effect:br,enum:ds,function:cs,instanceof:Mi,intersection:ns,lazy:ls,literal:us,map:as,nan:$i,nativeEnum:fs,never:Yi,null:Wi,nullable:ms,number:Hr,object:Qi,oboolean:bs,onumber:vs,optional:ps,ostring:_s,pipeline:ys,preprocess:gs,promise:hs,record:ss,set:os,strictObject:es,string:Wr,symbol:Vi,transformer:br,tuple:is,undefined:Ji,union:ts,unknown:Gi,void:Ki,NEVER:xs,ZodIssueCode:F,quotelessJson:wi,ZodError:Se});function ks(n){return!(typeof n!="object"||n instanceof Array)}class Ss{filterOutNonSupportedKeys(e,t){const r=Object.create({});return ks(e)?(Object.keys(e).forEach(s=>{t.indexOf(s)>=0?r[s]=e[s]:console.warn("Warning - unsupported key provided to configuration: ",s)}),r):Object.create({})}}const wr=["cname","secureDistribution","privateCdn","signUrl","longUrlSignature","shorten","useRootPath","secure","forceVersion","analytics","queryParams"];class fr extends Ss{constructor(e){super();const t=this.filterOutNonSupportedKeys(e,wr);Object.assign(this,{secure:!0},t)}extend(e){const t=this.filterOutNonSupportedKeys(e,wr);return new fr(Object.assign({},this,t))}setCname(e){return this.cname=e,this}setSecureDistribution(e){return this.secureDistribution=e,this}setPrivateCdn(e){return this.privateCdn=e,this}setSignUrl(e){return this.signUrl=e,this}setLongUrlSignature(e){return this.longUrlSignature=e,this}setShorten(e){return this.shorten=e,this}setUseRootPath(e){return this.useRootPath=e,this}setSecure(e){return this.secure=e,this}setForceVersion(e){return this.forceVersion=e,this}setQueryParams(e){return this.queryParams=e,this}}class Ct{constructor(e){this.values=[],this.delimiter=":",this.hasValue(e)&&this.addValue(e)}toString(){return this.values.join(this.delimiter)}hasValue(e){return typeof e<"u"&&e!==null&&e!==""}addValue(e){return Array.isArray(e)?this.values=this.values.concat(e):this.values.push(e),this.values=this.values.filter(t=>this.hasValue(t)),this}setDelimiter(e){return this.delimiter=e,this}}class Ts extends Error{constructor(e="Unsupported"){super(e)}}function hr(n){return new Ts(n)}function As(){return this._qualifierModel||{error:hr(`unsupported qualifier ${this.constructor.name}`)}}class Os{constructor(){this._qualifierModel={}}toJson(){return As.apply(this)}}class Xt extends Os{constructor(e,t){super(),this.delimiter="_",this.key=e,t instanceof Ct?this.qualifierValue=t:(this.qualifierValue=new Ct,this.qualifierValue.addValue(t))}toString(){const{key:e,delimiter:t,qualifierValue:r}=this;return`${e}${t}${r.toString()}`}addValue(e){return this.qualifierValue.addValue(e),this}}class $e extends Xt{constructor(e,t){let r;t?r=new Ct([e,`${t}`]).setDelimiter(":"):r=e,super("fl",r),this.flagValue=t}toString(){return super.toString().replace(/\./g,"%2E")}getFlagValue(){return this.flagValue}}function Es(n,e){const t=Array.from(n.entries());return e.forEach(r=>{t.push(["fl",r])}),t.sort().map(r=>r[1])}function Cs(){var n,e,t;const r=this._actionModel&&Object.keys(this._actionModel).length,s=(t=(e=(n=this._actionModel)===null||n===void 0?void 0:n.source)===null||e===void 0?void 0:e.transformation)===null||t===void 0?void 0:t.error;return s&&s instanceof Error?{error:s}:r?this._actionModel:{error:hr(`unsupported action ${this.constructor.name}`)}}class js{constructor(){this._actionModel={}}toJson(){return Cs.apply(this)}}class pr extends js{constructor(){super(...arguments),this.qualifiers=new Map,this.flags=[],this.delimiter=",",this.actionTag=""}prepareQualifiers(){}getActionTag(){return this.actionTag}setActionTag(e){return this.actionTag=e,this}toString(){return this.prepareQualifiers(),Es(this.qualifiers,this.flags).join(this.delimiter)}addQualifier(e){if(typeof e=="string"){const[t,r]=e.toLowerCase().split("_");t==="fl"?this.flags.push(new $e(r)):this.qualifiers.set(t,new Xt(t,r))}else this.qualifiers.set(e.key,e);return this}addFlag(e){return typeof e=="string"?this.flags.push(new $e(e)):e instanceof $e&&this.flags.push(e),this}addValueToQualifier(e,t){return this.qualifiers.get(e).addValue(t),this}}function Rs(n){return n&&(n.match(/^#/)?`rgb:${n.substr(1)}`:n)}class Is extends pr{constructor(e){super(),this._actionModel={},this.addQualifier(new Xt("b",new Ct(Rs(e)).setDelimiter("_"))),this._actionModel.color=e,this._actionModel.actionType="backgroundColor"}static fromJson(e){const{color:t}=e;return new this(t)}}class xr{constructor(e){this.raw=e}toString(){return this.raw}toJson(){return{error:hr(`unsupported action ${this.constructor.name}`)}}}function Ns(n){const e=n;return"error"in e&&!!e.error}function zs(){return new $e("lossy")}function Ps(){return new $e("preserve_transparency")}function Ds(n){return new $e("progressive",n)}class Bs extends Ct{constructor(e){super(e),this.val=e}getValue(){return this.val}}function Xe(n){const e={};return Object.keys(n).forEach(t=>{e[n[t]]=t}),e}const Ls={limitFit:"limit",limitFill:"lfill",minimumFit:"mfit",thumbnail:"thumb",limitPad:"lpad",minimumPad:"mpad",autoPad:"auto_pad"},Us={colorSpace:"cs",dpr:"dpr",density:"dn",defaultImage:"d",format:"f",quality:"q"},Zs={redEye:"redeye",advancedRedEye:"adv_redeye",oilPaint:"oil_paint",unsharpMask:"unsharp_mask",makeTransparent:"make_transparent",generativeRestore:"gen_restore",upscale:"upscale"},Ms={autoBest:"auto:best",autoEco:"auto:eco",autoGood:"auto:good",autoLow:"auto:low",jpegminiHigh:"jpegmini:1",jpegminiMedium:"jpegmini:2",jpegminiBest:"jpegmini:0"},$s={fullHd:"full_hd",fullHdWifi:"full_hd_wifi",fullHdLean:"full_hd_lean",hdLean:"hd_lean"},Fs={444:"CHROMA_444",420:"CHROMA_420"},qs={noCmyk:"no_cmyk",keepCmyk:"keep_cmyk",tinySrgb:"tinysrgb",srgbTrueColor:"srgb:truecolor"};Xe(Fs);Xe(qs);Xe(Ls);const Vs=Xe(Us);Xe(Zs);Xe(Ms);Xe($s);class Js extends pr{constructor(e,t,r){super(),this._actionModel={};let s;t instanceof Bs?s=t.getValue():s=t,this._actionModel.actionType=Vs[e],this._actionModel[r]=s,this.addQualifier(new Xt(e,t))}}class Ws extends $e{constructor(e){super("progressive",e)}}class Ht extends Js{constructor(e,t){super(e,t,"formatType")}lossy(){return this._actionModel.lossy=!0,this.addFlag(zs()),this}progressive(e){return e instanceof Ws?(this._actionModel.progressive={mode:e.getFlagValue()},this.addFlag(e)):(this._actionModel.progressive={mode:e},this.addFlag(Ds(e))),this}preserveTransparency(){return this._actionModel.preserveTransparency=!0,this.addFlag(Ps()),this}static fromJson(e){const{formatType:t,lossy:r,progressive:s,preserveTransparency:i}=e;let o;return t?o=new this("f",t):o=new this("f"),s&&(s.mode?o.progressive(s.mode):o.progressive()),r&&o.lossy(),i&&o.preserveTransparency(),o}}class Qt{constructor(){this.actions=[]}addAction(e){let t;if(typeof e=="string"){if(e.indexOf("/")>=0)throw"addAction cannot accept a string with a forward slash in it - /, use .addTransformation() instead";t=new xr(e)}else t=e;return this.actions.push(t),this}addTransformation(e){return e instanceof Qt?this.actions=this.actions.concat(e.actions):this.actions.push(new xr(e)),this}toString(){return this.actions.map(e=>e.toString()).filter(e=>e).join("/")}animated(e){return this.addAction(e)}border(e){return this.addAction(e)}reshape(e){return this.addAction(e)}resize(e){return this.addAction(e)}quality(e){return this.addAction(new Ht("q",e)),this}format(e){return this.addAction(new Ht("f",e)),this}roundCorners(e){return this.addAction(e)}overlay(e){return this.addAction(e)}underlay(e){return e.setLayerType("u"),this.addAction(e)}addVariable(e){return this.addAction(e)}conditional(e){return this.addAction(e)}effect(e){return this.addAction(e)}adjust(e){return this.addAction(e)}rotate(e){return this.addAction(e)}namedTransformation(e){return this.addAction(e)}delivery(e){return this.addAction(e)}backgroundColor(e){return this.addAction(new Is(e))}psdTools(e){return this.addAction(e)}extract(e){return this.addAction(e)}addFlag(e){const t=new pr;let r=e;return typeof e=="string"&&(r=new $e(e)),t.addQualifier(r),this.addAction(t)}customFunction(e){return this.addAction(e)}transcode(e){return this.addAction(e)}videoEdit(e){return this.addAction(e)}toJson(){const e=[];for(const t of this.actions){const r=t.toJson();if(Ns(r))return r;e.push(r)}return{actions:e}}}class Hs extends Qt{}class Gs extends Qt{}function Ys(n){return n.match(/^https?:\//)}function Ks(n){return n.indexOf("/")<0}function Xs(n){return n.match(/^v[0-9]+/)}function Qs(n,e){const t=e.secure,r=e.privateCdn,s=e.cname,i=e.secureDistribution;return!t&&!s?`http://res.cloudinary.com/${n}`:t&&!i&&r?`https://${n}-res.cloudinary.com`:t&&!i?`https://res.cloudinary.com/${n}`:t&&i&&r?`https://${i}`:t&&i?`https://${i}/${n}`:!t&&s?`http://${s}/${n}`:"ERROR"}function ea(n){return n||"image"}function ta(n){return n||"upload"}function ra(n,e,t){const r=t!==!1;return e?`v${e}`:Xs(n)||Ys(n)||Ks(n)?"":r?"v1":""}function mr(n,e,t){let r=e>>0,s=String(t);return n.length>r?String(n):(r=r-n.length,r>s.length&&(s+=na(s,r/s.length)),s.slice(0,r)+String(n))}function na(n,e){let t=e,r="";for(;t>0;)r+=n,t--;return r}const ia="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Yr={};let kr=0;ia.split("").forEach(n=>{let e=kr.toString(2);e=mr(e,6,"0"),Yr[e]=n,kr++});function sa(n){if(n.split(".").length<2)throw new Error("invalid semVer, must have at least two segments");return n.split(".").reverse().map(e=>{const t=+e;if(isNaN(t)||t<0)throw"Invalid version number provided";return mr(e,2,"0")}).join(".")}function Sr(n){let e="";const r=n.split(".").length*6,s=sa(n);let o=parseInt(s.split(".").join("")).toString(2);if(o=mr(o,r,"0"),o.length%6!==0)throw"Version must be smaller than 43.21.26)";return o.match(/.{1,6}/g).forEach(a=>{e+=Yr[a]}),e}function aa(n){const e={sdkSemver:n.sdkSemver,techVersion:n.techVersion,sdkCode:n.sdkCode,product:n.product,feature:"0"};return n.accessibility&&(e.feature="D"),n.lazyload&&(e.feature="C"),n.responsive&&(e.feature="A"),n.placeholder&&(e.feature="B"),e}const oa="1.15.0";function ca(){const n="0.0.0";if(typeof window<"u")return n;try{return process.versions.node||n}catch{return n}}function la(n){const e={techVersion:ca(),sdkCode:"T",sdkSemver:oa.split("-")[0],product:"A",responsive:!1,placeholder:!1,lazyload:!1,accessibility:!1};return n?Object.assign(Object.assign({},e),n):e}function Tr(n){const e=la(n),t=aa(e);try{const r=ua(t.techVersion),s=Sr(t.sdkSemver),i=Sr(r),o=t.feature,a=t.sdkCode;return`B${t.product}${a}${s}${i}${o}`}catch{return"E"}}function ua(n){const e=n.split(".");return`${e[0]}.${e[1]}`}const Ar={"image/upload":"images","image/private":"private_images","image/authenticated":"authenticated_images","raw/upload":"files","video/upload":"videos"};class da{constructor(e,t={},r){this.setPublicID(e),this.setCloudConfig(t),this.setURLConfig(r)}setURLConfig(e){return this.urlConfig=new fr(e),this}setCloudConfig(e){return this.cloudName=e.cloudName,this.apiKey=e.apiKey,this.apiSecret=e.apiSecret,this.authToken=e.authToken,this}setPublicID(e){return this.publicID=e?e.toString():"",this}setDeliveryType(e){return this.deliveryType=e,this}setSuffix(e){return this.suffix=e,this}setSignature(e){return this.signature=e,this}setVersion(e){return e&&(this.version=e),this}setAssetType(e){return e&&(this.assetType=e),this}sign(){return this}toURL(e={}){return this.createCloudinaryURL(null,e.trackedAnalytics)}validateAssetForURLCreation(){if(typeof this.cloudName>"u")throw"You must supply a cloudName when initializing the asset";const e=this.suffix&&this.suffix.indexOf(".")>=0,t=this.suffix&&this.suffix.indexOf("/")>=0;if(e||t)throw"`suffix`` should not include . or /"}getResourceType(){const e=ea(this.assetType),t=ta(this.deliveryType),r=!!this.suffix,s=`${e}/${t}`,i=Ar[`${e}/${t}`],o=this.urlConfig.useRootPath,a=this.urlConfig.shorten;if(o){if(s==="image/upload")return"";throw new Error(`useRootPath can only be used with assetType: 'image' and deliveryType: 'upload'. Provided: ${s} instead`)}if(a&&s==="image/upload")return"iu";if(r){if(i)return i;throw new Error(`URL Suffix only supported for ${Object.keys(Ar).join(", ")}, Provided: ${s} instead`)}return s}getSignature(){return this.signature?`s--${this.signature}--`:""}createCloudinaryURL(e,t){if(!this.publicID)return"";this.validateAssetForURLCreation();const r=Qs(this.cloudName,this.urlConfig),s=e?e.toString():"",i=ra(this.publicID,this.version,this.urlConfig.forceVersion),o=this.publicID;if(typeof e=="string")return[r,this.getResourceType(),this.getSignature(),s,i,o.replace(/,/g,"%2C"),this.suffix].filter(u=>u).join("/");{const a=[encodeURI(r),this.getResourceType(),this.getSignature(),encodeURI(s),i,encodeURI(o).replace(/,/g,"%2C"),this.suffix&&encodeURI(this.suffix)].filter(m=>m).join("/").replace(/\?/g,"%3F").replace(/=/g,"%3D"),u=this.urlConfig.analytics!==!1&&!o.includes("?");let d="";if(typeof this.urlConfig.queryParams=="object")try{const m=new URLSearchParams(this.urlConfig.queryParams);u&&m.set("_a",Tr(t)),d=m.toString()}catch{console.error("Error: URLSearchParams is not available so the queryParams object cannot be parsed, please try passing as an already parsed string")}else d=this.urlConfig.queryParams||"",u&&(d+=`${d.length>0?"&":""}_a=${Tr(t)}`);return d?`${a}?${d}`:a}}}class Kr extends da{constructor(e,t,r,s){super(e,t,r),this.transformation=s}animated(e){return this.transformation.animated(e),this}border(e){return this.transformation.border(e),this}reshape(e){return this.transformation.reshape(e),this}resize(e){return this.transformation.resize(e),this}quality(e){return this.addAction(new Ht("q",e)),this}format(e){return this.addAction(new Ht("f",e)),this}roundCorners(e){return this.transformation.roundCorners(e),this}overlay(e){return this.transformation.overlay(e),this}addVariable(e){return this.transformation.addVariable(e),this}conditional(e){return this.transformation.conditional(e),this}effect(e){return this.transformation.effect(e),this}adjust(e){return this.transformation.adjust(e),this}rotate(e){return this.transformation.rotate(e),this}namedTransformation(e){return this.transformation.namedTransformation(e),this}delivery(e){return this.transformation.delivery(e),this}backgroundColor(e){return this.transformation.backgroundColor(e),this}psdTools(e){return this.transformation.psdTools(e),this}extract(e){return this.transformation.extract(e),this}addFlag(e){return this.transformation.addFlag(e),this}customFunction(e){return this.transformation.customFunction(e),this}addAction(e){return this.transformation.addAction(e),this}addTransformation(e){return this.transformation.addTransformation(e),this}toString(){return this.transformation.toString()}underlay(e){return this.transformation.underlay(e),this}toURL(e={}){return this.createCloudinaryURL(this.transformation,e?.trackedAnalytics)}}class fa extends Kr{constructor(e,t,r){super(e,t,r,new Hs)}}class ha extends Kr{constructor(e,t,r){super(e,t,r,new Gs),this.assetType="video"}transcode(e){return this.transformation.transcode(e),this}videoEdit(e){return this.transformation.videoEdit(e),this}}class pa{constructor(e){e&&(this.cloudinaryConfig=e)}image(e){return new fa(e,this.cloudinaryConfig.cloud,this.cloudinaryConfig.url)}video(e){return new ha(e,this.cloudinaryConfig.cloud,this.cloudinaryConfig.url)}setConfig(e){return this.cloudinaryConfig=e,this}getConfig(){return this.cloudinaryConfig}extendConfig(){}}var ma={},ga=Object.defineProperty,ya=(n,e)=>{for(var t in e)ga(n,t,{get:e[t],enumerable:!0})},Xr={};ya(Xr,{angle:()=>Rt,aspectRatio:()=>er,aspectRatioModesEnum:()=>tn,crop:()=>Qe,cropModesEnum:()=>Qr,extractMode:()=>rn,extractModesEnum:()=>en,flags:()=>ot,flagsEnum:()=>Ke,format:()=>wa,gravity:()=>We,height:()=>It,multiple:()=>nn,prompt:()=>ht,width:()=>Nt,x:()=>zt,y:()=>Pt,zoom:()=>gr});var Qr=p.enum(["auto","fill","lfill","fill_pad","crop","thumb","scale","fit","limit","mfit","pad","lpad","mpad","imagga_scale","imagga_crop"]),en=p.enum(["content","mask"]),Ke=p.enum(["animated","any_format","apng","attachment","awebp","clip","clip_evenodd","cutter","force_icc","force_strip","getinfo","group4","hlsv3","ignore_aspect_ratio","ignore_mask_channels","immutable_cache","keep_attribution","keep_dar","keep_iptc","layer_apply","lossy","mono","no_overflow","no_stream","png8_fl_png24_fl_png32","preserve_transparency","progressive","rasterize","region_relative","relative","replace_image","sanitize","splice","streaming_attachment","strip_profile","text_disallow_overflow","text_no_trim","tiff8_lzw","tiled","truncate_ts","waveform"]),Rt={qualifier:"a",schema:p.union([p.string(),p.number()]).describe(JSON.stringify({text:"Rotates or flips an asset by the specified number of degrees or automatically according to its orientation or available metadata.",url:"https://cloudinary.com/documentation/transformation_reference#a_angle"}))},tn=p.enum(["vflip","hflip","ignore","auto_right","auto_left"]),_a=p.union([p.number(),tn,p.intersection(p.string(),p.object({}))]),er={qualifier:"ar",schema:_a.describe(JSON.stringify({text:"Crops or resizes the asset to a new aspect ratio.",url:"https://cloudinary.com/documentation/transformation_reference#ar_aspect_ratio"}))},va=Qr,Qe={qualifier:"c",schema:va.describe(JSON.stringify({text:"Mode to use when cropping an asset.",url:"https://cloudinary.com/documentation/transformation_reference#c_crop_resize"}))},ba=en,rn={schema:ba.default("content").describe(JSON.stringify({text:"Whether to keep the content of the extracted area, or to replace it with a mask.",url:"https://cloudinary.com/documentation/transformation_reference#e_extract"}))},ot={qualifier:"fl",schema:p.union([Ke,p.array(Ke)]).describe(JSON.stringify({text:"Alters the regular behavior of another transformation or the overall delivery behavior.",url:"https://cloudinary.com/documentation/transformation_reference#fl_flag"}))},wa={qualifier:"f",schema:p.string().describe(JSON.stringify({text:"Converts (if necessary) and delivers an asset in the specified format regardless of the file extension used in the delivery URL.",url:"https://cloudinary.com/documentation/transformation_reference#f_format"}))},xa=p.union([p.enum(["auto","auto_content_aware","center","custom","east","face","face_center","multi_face","north","north_east","north_west","south","south_east","south_west","west"]),p.intersection(p.string(),p.object({}))]),We={qualifier:"g",schema:xa.describe(JSON.stringify({text:"Determines which part of an asset to focus on. Note: Default of auto is applied for supported crop modes only.",url:"https://cloudinary.com/documentation/transformation_reference#g_gravity"}))},ka=p.union([p.number(),p.string()]),It={qualifier:"h",schema:ka.describe(JSON.stringify({text:"A qualifier that determines the height of a transformed asset or an overlay.",url:"https://cloudinary.com/documentation/transformation_reference#h_height"}))},Sa=p.boolean(),nn={schema:Sa.describe(JSON.stringify({text:"Should generative AI features detect multiple instances."}))},ht={schema:p.string().describe(JSON.stringify({text:"Natural language descriptions used for generative AI capabilities."}))},Ta=p.union([p.number(),p.string()]),Nt={qualifier:"w",schema:Ta.describe(JSON.stringify({text:"A qualifier that sets the desired width of an asset using a specified value, or automatically based on the available width.",url:"https://cloudinary.com/documentation/transformation_reference#w_width"}))},zt={qualifier:"x",schema:p.union([p.string(),p.number()]).describe(JSON.stringify({text:"Adjusts the starting location or offset of the x axis.",url:"https://cloudinary.com/documentation/transformation_reference#x_y_coordinates"}))},Pt={qualifier:"y",schema:p.union([p.string(),p.number()]).describe(JSON.stringify({text:"Adjusts the starting location or offset of the y axis.",url:"https://cloudinary.com/documentation/transformation_reference#x_y_coordinates"}))},Aa=p.string(),gr={schema:Aa.describe(JSON.stringify({text:"Controls how close to crop to the detected coordinates when using face-detection, custom-coordinate, or object-specific gravity.",url:"https://cloudinary.com/documentation/transformation_reference#z_zoom"}))},sn=[{test:yi,convert:_i}],Me={aspectRatio:er,crop:Qe,gravity:We,height:It,width:Nt},rt={angle:Rt,gravity:We,x:zt,y:Pt},ir={alignment:{qualifier:!1,order:6},antialias:{qualifier:"antialias"},border:{qualifier:"bo",location:"primary"},color:{qualifier:"co",location:"primary",converters:sn},fontFamily:{qualifier:!1,order:1},fontSize:{qualifier:!1,order:2},fontStyle:{qualifier:!1,order:4},fontWeight:{qualifier:!1,order:3},hinting:{qualifier:"hinting"},letterSpacing:{qualifier:"letter_spacing"},lineSpacing:{qualifier:"line_spacing"},stroke:{qualifier:"self",order:7},textDecoration:{qualifier:!1,order:5}},te={angle:Rt,art:{prefix:"e",qualifier:"art",schema:p.string().describe(JSON.stringify({text:"Applies the selected artistic filter.",url:"https://cloudinary.com/documentation/transformation_reference#e_art"}))},autoBrightness:{prefix:"e",qualifier:"auto_brightness",schema:p.union([p.string(),p.boolean()]).describe(JSON.stringify({text:"Automatically adjusts the image brightness and blends the result with the original image.",url:"https://cloudinary.com/documentation/transformation_reference#e_auto_brightness"}))},autoColor:{prefix:"e",qualifier:"auto_color",schema:p.union([p.string(),p.boolean()]).describe(JSON.stringify({text:"Automatically adjusts the image color balance and blends the result with the original image.",url:"https://cloudinary.com/documentation/transformation_reference#e_auto_color"}))},autoContrast:{prefix:"e",qualifier:"auto_contrast",schema:p.union([p.string(),p.boolean()]).describe(JSON.stringify({text:"Automatically adjusts the image contrast and blends the result with the original image.",url:"https://cloudinary.com/documentation/transformation_reference#e_auto_contrast"}))},assistColorblind:{prefix:"e",qualifier:"assist_colorblind",schema:p.union([p.string(),p.boolean()]).describe(JSON.stringify({text:"Applies stripes or color adjustment to help people with common color blind conditions to differentiate between colors that are similar for them.",url:"https://cloudinary.com/documentation/transformation_reference#e_assist_colorblind"}))},background:{qualifier:"b",schema:p.string().describe(JSON.stringify({text:"Applies a background to empty or transparent areas.",url:"https://cloudinary.com/documentation/transformation_reference#b_background"}))},blackwhite:{prefix:"e",qualifier:"blackwhite",schema:p.union([p.string(),p.boolean()]).describe(JSON.stringify({text:"Converts an image to black and white.",url:"https://cloudinary.com/documentation/transformation_reference#e_blackwhite"}))},blur:{prefix:"e",qualifier:"blur",schema:p.union([p.string(),p.boolean()]).describe(JSON.stringify({text:"Applies a blurring filter to an asset.",url:"https://cloudinary.com/documentation/transformation_reference#e_blur"}))},blurFaces:{prefix:"e",qualifier:"blur_faces",schema:p.union([p.string(),p.boolean()]).describe(JSON.stringify({text:"Blurs all detected faces in an image.",url:"https://cloudinary.com/documentation/transformation_reference#e_blur_faces"}))},blurRegion:{prefix:"e",qualifier:"blur_region",schema:p.union([p.string(),p.boolean()]).describe(JSON.stringify({text:"Applies a blurring filter to the region of an image specified by x, y, width and height, or an area of text. If no region is specified, the whole image is blurred.",url:"https://cloudinary.com/documentation/transformation_reference#e_blur_region"}))},border:{qualifier:"bo",schema:p.string().describe(JSON.stringify({text:"Adds a solid border around an image or video.",url:"https://cloudinary.com/documentation/transformation_reference#bo_border"}))},brightness:{prefix:"e",qualifier:"brightness",schema:p.union([p.string(),p.boolean()]).describe(JSON.stringify({text:"Adjusts the image or video brightness.",url:"https://cloudinary.com/documentation/transformation_reference#e_brightness"}))},brightnessHSB:{prefix:"e",qualifier:"brightness_hsb",schema:p.union([p.string(),p.boolean()]).describe(JSON.stringify({text:"Adjusts image brightness modulation in HSB to prevent artifacts in some images.",url:"https://cloudinary.com/documentation/transformation_reference#e_brightness_hsb"}))},cartoonify:{prefix:"e",qualifier:"cartoonify",schema:p.union([p.string(),p.boolean()]).describe(JSON.stringify({text:"Applies a cartoon effect to an image.",url:"https://cloudinary.com/documentation/transformation_reference#e_cartoonify"}))},color:{qualifier:"co",schema:p.string().describe(JSON.stringify({text:"A qualifier that specifies the color to use with the corresponding transformation.",url:"https://cloudinary.com/documentation/transformation_reference#co_color"})),converters:sn},colorize:{prefix:"e",qualifier:"colorize",schema:p.string().describe(JSON.stringify({text:"Colorizes an image. By default, gray is used for colorization. You can specify a different color using the color qualifier.",url:"https://cloudinary.com/documentation/transformation_reference#e_colorize"}))},contrast:{prefix:"e",qualifier:"contrast",schema:p.union([p.string(),p.boolean()]).describe(JSON.stringify({text:"Adjusts an image or video contrast.",url:"https://cloudinary.com/documentation/transformation_reference#e_contrast"}))},displace:{prefix:"e",qualifier:"distort",schema:p.string().describe(JSON.stringify({text:"Displaces the pixels in an image according to the color channels of the pixels in another specified image (a gradient map specified with the overlay parameter).",url:"https://cloudinary.com/documentation/transformation_reference#e_displace"}))},distort:{prefix:"e",qualifier:"distort",schema:p.string().describe(JSON.stringify({text:"Distorts an image to a new shape by either adjusting its corners or by warping it into an arc.",url:"https://cloudinary.com/documentation/transformation_reference#e_distort"}))},fillLight:{prefix:"e",qualifier:"fill_light",schema:p.union([p.string(),p.boolean()]).describe(JSON.stringify({text:"Adjusts the fill light and optionally blends the result with the original image.",url:"https://cloudinary.com/documentation/transformation_reference#e_fill_light"}))},gamma:{prefix:"e",qualifier:"gamma",schema:p.union([p.string(),p.boolean()]).describe(JSON.stringify({text:"Adjusts the image or video gamma level.",url:"https://cloudinary.com/documentation/transformation_reference#e_gamma"}))},gradientFade:{prefix:"e",qualifier:"gradient_fade",schema:p.union([p.string(),p.boolean()]).describe(JSON.stringify({text:"Applies a gradient fade effect from the edge of an image.",url:"https://cloudinary.com/documentation/transformation_reference#e_gradient_fade"}))},grayscale:{prefix:"e",qualifier:"grayscale",schema:p.boolean().describe(JSON.stringify({text:"Converts an image to grayscale (multiple shades of gray).",url:"https://cloudinary.com/documentation/transformation_reference#e_grayscale"}))},hue:{prefix:"e",qualifier:"hue",schema:p.union([p.string(),p.boolean()]).describe(JSON.stringify({text:"Adjusts an image's hue.",url:"https://cloudinary.com/documentation/transformation_reference#e_hue"}))},improve:{prefix:"e",qualifier:"improve",schema:p.union([p.string(),p.boolean()]).describe(JSON.stringify({text:"Adjusts an image's colors, contrast and brightness to improve its appearance.",url:"https://cloudinary.com/documentation/transformation_reference#e_improve"}))},loop:{prefix:"e",qualifier:"loop",schema:p.union([p.boolean(),p.number(),p.string()]).describe(JSON.stringify({text:"Loops a video or animated image the specified number of times.",url:"https://cloudinary.com/documentation/transformation_reference#e_loop"}))},multiply:{prefix:"e",qualifier:"multiply",schema:p.boolean().describe(JSON.stringify({text:"A qualifier that blends image layers using the multiply blend mode",url:"https://cloudinary.com/documentation/transformation_reference#e_multiply"}))},negate:{prefix:"e",qualifier:"negate",schema:p.union([p.string(),p.boolean()]).describe(JSON.stringify({text:"https://cloudinary.com/documentation/transformation_reference#e_negate",url:"https://cloudinary.com/documentation/transformation_reference#e_negate"}))},noise:{prefix:"e",qualifier:"noise",schema:p.boolean().describe(JSON.stringify({text:"https://cloudinary.com/documentation/transformation_reference#e_noise",url:"https://cloudinary.com/documentation/transformation_reference#e_noise"}))},oilPaint:{prefix:"e",qualifier:"oil_paint",schema:p.union([p.string(),p.boolean()]).describe(JSON.stringify({text:"https://cloudinary.com/documentation/transformation_reference#e_oil_paint",url:"https://cloudinary.com/documentation/transformation_reference#e_oil_paint"}))},opacity:{qualifier:"o",schema:p.union([p.string(),p.number()]).describe(JSON.stringify({text:"Adjusts the opacity of an asset and makes it semi-transparent.",url:"https://cloudinary.com/documentation/transformation_reference#o_opacity"}))},outline:{prefix:"e",qualifier:"outline",schema:p.union([p.string(),p.boolean()]).describe(JSON.stringify({text:"Adds an outline effect to an image.",url:"https://cloudinary.com/documentation/transformation_reference#e_outline"}))},pixelate:{prefix:"e",qualifier:"pixelate",schema:p.union([p.string(),p.boolean()]).describe(JSON.stringify({text:"Applies a pixelation effect.",url:"https://cloudinary.com/documentation/transformation_reference#e_pixelate"}))},pixelateFaces:{prefix:"e",qualifier:"pixelate_faces",schema:p.union([p.string(),p.boolean()]).describe(JSON.stringify({text:"Pixelates all detected faces in an image.",url:"https://cloudinary.com/documentation/transformation_reference#e_pixelate_faces"}))},pixelateRegion:{prefix:"e",qualifier:"pixelate_region",schema:p.union([p.string(),p.boolean()]).describe(JSON.stringify({text:"Pixelates the region of an image specified by x, y, width and height, or an area of text.",url:"https://cloudinary.com/documentation/transformation_reference#e_pixelate_region"}))},radius:{qualifier:"r",schema:p.union([p.string(),p.number()]).describe(JSON.stringify({text:"Rounds the corners of an image or video.",url:"https://cloudinary.com/documentation/transformation_reference#r_round_corners"}))},redeye:{prefix:"e",qualifier:"redeye",schema:p.union([p.string(),p.boolean()]).describe(JSON.stringify({text:"Automatically removes red eyes in an image.",url:"https://cloudinary.com/documentation/transformation_reference#e_redeye"}))},replaceColor:{prefix:"e",qualifier:"replace_color",schema:p.string().describe(JSON.stringify({text:"Maps an input color and those similar to the input color to corresponding shades of a specified output color.",url:"https://cloudinary.com/documentation/transformation_reference#e_replace_color"}))},saturation:{prefix:"e",qualifier:"saturation",schema:p.union([p.string(),p.boolean()]).describe(JSON.stringify({text:"Adjusts an image or video saturation level.",url:"https://cloudinary.com/documentation/transformation_reference#e_saturation"}))},screen:{prefix:"e",qualifier:"screen",schema:p.boolean().describe(JSON.stringify({text:"A qualifier that blends image layers using the screen blend mode.",url:"https://cloudinary.com/documentation/transformation_reference#e_screen"}))},sepia:{prefix:"e",qualifier:"sepia",schema:p.union([p.string(),p.boolean()]).describe(JSON.stringify({text:"Changes the color scheme of an image to sepia.",url:"https://cloudinary.com/documentation/transformation_reference#e_sepia"}))},shadow:{prefix:"e",qualifier:"shadow",schema:p.union([p.string(),p.boolean()]).describe(JSON.stringify({text:"Adds a gray shadow to the bottom right of an image.",url:"https://cloudinary.com/documentation/transformation_reference#e_shadow"}))},sharpen:{prefix:"e",qualifier:"sharpen",schema:p.union([p.string(),p.boolean()]).describe(JSON.stringify({text:"Applies a sharpening filter.",url:"https://cloudinary.com/documentation/transformation_reference#e_sharpen"}))},shear:{prefix:"e",qualifier:"shear",schema:p.string().describe(JSON.stringify({text:"Skews an image according to the two specified values in degrees.",url:"https://cloudinary.com/documentation/transformation_reference#e_shear"}))},simulateColorblind:{prefix:"e",qualifier:"simulate_colorblind",schema:p.union([p.string(),p.boolean()]).describe(JSON.stringify({text:"Simulates the way an image would appear to someone with the specified color blind condition.",url:"https://cloudinary.com/documentation/transformation_reference#e_simulate_colorblind"}))},tint:{prefix:"e",qualifier:"tint",schema:p.union([p.string(),p.boolean()]).describe(JSON.stringify({text:"Blends an image with one or more tint colors at a specified intensity.",url:"https://cloudinary.com/documentation/transformation_reference#e_tint"}))},trim:{prefix:"e",qualifier:"trim",schema:p.union([p.string(),p.boolean()]).describe(JSON.stringify({text:"Detects and removes image edges whose color is similar to the corner pixels.",url:"https://cloudinary.com/documentation/transformation_reference#e_trim"}))},unsharpMask:{prefix:"e",qualifier:"unsharp_mask",schema:p.union([p.string(),p.boolean()]).describe(JSON.stringify({text:"Applies an unsharp mask filter to an image.",url:"https://cloudinary.com/documentation/transformation_reference#e_unsharp_mask"}))},vectorize:{prefix:"e",qualifier:"vectorize",schema:p.union([p.string(),p.boolean()]).describe(JSON.stringify({text:"Vectorizes an image.",url:"https://cloudinary.com/documentation/transformation_reference#e_vectorize"}))},vibrance:{prefix:"e",qualifier:"vibrance",schema:p.union([p.string(),p.boolean()]).describe(JSON.stringify({text:"Applies a vibrance filter to an image.",url:"https://cloudinary.com/documentation/transformation_reference#e_vibrance"}))},vignette:{prefix:"e",qualifier:"vignette",schema:p.union([p.string(),p.boolean()]).describe(JSON.stringify({text:"Applies a vignette effect to an image.",url:"https://cloudinary.com/documentation/transformation_reference#e_vignette"}))}};function pt({prefix:n,qualifier:e,value:t,converters:r}){let s="";n&&(s=`${n}_`);let i=t;if(r?.forEach(({test:o,convert:a})=>{o(i)&&(i=a(i))}),i===!0||i==="true")return`${s}${e}`;if(typeof i=="string"||typeof i=="number")return n?`${s}${e}:${i}`:`${e}_${i}`}function Gt(n){return`(${n.join(";")})`}function Yt(n){return typeof n!="string"?n:parseInt(n)}var Oa=["auto","crop","fill","lfill","fill_pad","thumb"],sr=["auto","crop","fill","lfill","fill_pad","thumb"],Or=["crop","thumb"],Zt="limit",Er=p.object({aspectRatio:er.schema.optional(),type:Qe.schema,gravity:We.schema.optional(),height:It.schema.optional(),width:Nt.schema.optional(),x:zt.schema.optional(),y:Pt.schema.optional(),zoom:gr.schema.optional(),source:p.boolean().optional()}),an={aspectRatio:er.schema.optional(),crop:p.union([Qe.schema,Er,p.array(Er)]).default(Zt).optional(),gravity:We.schema.optional(),zoom:gr.schema.optional()},Ea={props:an,assetTypes:["image","images","video","videos"],plugin:n=>{const{cldAsset:e,options:t}=n;let r=[];typeof t.crop=="string"||typeof t.crop>"u"?r.push({aspectRatio:t.aspectRatio,height:t.height,gravity:t.gravity,type:t.crop||Zt,width:t.width,zoom:t.zoom}):typeof t.crop=="object"&&!Array.isArray(t.crop)?r.push(t.crop):Array.isArray(t.crop)&&(r=t.crop),r.length===1&&r[0].source===!0&&r.push({aspectRatio:t.aspectRatio,width:t.width,height:t.height,gravity:t.gravity,type:Zt,zoom:t.zoom});const s=[],i=[];for(const a of r){const u={width:a.width,height:a.height};typeof u.width>"u"&&typeof a.aspectRatio>"u"&&(u.width=t.width,typeof u.height>"u"&&(u.height=t.height));const d=Ca({aspectRatio:a.aspectRatio,gravity:a.gravity,type:a.type||Zt,x:a.x,y:a.y,zoom:a.zoom,...u});d.length>0&&(a.source===!0?i.push(d):s.push(d))}i.forEach(a=>{a.length>0&&e.addTransformation(a.join(","))});const o={options:{}};return o.options&&s.length>0&&(o.options.resize=s.map(a=>a.join(",")).join("/")),o}};function Ca(n){const{aspectRatio:e,type:t,x:r,y:s,zoom:i}=n;let o=n.gravity;const a=Yt(n.height),u=Yt(n.width),d=[],m=a||u,v=e&&Oa.includes(t),x=typeof r=="number"||typeof r=="string",h=typeof s=="number"||typeof s=="string",b=x||h;return t&&(m||v||b)&&d.push(`c_${t}`),v&&d.push(`ar_${e}`),u&&d.push(`w_${u}`),!["limit"].includes(t)&&typeof a=="number"&&d.push(`h_${a}`),x&&d.push(`x_${r}`),h&&d.push(`y_${s}`),!o&&sr.includes(t)&&!b&&(o="auto"),o&&(o==="auto"&&!sr.includes(t)?console.warn(`Auto gravity can only be used with crop modes: ${sr.join(", ")}. Not applying gravity.`):d.push(`g_${o}`)),i&&(i==="auto"&&!Or.includes(t)?console.warn(`Zoom can only be used with crop modes: ${Or.join(", ")}. Not applying zoom.`):d.push(`z_${i}`)),d}var Cr={angle:te.angle.schema.optional(),art:te.art.schema.optional(),autoBrightness:te.autoBrightness.schema.optional(),autoColor:te.autoColor.schema.optional(),autoContrast:te.autoContrast.schema.optional(),assistColorblind:te.assistColorblind.schema.optional(),background:te.background.schema.optional(),blackwhite:te.blackwhite.schema.optional(),blur:te.blur.schema.optional(),blurFaces:te.blurFaces.schema.optional(),blurRegion:te.blurRegion.schema.optional(),border:te.border.schema.optional(),brightness:te.brightness.schema.optional(),brightnessHSB:te.brightnessHSB.schema.optional(),cartoonify:te.cartoonify.schema.optional(),color:te.color.schema.optional(),colorize:te.colorize.schema.optional(),contrast:te.contrast.schema.optional(),distort:te.distort.schema.optional(),fillLight:te.fillLight.schema.optional(),gamma:te.gamma.schema.optional(),gradientFade:te.gradientFade.schema.optional(),grayscale:te.grayscale.schema.optional(),improve:te.improve.schema.optional(),loop:te.loop.schema.optional(),multiply:te.multiply.schema.optional(),negate:te.negate.schema.optional(),oilPaint:te.oilPaint.schema.optional(),opacity:te.opacity.schema.optional(),outline:te.outline.schema.optional(),pixelate:te.pixelate.schema.optional(),pixelateFaces:te.pixelateFaces.schema.optional(),pixelateRegion:te.pixelateRegion.schema.optional(),radius:te.radius.schema.optional(),redeye:te.redeye.schema.optional(),replaceColor:te.replaceColor.schema.optional(),saturation:te.saturation.schema.optional(),screen:te.screen.schema.optional(),sepia:te.sepia.schema.optional(),shadow:te.shadow.schema.optional(),sharpen:te.sharpen.schema.optional(),shear:te.shear.schema.optional(),simulateColorblind:te.simulateColorblind.schema.optional(),tint:te.tint.schema.optional(),trim:te.trim.schema.optional(),unsharpMask:te.unsharpMask.schema.optional(),vectorize:te.vectorize.schema.optional(),vibrance:te.vibrance.schema.optional(),vignette:te.vignette.schema.optional()},on={effects:p.array(p.object(Cr)).describe(JSON.stringify({text:"Array of objects specifying transformations to be applied to asset."})).optional(),...Cr},ja={props:on,assetTypes:["image","images","video","videos"],plugin:n=>{const{cldAsset:e,options:t}=n;s({effects:te,options:t}).filter(i=>!!i).forEach(i=>e.effect(i)),Array.isArray(t?.effects)&&t?.effects.forEach(i=>{const o=s({effects:te,options:i}).filter(a=>!!a).join(",");e.effect(o)});function s({effects:i,options:o}){return Object.keys(i).map(a=>{const{prefix:u,qualifier:d,converters:m}=i[a];return pt({qualifier:d,prefix:u,value:o?.[a],converters:m})})}return{}}},{flagsEnum:jr}=Xr,cn={flags:ot.schema.optional()},Ra={props:cn,assetTypes:["image","images","video","videos"],plugin:n=>{const{cldAsset:e,options:t}=n,{flags:r=[]}=t;return Array.isArray(r)&&r.length>0?r.forEach(s=>{const{success:i}=jr.safeParse(s);i&&e.addFlag(s)}):typeof r=="object"&&Object.entries(r).forEach(([s,i])=>{const{success:o}=jr.safeParse(s);o&&e.addTransformation(`fl_${s}:${i}`)}),{}}},Lt=p.string(),ln={namedTransformations:p.union([Lt,p.array(Lt)]).describe(JSON.stringify({text:"Named transformations to apply to asset.",url:"https://cloudinary.com/documentation/image_transformations#named_transformations"})).optional(),transformations:p.union([Lt,p.array(Lt)]).describe(JSON.stringify({text:"Deprecated: use namedTransformations instead",url:"https://cloudinary.com/documentation/image_transformations#named_transformations"})).optional()},Ia={props:ln,strict:!0,assetTypes:["image","images","video","videos"],plugin:({cldAsset:n,options:e})=>{const{transformations:t,namedTransformations:r}=e;t&&ma.NODE_ENVIRONMENT==="development"&&console.warn("The transformations prop is deprecated. Please use namedTransformations instead.");let s=r||t||[];return Array.isArray(s)||(s=[s]),s.forEach(i=>{n.addTransformation(`t_${i}`)}),{}}},Na=p.object({alignment:p.string().optional(),antialias:p.string().optional(),border:p.string().optional(),color:p.string().optional(),fontFamily:p.string().optional(),fontSize:p.number().optional(),fontStyle:p.union([p.string(),p.number()]).optional(),fontWeight:p.string().optional(),hinting:p.union([p.string(),p.number()]).optional(),letterSpacing:p.union([p.string(),p.number()]).optional(),lineSpacing:p.union([p.string(),p.number()]).optional(),stroke:p.string().optional(),text:p.string()}),za=p.object({angle:Rt.schema.optional(),gravity:We.schema.optional(),x:zt.schema.optional(),y:Pt.schema.optional()}),Rr=p.object({appliedEffects:p.array(p.object({})).optional(),appliedFlags:ot.schema.optional(),effects:p.array(p.object({})).optional(),crop:Qe.schema.optional(),flags:ot.schema.optional(),height:It.schema.optional(),position:za.optional(),publicId:p.string().optional(),text:p.union([p.string(),Na]).optional(),url:p.string().optional(),width:Nt.schema.optional()}),ar={color:"black",fontFamily:"Arial",fontSize:200,fontWeight:"bold"},un={overlay:Rr.describe(JSON.stringify({text:"Image or text layer that is applied on top of the base image.",url:"https://cloudinary.com/documentation/transformation_reference#l_layer"})).optional(),overlays:p.array(Rr).describe(JSON.stringify({text:"Image or text layers that are applied on top of the base image.",url:"https://cloudinary.com/documentation/transformation_reference#l_layer"})).optional(),text:p.string().describe(JSON.stringify({text:"Text to be overlaid on asset.",url:"https://cloudinary.com/documentation/image_transformations#transformation_url_structure"})).optional()},Pa={props:un,assetTypes:["image","images","video","videos"],plugin:({cldAsset:n,options:e})=>{const{text:t,overlays:r=[]}=e,s="overlay",i="l";Array.isArray(r)&&r.forEach(o),typeof t=="string"?o({text:Object.assign({},ar,{text:t})}):typeof t=="object"&&o({text:Object.assign({},ar,t)});function o({publicId:a,url:u,position:d,text:m,effects:v=[],appliedEffects:x=[],flags:h=[],appliedFlags:b=[],...f}){const _=typeof a=="string",g=typeof u=="string",k=typeof m=="object"||typeof m=="string",T=typeof d=="object";if(!_&&!g&&!k){console.warn(`An ${s} is missing Public ID, URL, or Text`);return}let A;k?A=`${i}_text`:_?A=`${i}_${a.replace(/\//g,":")}`:g&&(A=`${i}_fetch:${vi(u)}`);const O=[],B=[];if(Object.keys(f).forEach(j=>{if(!Be(Me,j))return;const{qualifier:U,converters:Q}=Me[j],S=pt({qualifier:U,value:f[j],converters:Q});S&&O.push(S)}),v.forEach(j=>{Object.keys(j).forEach(U=>{const Q=Me[U]||te[U]||rt[U];if(!Q)return;const{qualifier:S,prefix:z,converters:l}=Q,D=pt({qualifier:S,prefix:z,value:j[U],converters:l});D&&O.push(D)})}),x.forEach(j=>{Object.keys(j).forEach(U=>{const Q=Me[U]||te[U]||rt[U];if(!Q)return;const{qualifier:S,prefix:z,converters:l}=Q,D=pt({qualifier:S,prefix:z,value:j[U],converters:l});D&&B.push(D)})}),(Array.isArray(h)?h:[h]).forEach(j=>{const{success:U}=Ke.safeParse(j);U&&O.push(`fl_${j}`)}),(Array.isArray(b)?b:[b]).forEach(j=>{const{success:U}=Ke.safeParse(j);U&&B.push(`fl_${j}`)}),k){typeof m=="string"&&(m={...ar,text:m});const j=[];if(typeof m=="object"){const S=Object.keys(m).filter(l=>Be(ir,l)).map(l=>{const D=m&&Be(m,l)&&m[l];return{...ir[l],key:l,value:D,order:ir[l].order||99}}),z=bi(S,"order");for(const l of z){const{key:D,value:oe,qualifier:$,location:le,converters:V}=l;let ne=oe;V?.forEach(({test:I,convert:R})=>{I(oe)&&(ne=R(oe))}),le==="primary"?O.push(`${$}_${ne}`):$==="self"?j.push(D):$?j.push(`${$}_${ne}`):j.push(ne)}}const U={".":"%2E",",":"%2C","/":"%2F"};let Q=m?.text||"";typeof Q=="string"&&Object.keys(U)?.forEach(S=>{Q=Q?.replace(S,U[S])}),A=`${A}:${j.join("_")}:${Q}`}T&&Object.keys(d).forEach(j=>{if(!Be(rt,j)||!Be(d,j))return;const{qualifier:U,converters:Q}=rt[j],S=pt({qualifier:U,value:d[j],converters:Q});S&&B.push(S)}),O.length>0&&(A=`${A},${O.join(",")}`),A=`${A}/fl_layer_apply,fl_no_overflow`,B.length>0&&(A=`${A},${B.join(",")}`),n.addTransformation(A)}return{}}},dn={preserveTransformations:p.boolean().describe(JSON.stringify({text:"Preserves transformations from a Cloudinary URL when using using a Cloudinary URL as the asset source (src)."})).optional()},Da={props:dn,assetTypes:["image","images","video","videos"],plugin:({cldAsset:n,options:e})=>{const{preserveTransformations:t=!1}=e;if(t)try{mi(e.src).map(s=>s.join(",")).flat().forEach(s=>{n.addTransformation(s)})}catch(r){console.warn(`Failed to preserve transformations: ${r.message}`)}return{}}},Ir=p.string(),fn={rawTransformations:p.union([Ir,p.array(Ir)]).describe(JSON.stringify({text:"Array of transformation parameters using the Cloudinary URL API to apply to an asset.",url:"https://cloudinary.com/documentation/transformation_reference"})).optional()},Ba={props:fn,assetTypes:["image","images","video","videos"],plugin:({cldAsset:n,options:e})=>{let{rawTransformations:t=[]}=e;return Array.isArray(t)||(t=[t]),t.forEach(r=>{n.addTransformation(r)}),{}}},hn={removeBackground:p.boolean().describe(JSON.stringify({text:"Removes the background of an image using the Cloudinary AI Background Removal Add-On (Required).",url:"https://cloudinary.com/documentation/cloudinary_ai_background_removal_addon"})).optional()},La={props:hn,assetTypes:["image","images"],plugin:n=>{const{cldAsset:e,options:t}=n,{removeBackground:r=!1}=t;return r&&e.effect("e_background_removal"),{}}},pn={sanitize:p.boolean().describe(JSON.stringify({text:"Runs a sanitizer on SVG images.",url:"https://cloudinary.com/documentation/transformation_reference#fl_sanitize"})).optional()},Ua={props:pn,assetTypes:["image","images"],plugin:({cldAsset:n,options:e})=>{const{sanitize:t=!0}=e;return t&&(e.format==="svg"||n.publicID.endsWith(".svg"))&&n.effect("fl_sanitize"),{}}},mn={seoSuffix:p.string().describe(JSON.stringify({text:"Configures the URL to include an SEO-friendly suffix in the URL",url:"https://cloudinary.com/documentation/advanced_url_delivery_options#seo_friendly_media_asset_urls"})).optional()},Za={props:mn,assetTypes:["image","images","video","videos"],plugin:({cldAsset:n,options:e})=>{const{seoSuffix:t}=e;return typeof t=="string"&&(e.deliveryType==="fetch"?console.warn("SEO suffix is not supported with a delivery type of fetch"):n.setSuffix(t)),{}}},Ma=p.object({angle:Rt.schema.optional(),gravity:We.schema.optional(),x:zt.schema.optional(),y:Pt.schema.optional()}),$a=p.object({appliedEffects:p.array(p.object({})).optional(),appliedFlags:ot.schema.optional(),effects:p.array(p.object({})).optional(),crop:Qe.schema.optional(),flags:ot.schema.optional(),height:It.schema.optional(),position:Ma.optional(),publicId:p.string().optional(),type:p.string().optional(),url:p.string().optional(),width:Nt.schema.optional()}),gn={underlay:p.string().describe(JSON.stringify({text:"Public ID of image that is applied under the base image.",url:"https://cloudinary.com/documentation/transformation_reference#l_layer"})).optional(),underlays:p.array($a).describe(JSON.stringify({text:"Image layers that are applied under the base image.",url:"https://cloudinary.com/documentation/transformation_reference#l_layer"})).optional()},Fa={props:gn,assetTypes:["image","images","video","videos"],plugin:({cldAsset:n,options:e})=>{const{underlay:t,underlays:r=[]}=e,s="u";Array.isArray(r)&&r.forEach(i),typeof t=="string"&&i({publicId:t,crop:"fill",width:"1.0",height:"1.0",flags:["relative"]});function i({publicId:o,type:a,position:u,effects:d=[],flags:m=[],appliedFlags:v=[],...x}){const h=typeof o=="string",b=typeof u=="object";if(!h){console.warn(`An ${a} is missing a Public ID`);return}let f=`${s}_${o.replace(/\//g,":")}`;const _=[],g=[];Object.keys(x).forEach(A=>{if(!Be(Me,A))return;const{qualifier:O}=Me[A];_.push(`${O}_${x[A]}`)}),d.forEach(A=>{Object.keys(A).forEach(O=>{if(!Be(Me,O))return;const{qualifier:B}=Me[O];_.push(`${B}_${A[O]}`)})}),b&&Object.keys(u).forEach(A=>{if(!Be(rt,A))return;const{qualifier:O}=rt[A];g.push(`${O}_${u[A]}`)}),(Array.isArray(m)?m:[m]).forEach(A=>{const{success:O}=Ke.safeParse(A);O&&_.push(`fl_${A}`)}),(Array.isArray(v)?v:[v]).forEach(A=>{const{success:O}=Ke.safeParse(A);O&&g.push(`fl_${A}`)}),f=`${f},${_.join(",")}`,f=`${f}/fl_layer_apply,fl_no_overflow`,g.length>0&&(f=`${f},${g.join(",")}`),n.addTransformation(f)}return{}}},yn={version:p.union([p.number(),p.string()]).describe(JSON.stringify({text:"Custom version number to apply to asset URL.",url:"https://cloudinary.com/documentation/advanced_url_delivery_options#asset_versions"})).optional()},qa={props:yn,assetTypes:["image","images","video","videos"],plugin:({cldAsset:n,options:e})=>{const{version:t}=e;return(typeof t=="string"||typeof t=="number")&&n.setVersion(`${t}`.replace("v","")),{}}},_n=p.object({assetType:p.string().default("image").describe(JSON.stringify({text:"The type of asset to deliver.",url:"https://cloudinary.com/documentation/image_transformations#transformation_url_structure"})).optional(),deliveryType:p.string().default("upload").describe(JSON.stringify({text:"Delivery method of the asset.",url:"https://cloudinary.com/documentation/image_transformations#delivery_types"})).optional(),dpr:p.union([p.string(),p.number()]).describe(JSON.stringify({text:"Delivery method of the asset.",url:"https://cloudinary.com/documentation/image_transformations#delivery_types"})).optional(),format:p.string().default("auto").describe(JSON.stringify({text:"Converts (if necessary) and delivers an asset in the specified format.",url:"https://cloudinary.com/documentation/transformation_reference#f_format"})).optional(),height:p.union([p.string(),p.number()]).describe(JSON.stringify({text:"Height of the given asset."})).optional(),quality:p.union([p.string(),p.number(),p.string()]).default("auto").describe(JSON.stringify({text:"Quality of the delivered asset",url:"https://cloudinary.com/documentation/transformation_reference#q_quality"})).optional(),src:p.string().describe(JSON.stringify({text:"Cloudinary Public ID or versioned Cloudinary URL (/v1234/)"})),strictTransformations:p.boolean().describe(JSON.stringify({text:"Gives you the ability to have more control over what transformations are permitted to be used from your Cloudinary account.",url:"https://cloudinary.com/documentation/control_access_to_media#strict_transformations"})).optional(),width:p.union([p.string(),p.number()]).describe(JSON.stringify({text:"Width of the given asset."})).optional(),...an,...on,...cn,...ln,...un,...dn,...fn,...hn,...pn,...mn,...gn,...yn}),vn={defaultImage:p.string().describe(JSON.stringify({text:"Configures the default image to use in case the given public ID is not available. Must include file extension.",url:"https://cloudinary.com/documentation/transformation_reference#d_default_image"})).optional()},Va={props:vn,assetTypes:["image","images"],plugin:n=>{const{cldAsset:e,options:t}=n,{defaultImage:r}=t;if(typeof r=="string"){Ur(r)||console.warn("The defaultImage prop may be missing a format and must include it along with the public ID. (Ex: myimage.jpg)");const s=r.replace(/\//g,":");e.addTransformation(`d_${s}`)}return{}}},bn={enhance:p.boolean().describe(JSON.stringify({text:"Uses AI to analyze an image and make adjustments to enhance the appeal of the image.",url:"https://cloudinary.com/documentation/transformation_reference#e_enhance"})).optional()},Ja={props:bn,assetTypes:["image","images"],plugin:n=>{const{cldAsset:e,options:t}=n,{enhance:r=!1}=t;return r&&e.effect("e_enhance"),{}}},wn={extract:p.union([ht.schema.optional(),p.array(ht.schema).optional(),p.object({invert:p.boolean().default(!1).optional(),mode:rn.schema.optional(),multiple:nn.schema.default(!1).optional(),prompt:p.union([ht.schema,p.array(ht.schema)]).optional()})]).describe(JSON.stringify({text:"Extracts an area or multiple areas of an image, described in natural language.",url:"https://cloudinary.com/documentation/transformation_reference#e_extract"})).optional()},Wa={props:wn,assetTypes:["image","images"],plugin:n=>{const{cldAsset:e,options:t}=n,{extract:r}=t;if(!r||typeof r>"u")return{};const s=[];if(typeof r=="string")s.push(`prompt_${r}`);else if(Array.isArray(r))s.push(`prompt_${Nr(r)}`);else if(typeof r=="object"&&!Array.isArray(r)){const i=Nr(r.prompt);i&&s.push(`prompt_${i}`),r.invert===!0&&s.push("invert_true"),typeof r.mode=="string"&&s.push(`mode_${r.mode}`),r.multiple===!0&&s.push("multiple_true")}if(s.length>0){const i=`e_extract:${s.join(";")}`;e.addTransformation(i)}return{}}};function Nr(n){if(typeof n=="string")return n;if(Array.isArray(n))return`(${n.filter(e=>typeof e=="string").join(";")})`}var zr="pad",xn={fillBackground:p.union([p.boolean(),p.object({crop:Qe.schema.optional(),gravity:We.schema.optional(),prompt:p.string().optional()})]).describe(JSON.stringify({text:"Uses Generative Fill to extended padded image with AI",url:"https://cloudinary.com/documentation/transformation_reference#b_gen_fill"})).optional()},Ha={props:xn,assetTypes:["image","images"],plugin:n=>{const{cldAsset:e,options:t}=n,{fillBackground:r}=t;if(typeof r>"u")return{};const s=Yt(t.width),i=Yt(t.height),o=typeof i=="number"&&typeof s=="number";let a=t.aspectRatio;if(!a&&o&&(a=`${s}:${i}`),!a)return{};if(r===!0){const u=["b_gen_fill",`ar_${a}`,`c_${zr}`];e.addTransformation(u.join(","))}else if(typeof r=="object"){const{crop:u=zr,gravity:d,prompt:m}=r,v=[`ar_${a}`,`c_${u}`];typeof m=="string"?v.unshift(`b_gen_fill:${m}`):v.unshift("b_gen_fill"),typeof d=="string"&&v.push(`g_${d}`),e.addTransformation(v.join(","))}return{}}},kn=p.union([p.string(),p.array(p.string())]),Ga=p.object({prompt:kn.optional(),to:p.string().optional(),multiple:p.boolean().optional()}),Sn={recolor:p.union([kn,Ga]).describe(JSON.stringify({text:"Uses generative AI to recolor parts of your image, maintaining the relative shading.",url:"https://cloudinary.com/documentation/transformation_reference#e_gen_recolor"})).optional()},Ya={props:Sn,assetTypes:["image","images"],plugin:n=>{const{cldAsset:e,options:t}=n,{recolor:r}=t,s={prompt:void 0,"to-color":void 0,multiple:void 0};Array.isArray(r)?(Array.isArray(r[0])?s.prompt=Gt(r[0]):s.prompt=r[0],typeof r[1]=="string"&&(s["to-color"]=r[1])):typeof r=="object"&&(typeof r.prompt=="string"?s.prompt=r.prompt:Array.isArray(r.prompt)&&(s.prompt=Gt(r.prompt)),typeof r.to=="string"&&(s["to-color"]=r.to),r.multiple===!0&&(s.multiple="true"));const i=Object.entries(s).filter(([,o])=>!!o).map(([o,a])=>`${o}_${a}`).join(";");return i&&e.addTransformation(`e_gen_recolor:${i}`),{}}},Tn=p.union([p.string(),p.array(p.string())]),Ka=p.object({prompt:Tn.optional(),region:p.union([p.array(p.number()),p.array(p.array(p.number()))]).optional(),multiple:p.boolean().optional(),removeShadow:p.boolean().optional()}),An={remove:p.union([Tn,Ka]).describe(JSON.stringify({text:"Applies zooming and/or panning to an image, resulting in a video or animated image.",url:"https://cloudinary.com/documentation/transformation_reference#e_zoompan"})).optional()},Xa={props:An,assetTypes:["image","images"],plugin:({cldAsset:n,options:e})=>{const{remove:t}=e,r={prompt:void 0,region:void 0,multiple:void 0,"remove-shadow":void 0};if(typeof t=="string")r.prompt=t;else if(Array.isArray(t))r.prompt=Gt(t);else if(typeof t=="object"){const i=typeof t.prompt=="string"||Array.isArray(t.prompt),o=Array.isArray(t.region);if(i&&o)throw new Error("Invalid remove options: you can not have both a prompt and a region. More info: https://cloudinary.com/documentation/transformation_reference#e_gen_remove");typeof t.prompt=="string"?r.prompt=t.prompt:Array.isArray(t.prompt)&&(r.prompt=Gt(t.prompt)),Array.isArray(t.region)&&(r.region=On(t.region)),t.multiple===!0&&(r.multiple="true"),t.removeShadow===!0&&(r["remove-shadow"]="true")}const s=Object.entries(r).filter(([,i])=>!!i).map(([i,o])=>`${i}_${o}`).join(";");return s&&n.addTransformation(`e_gen_remove:${s}`),{}}};function On(n){const e={0:"x",1:"y",2:"w",3:"h"};return`(${n.map((r,s)=>Array.isArray(r)?On(r):`${e[s]}_${r}`).join(";")})`}var En={replaceBackground:p.union([p.boolean(),p.string(),p.object({seed:p.number().optional(),prompt:p.string().optional()})]).describe(JSON.stringify({text:"Replaces the background of an image with an AI-generated background.",url:"https://cloudinary.com/documentation/transformation_reference#e_gen_background_replace"})).optional()},Qa={props:En,assetTypes:["image","images"],plugin:n=>{const{cldAsset:e,options:t}=n,{replaceBackground:r}=t;if(!r||typeof r>"u")return{};const s=[];typeof r=="object"?(typeof r.prompt<"u"&&s.push(`prompt_${r.prompt}`),typeof r.seed=="number"&&s.push(`seed_${r.seed}`)):typeof r=="string"&&s.push(`prompt_${r}`);let i="e_gen_background_replace";return s.length>0&&(i=`${i}:${s.join(";")}`),e.addTransformation(i),{}}},Cn={replace:p.union([p.array(p.string()),p.array(p.boolean()),p.object({to:p.string(),from:p.string(),preserveGeometry:p.boolean().optional()})]).describe(JSON.stringify({text:"Uses generative AI to replace parts of your image with something else.",url:"https://cloudinary.com/documentation/transformation_reference#e_gen_replace"})).optional()},eo={props:Cn,assetTypes:["image","images"],plugin:({cldAsset:n,options:e})=>{const{replace:t=null}=e;if(t){let r,s,i=!1;Array.isArray(t)?(r=t[0],s=t[1],i=t[2]||!1):(r=t.from,s=t.to,i=t.preserveGeometry||!1);const o=[`e_gen_replace:from_${r}`,`to_${s}`];i&&o.push(`preserve-geometry_${i}`),n.effect(o.join(";"))}return{}}},jn={restore:p.boolean().describe(JSON.stringify({text:"Uses generative AI to restore details in poor quality images or images that may have become degraded through repeated processing and compression.",url:"https://cloudinary.com/documentation/transformation_reference#e_gen_restore"})).optional()},to={props:jn,assetTypes:["image","images"],plugin:({cldAsset:n,options:e})=>{const{restore:t=!1}=e;return t&&n.effect("e_gen_restore"),{}}},Rn={zoompan:p.union([p.string(),p.boolean(),p.object({loop:te.loop.schema.optional(),options:p.string()})]).describe(JSON.stringify({text:"Applies zooming and/or panning to an image, resulting in a video or animated image.",url:"https://cloudinary.com/documentation/transformation_reference#e_zoompan"})).optional()},ro={props:Rn,assetTypes:["image","images"],plugin:({cldAsset:n,options:e})=>{const{zoompan:t=!1}=e,r={format:void 0};if(t===!0)n.effect("e_zoompan");else if(typeof t=="string")t==="loop"?(n.effect("e_zoompan"),n.effect("e_loop")):n.effect(`e_zoompan:${t}`);else if(typeof t=="object"){let s="e_zoompan";typeof t.options=="string"&&(s=`${s}:${t.options}`),n.effect(s);let i;t.loop===!0?i="e_loop":(typeof t.loop=="string"||typeof t.loop=="number")&&(i=`e_loop:${t.loop}`),i&&n.effect(i)}return t!==!1&&(r.format="auto:animated"),{options:r}}},no=_n.merge(p.object({...vn,...bn,...wn,...xn,...Sn,...An,...Cn,...En,...jn,...Rn})),In={streamingProfile:p.string().describe(JSON.stringify({text:"The streaming profile to apply when delivering a video using adaptive bitrate streaming.",url:"https://cloudinary.com/documentation/transformation_reference#sp_streaming_profile"})).optional()},io={props:In,assetTypes:["video","videos"],plugin:n=>{const{cldAsset:e,options:t}=n,{streamingProfile:r}=t;return typeof r=="string"&&e.addTransformation(`sp_${r}`),{}}},so=_n.merge(p.object({...In})),ao=p.any(),oo=p.any(),Pr=[Ja,Wa,Ya,La,Xa,eo,Qa,to,Ea,Da,Ba,io,Va,ja,Ha,Ra,Pa,Ua,Ia,Za,Fa,qa,ro],co=p.union([no,so]).describe(JSON.stringify({text:"Asset options (Image or Video) that define delivery URL including public ID and transformations.",path:"/url-loader/assetoptions"}));p.object({analytics:p.union([ao,p.boolean()]).describe(JSON.stringify({text:"Tech, dependency, and feature identifiers for tracking SDK usage related to Cloudinary.",path:"/url-loader/analyticsoptions"})).optional(),config:oo.describe(JSON.stringify({text:"Configuration parameters for environment and Cloudinary account.",url:"https://cloudinary.com/documentation/cloudinary_sdks#configuration_parameters",path:"/url-loader/analyticsoptions"})).optional(),options:co});function lo({options:n,config:e={},analytics:t}){t===!1&&(typeof e?.url>"u"&&(e.url={}),e.url.analytics=!1);const r=new pa(e);if(typeof n?.src!="string")throw Error("Failed to construct Cloudinary URL: Missing source (src) in options.");n?.assetType||(n.assetType="image");const s=[];Pr.forEach(({props:d})=>{Object.keys(d).forEach(v=>{if(s.includes(v))throw new Error(`Option ${v} already exists!`);s.push(v)})});const i={};let o;if(typeof n.src=="string"&&/^https?:\/\//.test(n.src))try{const d=Lr(n.src);o=d?.publicId,i.seoSuffix=d?.seoSuffix,i.version=d?.version}catch{}o||(o=n.src),Object.keys(i).forEach(d=>{Be(n,d)||(n[d]=i[d])}),n.version??(n.version=1);let a;if(["image","images"].includes(n.assetType)?a=r.image(o):["video","videos"].includes(n.assetType)&&(a=r.video(o)),typeof a>"u")throw new Error("Invalid asset type.");const u={};if(Pr.forEach(({plugin:d,assetTypes:m,props:v,strict:x})=>{const h=n?.assetType!==void 0&&m.includes(n.assetType),b=Object.keys(v),f=Object.keys(n),_=b.map(T=>f.includes(T)).filter(T=>!!T).length>0;if(!h){_&&console.warn(`One of the following props [${b.join(", ")}] was used with an unsupported asset type [${n?.assetType}]`);return}if(n.strictTransformations&&!x){_&&console.warn(`One of the following props [${b.join(", ")}] was used that is not supported with Strict Transformations.`);return}const g=d({cldAsset:a,options:n}),{options:k}=g||{options:void 0};Object.assign(u,k)}),typeof u.resize=="string"&&a.addTransformation(u.resize),a.setDeliveryType(n?.deliveryType||"upload"),!n.strictTransformations){if(n?.dpr){let f=n.dpr;typeof f=="number"&&(f=f.toFixed(1)),a.addTransformation(`dpr_${f}`)}const d=n?.format==="default",m=Dr("f_",a,{matchType:"startsWith"}),v=m&&typeof n?.format<"u";(u?.format||!d&&(!m||v))&&a.format(n?.format||u?.format||"auto");const x=n?.quality==="default",h=Dr("q_",a,{matchType:"startsWith"}),b=h&&typeof n?.quality<"u";!x&&(!h||b)&&a.quality(n?.quality||"auto")}return a.toURL({trackedAnalytics:t})}function Dr(n,e,t){if(typeof e.transformation>"u")return;const{matchType:r="includes"}=t||{};return e.transformation.actions.flatMap(o=>o.toString().split("/").flatMap(a=>a.split(","))).filter(o=>r==="startsWith"?o.startsWith(n):o.includes(n)).length>0}function uo(n){return Object.assign({cloud:{...n?.cloud,apiKey:void 0,cloudName:"dcf2oc3gk"},url:{...n?.url,secureDistribution:void 0,privateCdn:void 0}},n)}function fo(n){return Object.assign({product:ai,sdkCode:oi,sdkSemver:li,techVersion:ci,feature:""},n)}function go(n,e,t){return lo({options:n,config:uo(e),analytics:fo(t)})}var Le=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ho(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function Ut(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Nn={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(n,e){(function(t){n.exports=t()})(function(){return function t(r,s,i){function o(d,m){if(!s[d]){if(!r[d]){var v=typeof Ut=="function"&&Ut;if(!m&&v)return v(d,!0);if(a)return a(d,!0);var x=new Error("Cannot find module '"+d+"'");throw x.code="MODULE_NOT_FOUND",x}var h=s[d]={exports:{}};r[d][0].call(h.exports,function(b){var f=r[d][1][b];return o(f||b)},h,h.exports,t,r,s,i)}return s[d].exports}for(var a=typeof Ut=="function"&&Ut,u=0;u<i.length;u++)o(i[u]);return o}({1:[function(t,r,s){var i=t("./utils"),o=t("./support"),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";s.encode=function(u){for(var d,m,v,x,h,b,f,_=[],g=0,k=u.length,T=k,A=i.getTypeOf(u)!=="string";g<u.length;)T=k-g,v=A?(d=u[g++],m=g<k?u[g++]:0,g<k?u[g++]:0):(d=u.charCodeAt(g++),m=g<k?u.charCodeAt(g++):0,g<k?u.charCodeAt(g++):0),x=d>>2,h=(3&d)<<4|m>>4,b=1<T?(15&m)<<2|v>>6:64,f=2<T?63&v:64,_.push(a.charAt(x)+a.charAt(h)+a.charAt(b)+a.charAt(f));return _.join("")},s.decode=function(u){var d,m,v,x,h,b,f=0,_=0,g="data:";if(u.substr(0,g.length)===g)throw new Error("Invalid base64 input, it looks like a data url.");var k,T=3*(u=u.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(u.charAt(u.length-1)===a.charAt(64)&&T--,u.charAt(u.length-2)===a.charAt(64)&&T--,T%1!=0)throw new Error("Invalid base64 input, bad content length.");for(k=o.uint8array?new Uint8Array(0|T):new Array(0|T);f<u.length;)d=a.indexOf(u.charAt(f++))<<2|(x=a.indexOf(u.charAt(f++)))>>4,m=(15&x)<<4|(h=a.indexOf(u.charAt(f++)))>>2,v=(3&h)<<6|(b=a.indexOf(u.charAt(f++))),k[_++]=d,h!==64&&(k[_++]=m),b!==64&&(k[_++]=v);return k}},{"./support":30,"./utils":32}],2:[function(t,r,s){var i=t("./external"),o=t("./stream/DataWorker"),a=t("./stream/Crc32Probe"),u=t("./stream/DataLengthProbe");function d(m,v,x,h,b){this.compressedSize=m,this.uncompressedSize=v,this.crc32=x,this.compression=h,this.compressedContent=b}d.prototype={getContentWorker:function(){var m=new o(i.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new u("data_length")),v=this;return m.on("end",function(){if(this.streamInfo.data_length!==v.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),m},getCompressedWorker:function(){return new o(i.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},d.createWorkerFrom=function(m,v,x){return m.pipe(new a).pipe(new u("uncompressedSize")).pipe(v.compressWorker(x)).pipe(new u("compressedSize")).withStreamInfo("compression",v)},r.exports=d},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(t,r,s){var i=t("./stream/GenericWorker");s.STORE={magic:"\0\0",compressWorker:function(){return new i("STORE compression")},uncompressWorker:function(){return new i("STORE decompression")}},s.DEFLATE=t("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(t,r,s){var i=t("./utils"),o=function(){for(var a,u=[],d=0;d<256;d++){a=d;for(var m=0;m<8;m++)a=1&a?3988292384^a>>>1:a>>>1;u[d]=a}return u}();r.exports=function(a,u){return a!==void 0&&a.length?i.getTypeOf(a)!=="string"?function(d,m,v,x){var h=o,b=x+v;d^=-1;for(var f=x;f<b;f++)d=d>>>8^h[255&(d^m[f])];return-1^d}(0|u,a,a.length,0):function(d,m,v,x){var h=o,b=x+v;d^=-1;for(var f=x;f<b;f++)d=d>>>8^h[255&(d^m.charCodeAt(f))];return-1^d}(0|u,a,a.length,0):0}},{"./utils":32}],5:[function(t,r,s){s.base64=!1,s.binary=!1,s.dir=!1,s.createFolders=!0,s.date=null,s.compression=null,s.compressionOptions=null,s.comment=null,s.unixPermissions=null,s.dosPermissions=null},{}],6:[function(t,r,s){var i=null;i=typeof Promise<"u"?Promise:t("lie"),r.exports={Promise:i}},{lie:37}],7:[function(t,r,s){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",o=t("pako"),a=t("./utils"),u=t("./stream/GenericWorker"),d=i?"uint8array":"array";function m(v,x){u.call(this,"FlateWorker/"+v),this._pako=null,this._pakoAction=v,this._pakoOptions=x,this.meta={}}s.magic="\b\0",a.inherits(m,u),m.prototype.processChunk=function(v){this.meta=v.meta,this._pako===null&&this._createPako(),this._pako.push(a.transformTo(d,v.data),!1)},m.prototype.flush=function(){u.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},m.prototype.cleanUp=function(){u.prototype.cleanUp.call(this),this._pako=null},m.prototype._createPako=function(){this._pako=new o[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var v=this;this._pako.onData=function(x){v.push({data:x,meta:v.meta})}},s.compressWorker=function(v){return new m("Deflate",v)},s.uncompressWorker=function(){return new m("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(t,r,s){function i(h,b){var f,_="";for(f=0;f<b;f++)_+=String.fromCharCode(255&h),h>>>=8;return _}function o(h,b,f,_,g,k){var T,A,O=h.file,B=h.compression,P=k!==d.utf8encode,q=a.transformTo("string",k(O.name)),j=a.transformTo("string",d.utf8encode(O.name)),U=O.comment,Q=a.transformTo("string",k(U)),S=a.transformTo("string",d.utf8encode(U)),z=j.length!==O.name.length,l=S.length!==U.length,D="",oe="",$="",le=O.dir,V=O.date,ne={crc32:0,compressedSize:0,uncompressedSize:0};b&&!f||(ne.crc32=h.crc32,ne.compressedSize=h.compressedSize,ne.uncompressedSize=h.uncompressedSize);var I=0;b&&(I|=8),P||!z&&!l||(I|=2048);var R=0,ie=0;le&&(R|=16),g==="UNIX"?(ie=798,R|=function(H,ye){var we=H;return H||(we=ye?16893:33204),(65535&we)<<16}(O.unixPermissions,le)):(ie=20,R|=function(H){return 63&(H||0)}(O.dosPermissions)),T=V.getUTCHours(),T<<=6,T|=V.getUTCMinutes(),T<<=5,T|=V.getUTCSeconds()/2,A=V.getUTCFullYear()-1980,A<<=4,A|=V.getUTCMonth()+1,A<<=5,A|=V.getUTCDate(),z&&(oe=i(1,1)+i(m(q),4)+j,D+="up"+i(oe.length,2)+oe),l&&($=i(1,1)+i(m(Q),4)+S,D+="uc"+i($.length,2)+$);var K="";return K+=`
\0`,K+=i(I,2),K+=B.magic,K+=i(T,2),K+=i(A,2),K+=i(ne.crc32,4),K+=i(ne.compressedSize,4),K+=i(ne.uncompressedSize,4),K+=i(q.length,2),K+=i(D.length,2),{fileRecord:v.LOCAL_FILE_HEADER+K+q+D,dirRecord:v.CENTRAL_FILE_HEADER+i(ie,2)+K+i(Q.length,2)+"\0\0\0\0"+i(R,4)+i(_,4)+q+D+Q}}var a=t("../utils"),u=t("../stream/GenericWorker"),d=t("../utf8"),m=t("../crc32"),v=t("../signature");function x(h,b,f,_){u.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=b,this.zipPlatform=f,this.encodeFileName=_,this.streamFiles=h,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}a.inherits(x,u),x.prototype.push=function(h){var b=h.meta.percent||0,f=this.entriesCount,_=this._sources.length;this.accumulate?this.contentBuffer.push(h):(this.bytesWritten+=h.data.length,u.prototype.push.call(this,{data:h.data,meta:{currentFile:this.currentFile,percent:f?(b+100*(f-_-1))/f:100}}))},x.prototype.openedSource=function(h){this.currentSourceOffset=this.bytesWritten,this.currentFile=h.file.name;var b=this.streamFiles&&!h.file.dir;if(b){var f=o(h,b,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:f.fileRecord,meta:{percent:0}})}else this.accumulate=!0},x.prototype.closedSource=function(h){this.accumulate=!1;var b=this.streamFiles&&!h.file.dir,f=o(h,b,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(f.dirRecord),b)this.push({data:function(_){return v.DATA_DESCRIPTOR+i(_.crc32,4)+i(_.compressedSize,4)+i(_.uncompressedSize,4)}(h),meta:{percent:100}});else for(this.push({data:f.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},x.prototype.flush=function(){for(var h=this.bytesWritten,b=0;b<this.dirRecords.length;b++)this.push({data:this.dirRecords[b],meta:{percent:100}});var f=this.bytesWritten-h,_=function(g,k,T,A,O){var B=a.transformTo("string",O(A));return v.CENTRAL_DIRECTORY_END+"\0\0\0\0"+i(g,2)+i(g,2)+i(k,4)+i(T,4)+i(B.length,2)+B}(this.dirRecords.length,f,h,this.zipComment,this.encodeFileName);this.push({data:_,meta:{percent:100}})},x.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},x.prototype.registerPrevious=function(h){this._sources.push(h);var b=this;return h.on("data",function(f){b.processChunk(f)}),h.on("end",function(){b.closedSource(b.previous.streamInfo),b._sources.length?b.prepareNextSource():b.end()}),h.on("error",function(f){b.error(f)}),this},x.prototype.resume=function(){return!!u.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},x.prototype.error=function(h){var b=this._sources;if(!u.prototype.error.call(this,h))return!1;for(var f=0;f<b.length;f++)try{b[f].error(h)}catch{}return!0},x.prototype.lock=function(){u.prototype.lock.call(this);for(var h=this._sources,b=0;b<h.length;b++)h[b].lock()},r.exports=x},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(t,r,s){var i=t("../compressions"),o=t("./ZipFileWorker");s.generateWorker=function(a,u,d){var m=new o(u.streamFiles,d,u.platform,u.encodeFileName),v=0;try{a.forEach(function(x,h){v++;var b=function(k,T){var A=k||T,O=i[A];if(!O)throw new Error(A+" is not a valid compression method !");return O}(h.options.compression,u.compression),f=h.options.compressionOptions||u.compressionOptions||{},_=h.dir,g=h.date;h._compressWorker(b,f).withStreamInfo("file",{name:x,dir:_,date:g,comment:h.comment||"",unixPermissions:h.unixPermissions,dosPermissions:h.dosPermissions}).pipe(m)}),m.entriesCount=v}catch(x){m.error(x)}return m}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(t,r,s){function i(){if(!(this instanceof i))return new i;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var o=new i;for(var a in this)typeof this[a]!="function"&&(o[a]=this[a]);return o}}(i.prototype=t("./object")).loadAsync=t("./load"),i.support=t("./support"),i.defaults=t("./defaults"),i.version="3.10.1",i.loadAsync=function(o,a){return new i().loadAsync(o,a)},i.external=t("./external"),r.exports=i},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(t,r,s){var i=t("./utils"),o=t("./external"),a=t("./utf8"),u=t("./zipEntries"),d=t("./stream/Crc32Probe"),m=t("./nodejsUtils");function v(x){return new o.Promise(function(h,b){var f=x.decompressed.getContentWorker().pipe(new d);f.on("error",function(_){b(_)}).on("end",function(){f.streamInfo.crc32!==x.decompressed.crc32?b(new Error("Corrupted zip : CRC32 mismatch")):h()}).resume()})}r.exports=function(x,h){var b=this;return h=i.extend(h||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:a.utf8decode}),m.isNode&&m.isStream(x)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):i.prepareContent("the loaded zip file",x,!0,h.optimizedBinaryString,h.base64).then(function(f){var _=new u(h);return _.load(f),_}).then(function(f){var _=[o.Promise.resolve(f)],g=f.files;if(h.checkCRC32)for(var k=0;k<g.length;k++)_.push(v(g[k]));return o.Promise.all(_)}).then(function(f){for(var _=f.shift(),g=_.files,k=0;k<g.length;k++){var T=g[k],A=T.fileNameStr,O=i.resolve(T.fileNameStr);b.file(O,T.decompressed,{binary:!0,optimizedBinaryString:!0,date:T.date,dir:T.dir,comment:T.fileCommentStr.length?T.fileCommentStr:null,unixPermissions:T.unixPermissions,dosPermissions:T.dosPermissions,createFolders:h.createFolders}),T.dir||(b.file(O).unsafeOriginalName=A)}return _.zipComment.length&&(b.comment=_.zipComment),b})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(t,r,s){var i=t("../utils"),o=t("../stream/GenericWorker");function a(u,d){o.call(this,"Nodejs stream input adapter for "+u),this._upstreamEnded=!1,this._bindStream(d)}i.inherits(a,o),a.prototype._bindStream=function(u){var d=this;(this._stream=u).pause(),u.on("data",function(m){d.push({data:m,meta:{percent:0}})}).on("error",function(m){d.isPaused?this.generatedError=m:d.error(m)}).on("end",function(){d.isPaused?d._upstreamEnded=!0:d.end()})},a.prototype.pause=function(){return!!o.prototype.pause.call(this)&&(this._stream.pause(),!0)},a.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},r.exports=a},{"../stream/GenericWorker":28,"../utils":32}],13:[function(t,r,s){var i=t("readable-stream").Readable;function o(a,u,d){i.call(this,u),this._helper=a;var m=this;a.on("data",function(v,x){m.push(v)||m._helper.pause(),d&&d(x)}).on("error",function(v){m.emit("error",v)}).on("end",function(){m.push(null)})}t("../utils").inherits(o,i),o.prototype._read=function(){this._helper.resume()},r.exports=o},{"../utils":32,"readable-stream":16}],14:[function(t,r,s){r.exports={isNode:typeof Buffer<"u",newBufferFrom:function(i,o){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(i,o);if(typeof i=="number")throw new Error('The "data" argument must not be a number');return new Buffer(i,o)},allocBuffer:function(i){if(Buffer.alloc)return Buffer.alloc(i);var o=new Buffer(i);return o.fill(0),o},isBuffer:function(i){return Buffer.isBuffer(i)},isStream:function(i){return i&&typeof i.on=="function"&&typeof i.pause=="function"&&typeof i.resume=="function"}}},{}],15:[function(t,r,s){function i(O,B,P){var q,j=a.getTypeOf(B),U=a.extend(P||{},m);U.date=U.date||new Date,U.compression!==null&&(U.compression=U.compression.toUpperCase()),typeof U.unixPermissions=="string"&&(U.unixPermissions=parseInt(U.unixPermissions,8)),U.unixPermissions&&16384&U.unixPermissions&&(U.dir=!0),U.dosPermissions&&16&U.dosPermissions&&(U.dir=!0),U.dir&&(O=g(O)),U.createFolders&&(q=_(O))&&k.call(this,q,!0);var Q=j==="string"&&U.binary===!1&&U.base64===!1;P&&P.binary!==void 0||(U.binary=!Q),(B instanceof v&&B.uncompressedSize===0||U.dir||!B||B.length===0)&&(U.base64=!1,U.binary=!0,B="",U.compression="STORE",j="string");var S=null;S=B instanceof v||B instanceof u?B:b.isNode&&b.isStream(B)?new f(O,B):a.prepareContent(O,B,U.binary,U.optimizedBinaryString,U.base64);var z=new x(O,S,U);this.files[O]=z}var o=t("./utf8"),a=t("./utils"),u=t("./stream/GenericWorker"),d=t("./stream/StreamHelper"),m=t("./defaults"),v=t("./compressedObject"),x=t("./zipObject"),h=t("./generate"),b=t("./nodejsUtils"),f=t("./nodejs/NodejsStreamInputAdapter"),_=function(O){O.slice(-1)==="/"&&(O=O.substring(0,O.length-1));var B=O.lastIndexOf("/");return 0<B?O.substring(0,B):""},g=function(O){return O.slice(-1)!=="/"&&(O+="/"),O},k=function(O,B){return B=B!==void 0?B:m.createFolders,O=g(O),this.files[O]||i.call(this,O,null,{dir:!0,createFolders:B}),this.files[O]};function T(O){return Object.prototype.toString.call(O)==="[object RegExp]"}var A={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(O){var B,P,q;for(B in this.files)q=this.files[B],(P=B.slice(this.root.length,B.length))&&B.slice(0,this.root.length)===this.root&&O(P,q)},filter:function(O){var B=[];return this.forEach(function(P,q){O(P,q)&&B.push(q)}),B},file:function(O,B,P){if(arguments.length!==1)return O=this.root+O,i.call(this,O,B,P),this;if(T(O)){var q=O;return this.filter(function(U,Q){return!Q.dir&&q.test(U)})}var j=this.files[this.root+O];return j&&!j.dir?j:null},folder:function(O){if(!O)return this;if(T(O))return this.filter(function(j,U){return U.dir&&O.test(j)});var B=this.root+O,P=k.call(this,B),q=this.clone();return q.root=P.name,q},remove:function(O){O=this.root+O;var B=this.files[O];if(B||(O.slice(-1)!=="/"&&(O+="/"),B=this.files[O]),B&&!B.dir)delete this.files[O];else for(var P=this.filter(function(j,U){return U.name.slice(0,O.length)===O}),q=0;q<P.length;q++)delete this.files[P[q].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(O){var B,P={};try{if((P=a.extend(O||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:o.utf8encode})).type=P.type.toLowerCase(),P.compression=P.compression.toUpperCase(),P.type==="binarystring"&&(P.type="string"),!P.type)throw new Error("No output type specified.");a.checkSupport(P.type),P.platform!=="darwin"&&P.platform!=="freebsd"&&P.platform!=="linux"&&P.platform!=="sunos"||(P.platform="UNIX"),P.platform==="win32"&&(P.platform="DOS");var q=P.comment||this.comment||"";B=h.generateWorker(this,P,q)}catch(j){(B=new u("error")).error(j)}return new d(B,P.type||"string",P.mimeType)},generateAsync:function(O,B){return this.generateInternalStream(O).accumulate(B)},generateNodeStream:function(O,B){return(O=O||{}).type||(O.type="nodebuffer"),this.generateInternalStream(O).toNodejsStream(B)}};r.exports=A},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(t,r,s){r.exports=t("stream")},{stream:void 0}],17:[function(t,r,s){var i=t("./DataReader");function o(a){i.call(this,a);for(var u=0;u<this.data.length;u++)a[u]=255&a[u]}t("../utils").inherits(o,i),o.prototype.byteAt=function(a){return this.data[this.zero+a]},o.prototype.lastIndexOfSignature=function(a){for(var u=a.charCodeAt(0),d=a.charCodeAt(1),m=a.charCodeAt(2),v=a.charCodeAt(3),x=this.length-4;0<=x;--x)if(this.data[x]===u&&this.data[x+1]===d&&this.data[x+2]===m&&this.data[x+3]===v)return x-this.zero;return-1},o.prototype.readAndCheckSignature=function(a){var u=a.charCodeAt(0),d=a.charCodeAt(1),m=a.charCodeAt(2),v=a.charCodeAt(3),x=this.readData(4);return u===x[0]&&d===x[1]&&m===x[2]&&v===x[3]},o.prototype.readData=function(a){if(this.checkOffset(a),a===0)return[];var u=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,u},r.exports=o},{"../utils":32,"./DataReader":18}],18:[function(t,r,s){var i=t("../utils");function o(a){this.data=a,this.length=a.length,this.index=0,this.zero=0}o.prototype={checkOffset:function(a){this.checkIndex(this.index+a)},checkIndex:function(a){if(this.length<this.zero+a||a<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+a+"). Corrupted zip ?")},setIndex:function(a){this.checkIndex(a),this.index=a},skip:function(a){this.setIndex(this.index+a)},byteAt:function(){},readInt:function(a){var u,d=0;for(this.checkOffset(a),u=this.index+a-1;u>=this.index;u--)d=(d<<8)+this.byteAt(u);return this.index+=a,d},readString:function(a){return i.transformTo("string",this.readData(a))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var a=this.readInt(4);return new Date(Date.UTC(1980+(a>>25&127),(a>>21&15)-1,a>>16&31,a>>11&31,a>>5&63,(31&a)<<1))}},r.exports=o},{"../utils":32}],19:[function(t,r,s){var i=t("./Uint8ArrayReader");function o(a){i.call(this,a)}t("../utils").inherits(o,i),o.prototype.readData=function(a){this.checkOffset(a);var u=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,u},r.exports=o},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(t,r,s){var i=t("./DataReader");function o(a){i.call(this,a)}t("../utils").inherits(o,i),o.prototype.byteAt=function(a){return this.data.charCodeAt(this.zero+a)},o.prototype.lastIndexOfSignature=function(a){return this.data.lastIndexOf(a)-this.zero},o.prototype.readAndCheckSignature=function(a){return a===this.readData(4)},o.prototype.readData=function(a){this.checkOffset(a);var u=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,u},r.exports=o},{"../utils":32,"./DataReader":18}],21:[function(t,r,s){var i=t("./ArrayReader");function o(a){i.call(this,a)}t("../utils").inherits(o,i),o.prototype.readData=function(a){if(this.checkOffset(a),a===0)return new Uint8Array(0);var u=this.data.subarray(this.zero+this.index,this.zero+this.index+a);return this.index+=a,u},r.exports=o},{"../utils":32,"./ArrayReader":17}],22:[function(t,r,s){var i=t("../utils"),o=t("../support"),a=t("./ArrayReader"),u=t("./StringReader"),d=t("./NodeBufferReader"),m=t("./Uint8ArrayReader");r.exports=function(v){var x=i.getTypeOf(v);return i.checkSupport(x),x!=="string"||o.uint8array?x==="nodebuffer"?new d(v):o.uint8array?new m(i.transformTo("uint8array",v)):new a(i.transformTo("array",v)):new u(v)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(t,r,s){s.LOCAL_FILE_HEADER="PK",s.CENTRAL_FILE_HEADER="PK",s.CENTRAL_DIRECTORY_END="PK",s.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",s.ZIP64_CENTRAL_DIRECTORY_END="PK",s.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(t,r,s){var i=t("./GenericWorker"),o=t("../utils");function a(u){i.call(this,"ConvertWorker to "+u),this.destType=u}o.inherits(a,i),a.prototype.processChunk=function(u){this.push({data:o.transformTo(this.destType,u.data),meta:u.meta})},r.exports=a},{"../utils":32,"./GenericWorker":28}],25:[function(t,r,s){var i=t("./GenericWorker"),o=t("../crc32");function a(){i.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}t("../utils").inherits(a,i),a.prototype.processChunk=function(u){this.streamInfo.crc32=o(u.data,this.streamInfo.crc32||0),this.push(u)},r.exports=a},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(t,r,s){var i=t("../utils"),o=t("./GenericWorker");function a(u){o.call(this,"DataLengthProbe for "+u),this.propName=u,this.withStreamInfo(u,0)}i.inherits(a,o),a.prototype.processChunk=function(u){if(u){var d=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=d+u.data.length}o.prototype.processChunk.call(this,u)},r.exports=a},{"../utils":32,"./GenericWorker":28}],27:[function(t,r,s){var i=t("../utils"),o=t("./GenericWorker");function a(u){o.call(this,"DataWorker");var d=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,u.then(function(m){d.dataIsReady=!0,d.data=m,d.max=m&&m.length||0,d.type=i.getTypeOf(m),d.isPaused||d._tickAndRepeat()},function(m){d.error(m)})}i.inherits(a,o),a.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},a.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,i.delay(this._tickAndRepeat,[],this)),!0)},a.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(i.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},a.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var u=null,d=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":u=this.data.substring(this.index,d);break;case"uint8array":u=this.data.subarray(this.index,d);break;case"array":case"nodebuffer":u=this.data.slice(this.index,d)}return this.index=d,this.push({data:u,meta:{percent:this.max?this.index/this.max*100:0}})},r.exports=a},{"../utils":32,"./GenericWorker":28}],28:[function(t,r,s){function i(o){this.name=o||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}i.prototype={push:function(o){this.emit("data",o)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(o){this.emit("error",o)}return!0},error:function(o){return!this.isFinished&&(this.isPaused?this.generatedError=o:(this.isFinished=!0,this.emit("error",o),this.previous&&this.previous.error(o),this.cleanUp()),!0)},on:function(o,a){return this._listeners[o].push(a),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(o,a){if(this._listeners[o])for(var u=0;u<this._listeners[o].length;u++)this._listeners[o][u].call(this,a)},pipe:function(o){return o.registerPrevious(this)},registerPrevious:function(o){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=o.streamInfo,this.mergeStreamInfo(),this.previous=o;var a=this;return o.on("data",function(u){a.processChunk(u)}),o.on("end",function(){a.end()}),o.on("error",function(u){a.error(u)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var o=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),o=!0),this.previous&&this.previous.resume(),!o},flush:function(){},processChunk:function(o){this.push(o)},withStreamInfo:function(o,a){return this.extraStreamInfo[o]=a,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var o in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,o)&&(this.streamInfo[o]=this.extraStreamInfo[o])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var o="Worker "+this.name;return this.previous?this.previous+" -> "+o:o}},r.exports=i},{}],29:[function(t,r,s){var i=t("../utils"),o=t("./ConvertWorker"),a=t("./GenericWorker"),u=t("../base64"),d=t("../support"),m=t("../external"),v=null;if(d.nodestream)try{v=t("../nodejs/NodejsStreamOutputAdapter")}catch{}function x(b,f){return new m.Promise(function(_,g){var k=[],T=b._internalType,A=b._outputType,O=b._mimeType;b.on("data",function(B,P){k.push(B),f&&f(P)}).on("error",function(B){k=[],g(B)}).on("end",function(){try{var B=function(P,q,j){switch(P){case"blob":return i.newBlob(i.transformTo("arraybuffer",q),j);case"base64":return u.encode(q);default:return i.transformTo(P,q)}}(A,function(P,q){var j,U=0,Q=null,S=0;for(j=0;j<q.length;j++)S+=q[j].length;switch(P){case"string":return q.join("");case"array":return Array.prototype.concat.apply([],q);case"uint8array":for(Q=new Uint8Array(S),j=0;j<q.length;j++)Q.set(q[j],U),U+=q[j].length;return Q;case"nodebuffer":return Buffer.concat(q);default:throw new Error("concat : unsupported type '"+P+"'")}}(T,k),O);_(B)}catch(P){g(P)}k=[]}).resume()})}function h(b,f,_){var g=f;switch(f){case"blob":case"arraybuffer":g="uint8array";break;case"base64":g="string"}try{this._internalType=g,this._outputType=f,this._mimeType=_,i.checkSupport(g),this._worker=b.pipe(new o(g)),b.lock()}catch(k){this._worker=new a("error"),this._worker.error(k)}}h.prototype={accumulate:function(b){return x(this,b)},on:function(b,f){var _=this;return b==="data"?this._worker.on(b,function(g){f.call(_,g.data,g.meta)}):this._worker.on(b,function(){i.delay(f,arguments,_)}),this},resume:function(){return i.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(b){if(i.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new v(this,{objectMode:this._outputType!=="nodebuffer"},b)}},r.exports=h},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(t,r,s){if(s.base64=!0,s.array=!0,s.string=!0,s.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",s.nodebuffer=typeof Buffer<"u",s.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")s.blob=!1;else{var i=new ArrayBuffer(0);try{s.blob=new Blob([i],{type:"application/zip"}).size===0}catch{try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);o.append(i),s.blob=o.getBlob("application/zip").size===0}catch{s.blob=!1}}}try{s.nodestream=!!t("readable-stream").Readable}catch{s.nodestream=!1}},{"readable-stream":16}],31:[function(t,r,s){for(var i=t("./utils"),o=t("./support"),a=t("./nodejsUtils"),u=t("./stream/GenericWorker"),d=new Array(256),m=0;m<256;m++)d[m]=252<=m?6:248<=m?5:240<=m?4:224<=m?3:192<=m?2:1;d[254]=d[254]=1;function v(){u.call(this,"utf-8 decode"),this.leftOver=null}function x(){u.call(this,"utf-8 encode")}s.utf8encode=function(h){return o.nodebuffer?a.newBufferFrom(h,"utf-8"):function(b){var f,_,g,k,T,A=b.length,O=0;for(k=0;k<A;k++)(64512&(_=b.charCodeAt(k)))==55296&&k+1<A&&(64512&(g=b.charCodeAt(k+1)))==56320&&(_=65536+(_-55296<<10)+(g-56320),k++),O+=_<128?1:_<2048?2:_<65536?3:4;for(f=o.uint8array?new Uint8Array(O):new Array(O),k=T=0;T<O;k++)(64512&(_=b.charCodeAt(k)))==55296&&k+1<A&&(64512&(g=b.charCodeAt(k+1)))==56320&&(_=65536+(_-55296<<10)+(g-56320),k++),_<128?f[T++]=_:(_<2048?f[T++]=192|_>>>6:(_<65536?f[T++]=224|_>>>12:(f[T++]=240|_>>>18,f[T++]=128|_>>>12&63),f[T++]=128|_>>>6&63),f[T++]=128|63&_);return f}(h)},s.utf8decode=function(h){return o.nodebuffer?i.transformTo("nodebuffer",h).toString("utf-8"):function(b){var f,_,g,k,T=b.length,A=new Array(2*T);for(f=_=0;f<T;)if((g=b[f++])<128)A[_++]=g;else if(4<(k=d[g]))A[_++]=65533,f+=k-1;else{for(g&=k===2?31:k===3?15:7;1<k&&f<T;)g=g<<6|63&b[f++],k--;1<k?A[_++]=65533:g<65536?A[_++]=g:(g-=65536,A[_++]=55296|g>>10&1023,A[_++]=56320|1023&g)}return A.length!==_&&(A.subarray?A=A.subarray(0,_):A.length=_),i.applyFromCharCode(A)}(h=i.transformTo(o.uint8array?"uint8array":"array",h))},i.inherits(v,u),v.prototype.processChunk=function(h){var b=i.transformTo(o.uint8array?"uint8array":"array",h.data);if(this.leftOver&&this.leftOver.length){if(o.uint8array){var f=b;(b=new Uint8Array(f.length+this.leftOver.length)).set(this.leftOver,0),b.set(f,this.leftOver.length)}else b=this.leftOver.concat(b);this.leftOver=null}var _=function(k,T){var A;for((T=T||k.length)>k.length&&(T=k.length),A=T-1;0<=A&&(192&k[A])==128;)A--;return A<0||A===0?T:A+d[k[A]]>T?A:T}(b),g=b;_!==b.length&&(o.uint8array?(g=b.subarray(0,_),this.leftOver=b.subarray(_,b.length)):(g=b.slice(0,_),this.leftOver=b.slice(_,b.length))),this.push({data:s.utf8decode(g),meta:h.meta})},v.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:s.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},s.Utf8DecodeWorker=v,i.inherits(x,u),x.prototype.processChunk=function(h){this.push({data:s.utf8encode(h.data),meta:h.meta})},s.Utf8EncodeWorker=x},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(t,r,s){var i=t("./support"),o=t("./base64"),a=t("./nodejsUtils"),u=t("./external");function d(f){return f}function m(f,_){for(var g=0;g<f.length;++g)_[g]=255&f.charCodeAt(g);return _}t("setimmediate"),s.newBlob=function(f,_){s.checkSupport("blob");try{return new Blob([f],{type:_})}catch{try{var g=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return g.append(f),g.getBlob(_)}catch{throw new Error("Bug : can't construct the Blob.")}}};var v={stringifyByChunk:function(f,_,g){var k=[],T=0,A=f.length;if(A<=g)return String.fromCharCode.apply(null,f);for(;T<A;)_==="array"||_==="nodebuffer"?k.push(String.fromCharCode.apply(null,f.slice(T,Math.min(T+g,A)))):k.push(String.fromCharCode.apply(null,f.subarray(T,Math.min(T+g,A)))),T+=g;return k.join("")},stringifyByChar:function(f){for(var _="",g=0;g<f.length;g++)_+=String.fromCharCode(f[g]);return _},applyCanBeUsed:{uint8array:function(){try{return i.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return i.nodebuffer&&String.fromCharCode.apply(null,a.allocBuffer(1)).length===1}catch{return!1}}()}};function x(f){var _=65536,g=s.getTypeOf(f),k=!0;if(g==="uint8array"?k=v.applyCanBeUsed.uint8array:g==="nodebuffer"&&(k=v.applyCanBeUsed.nodebuffer),k)for(;1<_;)try{return v.stringifyByChunk(f,g,_)}catch{_=Math.floor(_/2)}return v.stringifyByChar(f)}function h(f,_){for(var g=0;g<f.length;g++)_[g]=f[g];return _}s.applyFromCharCode=x;var b={};b.string={string:d,array:function(f){return m(f,new Array(f.length))},arraybuffer:function(f){return b.string.uint8array(f).buffer},uint8array:function(f){return m(f,new Uint8Array(f.length))},nodebuffer:function(f){return m(f,a.allocBuffer(f.length))}},b.array={string:x,array:d,arraybuffer:function(f){return new Uint8Array(f).buffer},uint8array:function(f){return new Uint8Array(f)},nodebuffer:function(f){return a.newBufferFrom(f)}},b.arraybuffer={string:function(f){return x(new Uint8Array(f))},array:function(f){return h(new Uint8Array(f),new Array(f.byteLength))},arraybuffer:d,uint8array:function(f){return new Uint8Array(f)},nodebuffer:function(f){return a.newBufferFrom(new Uint8Array(f))}},b.uint8array={string:x,array:function(f){return h(f,new Array(f.length))},arraybuffer:function(f){return f.buffer},uint8array:d,nodebuffer:function(f){return a.newBufferFrom(f)}},b.nodebuffer={string:x,array:function(f){return h(f,new Array(f.length))},arraybuffer:function(f){return b.nodebuffer.uint8array(f).buffer},uint8array:function(f){return h(f,new Uint8Array(f.length))},nodebuffer:d},s.transformTo=function(f,_){if(_=_||"",!f)return _;s.checkSupport(f);var g=s.getTypeOf(_);return b[g][f](_)},s.resolve=function(f){for(var _=f.split("/"),g=[],k=0;k<_.length;k++){var T=_[k];T==="."||T===""&&k!==0&&k!==_.length-1||(T===".."?g.pop():g.push(T))}return g.join("/")},s.getTypeOf=function(f){return typeof f=="string"?"string":Object.prototype.toString.call(f)==="[object Array]"?"array":i.nodebuffer&&a.isBuffer(f)?"nodebuffer":i.uint8array&&f instanceof Uint8Array?"uint8array":i.arraybuffer&&f instanceof ArrayBuffer?"arraybuffer":void 0},s.checkSupport=function(f){if(!i[f.toLowerCase()])throw new Error(f+" is not supported by this platform")},s.MAX_VALUE_16BITS=65535,s.MAX_VALUE_32BITS=-1,s.pretty=function(f){var _,g,k="";for(g=0;g<(f||"").length;g++)k+="\\x"+((_=f.charCodeAt(g))<16?"0":"")+_.toString(16).toUpperCase();return k},s.delay=function(f,_,g){setImmediate(function(){f.apply(g||null,_||[])})},s.inherits=function(f,_){function g(){}g.prototype=_.prototype,f.prototype=new g},s.extend=function(){var f,_,g={};for(f=0;f<arguments.length;f++)for(_ in arguments[f])Object.prototype.hasOwnProperty.call(arguments[f],_)&&g[_]===void 0&&(g[_]=arguments[f][_]);return g},s.prepareContent=function(f,_,g,k,T){return u.Promise.resolve(_).then(function(A){return i.blob&&(A instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(A))!==-1)&&typeof FileReader<"u"?new u.Promise(function(O,B){var P=new FileReader;P.onload=function(q){O(q.target.result)},P.onerror=function(q){B(q.target.error)},P.readAsArrayBuffer(A)}):A}).then(function(A){var O=s.getTypeOf(A);return O?(O==="arraybuffer"?A=s.transformTo("uint8array",A):O==="string"&&(T?A=o.decode(A):g&&k!==!0&&(A=function(B){return m(B,i.uint8array?new Uint8Array(B.length):new Array(B.length))}(A))),A):u.Promise.reject(new Error("Can't read the data of '"+f+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(t,r,s){var i=t("./reader/readerFor"),o=t("./utils"),a=t("./signature"),u=t("./zipEntry"),d=t("./support");function m(v){this.files=[],this.loadOptions=v}m.prototype={checkSignature:function(v){if(!this.reader.readAndCheckSignature(v)){this.reader.index-=4;var x=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+o.pretty(x)+", expected "+o.pretty(v)+")")}},isSignature:function(v,x){var h=this.reader.index;this.reader.setIndex(v);var b=this.reader.readString(4)===x;return this.reader.setIndex(h),b},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var v=this.reader.readData(this.zipCommentLength),x=d.uint8array?"uint8array":"array",h=o.transformTo(x,v);this.zipComment=this.loadOptions.decodeFileName(h)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var v,x,h,b=this.zip64EndOfCentralSize-44;0<b;)v=this.reader.readInt(2),x=this.reader.readInt(4),h=this.reader.readData(x),this.zip64ExtensibleData[v]={id:v,length:x,value:h}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var v,x;for(v=0;v<this.files.length;v++)x=this.files[v],this.reader.setIndex(x.localHeaderOffset),this.checkSignature(a.LOCAL_FILE_HEADER),x.readLocalPart(this.reader),x.handleUTF8(),x.processAttributes()},readCentralDir:function(){var v;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(a.CENTRAL_FILE_HEADER);)(v=new u({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(v);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var v=this.reader.lastIndexOfSignature(a.CENTRAL_DIRECTORY_END);if(v<0)throw this.isSignature(0,a.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(v);var x=v;if(this.checkSignature(a.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,(v=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(v),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,a.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var h=this.centralDirOffset+this.centralDirSize;this.zip64&&(h+=20,h+=12+this.zip64EndOfCentralSize);var b=x-h;if(0<b)this.isSignature(x,a.CENTRAL_FILE_HEADER)||(this.reader.zero=b);else if(b<0)throw new Error("Corrupted zip: missing "+Math.abs(b)+" bytes.")},prepareReader:function(v){this.reader=i(v)},load:function(v){this.prepareReader(v),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},r.exports=m},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(t,r,s){var i=t("./reader/readerFor"),o=t("./utils"),a=t("./compressedObject"),u=t("./crc32"),d=t("./utf8"),m=t("./compressions"),v=t("./support");function x(h,b){this.options=h,this.loadOptions=b}x.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(h){var b,f;if(h.skip(22),this.fileNameLength=h.readInt(2),f=h.readInt(2),this.fileName=h.readData(this.fileNameLength),h.skip(f),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((b=function(_){for(var g in m)if(Object.prototype.hasOwnProperty.call(m,g)&&m[g].magic===_)return m[g];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new a(this.compressedSize,this.uncompressedSize,this.crc32,b,h.readData(this.compressedSize))},readCentralPart:function(h){this.versionMadeBy=h.readInt(2),h.skip(2),this.bitFlag=h.readInt(2),this.compressionMethod=h.readString(2),this.date=h.readDate(),this.crc32=h.readInt(4),this.compressedSize=h.readInt(4),this.uncompressedSize=h.readInt(4);var b=h.readInt(2);if(this.extraFieldsLength=h.readInt(2),this.fileCommentLength=h.readInt(2),this.diskNumberStart=h.readInt(2),this.internalFileAttributes=h.readInt(2),this.externalFileAttributes=h.readInt(4),this.localHeaderOffset=h.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");h.skip(b),this.readExtraFields(h),this.parseZIP64ExtraField(h),this.fileComment=h.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var h=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),h==0&&(this.dosPermissions=63&this.externalFileAttributes),h==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var h=i(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=h.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=h.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=h.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=h.readInt(4))}},readExtraFields:function(h){var b,f,_,g=h.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});h.index+4<g;)b=h.readInt(2),f=h.readInt(2),_=h.readData(f),this.extraFields[b]={id:b,length:f,value:_};h.setIndex(g)},handleUTF8:function(){var h=v.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=d.utf8decode(this.fileName),this.fileCommentStr=d.utf8decode(this.fileComment);else{var b=this.findExtraFieldUnicodePath();if(b!==null)this.fileNameStr=b;else{var f=o.transformTo(h,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(f)}var _=this.findExtraFieldUnicodeComment();if(_!==null)this.fileCommentStr=_;else{var g=o.transformTo(h,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(g)}}},findExtraFieldUnicodePath:function(){var h=this.extraFields[28789];if(h){var b=i(h.value);return b.readInt(1)!==1||u(this.fileName)!==b.readInt(4)?null:d.utf8decode(b.readData(h.length-5))}return null},findExtraFieldUnicodeComment:function(){var h=this.extraFields[25461];if(h){var b=i(h.value);return b.readInt(1)!==1||u(this.fileComment)!==b.readInt(4)?null:d.utf8decode(b.readData(h.length-5))}return null}},r.exports=x},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(t,r,s){function i(b,f,_){this.name=b,this.dir=_.dir,this.date=_.date,this.comment=_.comment,this.unixPermissions=_.unixPermissions,this.dosPermissions=_.dosPermissions,this._data=f,this._dataBinary=_.binary,this.options={compression:_.compression,compressionOptions:_.compressionOptions}}var o=t("./stream/StreamHelper"),a=t("./stream/DataWorker"),u=t("./utf8"),d=t("./compressedObject"),m=t("./stream/GenericWorker");i.prototype={internalStream:function(b){var f=null,_="string";try{if(!b)throw new Error("No output type specified.");var g=(_=b.toLowerCase())==="string"||_==="text";_!=="binarystring"&&_!=="text"||(_="string"),f=this._decompressWorker();var k=!this._dataBinary;k&&!g&&(f=f.pipe(new u.Utf8EncodeWorker)),!k&&g&&(f=f.pipe(new u.Utf8DecodeWorker))}catch(T){(f=new m("error")).error(T)}return new o(f,_,"")},async:function(b,f){return this.internalStream(b).accumulate(f)},nodeStream:function(b,f){return this.internalStream(b||"nodebuffer").toNodejsStream(f)},_compressWorker:function(b,f){if(this._data instanceof d&&this._data.compression.magic===b.magic)return this._data.getCompressedWorker();var _=this._decompressWorker();return this._dataBinary||(_=_.pipe(new u.Utf8EncodeWorker)),d.createWorkerFrom(_,b,f)},_decompressWorker:function(){return this._data instanceof d?this._data.getContentWorker():this._data instanceof m?this._data:new a(this._data)}};for(var v=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],x=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},h=0;h<v.length;h++)i.prototype[v[h]]=x;r.exports=i},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(t,r,s){(function(i){var o,a,u=i.MutationObserver||i.WebKitMutationObserver;if(u){var d=0,m=new u(b),v=i.document.createTextNode("");m.observe(v,{characterData:!0}),o=function(){v.data=d=++d%2}}else if(i.setImmediate||i.MessageChannel===void 0)o="document"in i&&"onreadystatechange"in i.document.createElement("script")?function(){var f=i.document.createElement("script");f.onreadystatechange=function(){b(),f.onreadystatechange=null,f.parentNode.removeChild(f),f=null},i.document.documentElement.appendChild(f)}:function(){setTimeout(b,0)};else{var x=new i.MessageChannel;x.port1.onmessage=b,o=function(){x.port2.postMessage(0)}}var h=[];function b(){var f,_;a=!0;for(var g=h.length;g;){for(_=h,h=[],f=-1;++f<g;)_[f]();g=h.length}a=!1}r.exports=function(f){h.push(f)!==1||a||o()}}).call(this,typeof Le<"u"?Le:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(t,r,s){var i=t("immediate");function o(){}var a={},u=["REJECTED"],d=["FULFILLED"],m=["PENDING"];function v(g){if(typeof g!="function")throw new TypeError("resolver must be a function");this.state=m,this.queue=[],this.outcome=void 0,g!==o&&f(this,g)}function x(g,k,T){this.promise=g,typeof k=="function"&&(this.onFulfilled=k,this.callFulfilled=this.otherCallFulfilled),typeof T=="function"&&(this.onRejected=T,this.callRejected=this.otherCallRejected)}function h(g,k,T){i(function(){var A;try{A=k(T)}catch(O){return a.reject(g,O)}A===g?a.reject(g,new TypeError("Cannot resolve promise with itself")):a.resolve(g,A)})}function b(g){var k=g&&g.then;if(g&&(typeof g=="object"||typeof g=="function")&&typeof k=="function")return function(){k.apply(g,arguments)}}function f(g,k){var T=!1;function A(P){T||(T=!0,a.reject(g,P))}function O(P){T||(T=!0,a.resolve(g,P))}var B=_(function(){k(O,A)});B.status==="error"&&A(B.value)}function _(g,k){var T={};try{T.value=g(k),T.status="success"}catch(A){T.status="error",T.value=A}return T}(r.exports=v).prototype.finally=function(g){if(typeof g!="function")return this;var k=this.constructor;return this.then(function(T){return k.resolve(g()).then(function(){return T})},function(T){return k.resolve(g()).then(function(){throw T})})},v.prototype.catch=function(g){return this.then(null,g)},v.prototype.then=function(g,k){if(typeof g!="function"&&this.state===d||typeof k!="function"&&this.state===u)return this;var T=new this.constructor(o);return this.state!==m?h(T,this.state===d?g:k,this.outcome):this.queue.push(new x(T,g,k)),T},x.prototype.callFulfilled=function(g){a.resolve(this.promise,g)},x.prototype.otherCallFulfilled=function(g){h(this.promise,this.onFulfilled,g)},x.prototype.callRejected=function(g){a.reject(this.promise,g)},x.prototype.otherCallRejected=function(g){h(this.promise,this.onRejected,g)},a.resolve=function(g,k){var T=_(b,k);if(T.status==="error")return a.reject(g,T.value);var A=T.value;if(A)f(g,A);else{g.state=d,g.outcome=k;for(var O=-1,B=g.queue.length;++O<B;)g.queue[O].callFulfilled(k)}return g},a.reject=function(g,k){g.state=u,g.outcome=k;for(var T=-1,A=g.queue.length;++T<A;)g.queue[T].callRejected(k);return g},v.resolve=function(g){return g instanceof this?g:a.resolve(new this(o),g)},v.reject=function(g){var k=new this(o);return a.reject(k,g)},v.all=function(g){var k=this;if(Object.prototype.toString.call(g)!=="[object Array]")return this.reject(new TypeError("must be an array"));var T=g.length,A=!1;if(!T)return this.resolve([]);for(var O=new Array(T),B=0,P=-1,q=new this(o);++P<T;)j(g[P],P);return q;function j(U,Q){k.resolve(U).then(function(S){O[Q]=S,++B!==T||A||(A=!0,a.resolve(q,O))},function(S){A||(A=!0,a.reject(q,S))})}},v.race=function(g){var k=this;if(Object.prototype.toString.call(g)!=="[object Array]")return this.reject(new TypeError("must be an array"));var T=g.length,A=!1;if(!T)return this.resolve([]);for(var O=-1,B=new this(o);++O<T;)P=g[O],k.resolve(P).then(function(q){A||(A=!0,a.resolve(B,q))},function(q){A||(A=!0,a.reject(B,q))});var P;return B}},{immediate:36}],38:[function(t,r,s){var i={};(0,t("./lib/utils/common").assign)(i,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),r.exports=i},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(t,r,s){var i=t("./zlib/deflate"),o=t("./utils/common"),a=t("./utils/strings"),u=t("./zlib/messages"),d=t("./zlib/zstream"),m=Object.prototype.toString,v=0,x=-1,h=0,b=8;function f(g){if(!(this instanceof f))return new f(g);this.options=o.assign({level:x,method:b,chunkSize:16384,windowBits:15,memLevel:8,strategy:h,to:""},g||{});var k=this.options;k.raw&&0<k.windowBits?k.windowBits=-k.windowBits:k.gzip&&0<k.windowBits&&k.windowBits<16&&(k.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new d,this.strm.avail_out=0;var T=i.deflateInit2(this.strm,k.level,k.method,k.windowBits,k.memLevel,k.strategy);if(T!==v)throw new Error(u[T]);if(k.header&&i.deflateSetHeader(this.strm,k.header),k.dictionary){var A;if(A=typeof k.dictionary=="string"?a.string2buf(k.dictionary):m.call(k.dictionary)==="[object ArrayBuffer]"?new Uint8Array(k.dictionary):k.dictionary,(T=i.deflateSetDictionary(this.strm,A))!==v)throw new Error(u[T]);this._dict_set=!0}}function _(g,k){var T=new f(k);if(T.push(g,!0),T.err)throw T.msg||u[T.err];return T.result}f.prototype.push=function(g,k){var T,A,O=this.strm,B=this.options.chunkSize;if(this.ended)return!1;A=k===~~k?k:k===!0?4:0,typeof g=="string"?O.input=a.string2buf(g):m.call(g)==="[object ArrayBuffer]"?O.input=new Uint8Array(g):O.input=g,O.next_in=0,O.avail_in=O.input.length;do{if(O.avail_out===0&&(O.output=new o.Buf8(B),O.next_out=0,O.avail_out=B),(T=i.deflate(O,A))!==1&&T!==v)return this.onEnd(T),!(this.ended=!0);O.avail_out!==0&&(O.avail_in!==0||A!==4&&A!==2)||(this.options.to==="string"?this.onData(a.buf2binstring(o.shrinkBuf(O.output,O.next_out))):this.onData(o.shrinkBuf(O.output,O.next_out)))}while((0<O.avail_in||O.avail_out===0)&&T!==1);return A===4?(T=i.deflateEnd(this.strm),this.onEnd(T),this.ended=!0,T===v):A!==2||(this.onEnd(v),!(O.avail_out=0))},f.prototype.onData=function(g){this.chunks.push(g)},f.prototype.onEnd=function(g){g===v&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=g,this.msg=this.strm.msg},s.Deflate=f,s.deflate=_,s.deflateRaw=function(g,k){return(k=k||{}).raw=!0,_(g,k)},s.gzip=function(g,k){return(k=k||{}).gzip=!0,_(g,k)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(t,r,s){var i=t("./zlib/inflate"),o=t("./utils/common"),a=t("./utils/strings"),u=t("./zlib/constants"),d=t("./zlib/messages"),m=t("./zlib/zstream"),v=t("./zlib/gzheader"),x=Object.prototype.toString;function h(f){if(!(this instanceof h))return new h(f);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},f||{});var _=this.options;_.raw&&0<=_.windowBits&&_.windowBits<16&&(_.windowBits=-_.windowBits,_.windowBits===0&&(_.windowBits=-15)),!(0<=_.windowBits&&_.windowBits<16)||f&&f.windowBits||(_.windowBits+=32),15<_.windowBits&&_.windowBits<48&&!(15&_.windowBits)&&(_.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new m,this.strm.avail_out=0;var g=i.inflateInit2(this.strm,_.windowBits);if(g!==u.Z_OK)throw new Error(d[g]);this.header=new v,i.inflateGetHeader(this.strm,this.header)}function b(f,_){var g=new h(_);if(g.push(f,!0),g.err)throw g.msg||d[g.err];return g.result}h.prototype.push=function(f,_){var g,k,T,A,O,B,P=this.strm,q=this.options.chunkSize,j=this.options.dictionary,U=!1;if(this.ended)return!1;k=_===~~_?_:_===!0?u.Z_FINISH:u.Z_NO_FLUSH,typeof f=="string"?P.input=a.binstring2buf(f):x.call(f)==="[object ArrayBuffer]"?P.input=new Uint8Array(f):P.input=f,P.next_in=0,P.avail_in=P.input.length;do{if(P.avail_out===0&&(P.output=new o.Buf8(q),P.next_out=0,P.avail_out=q),(g=i.inflate(P,u.Z_NO_FLUSH))===u.Z_NEED_DICT&&j&&(B=typeof j=="string"?a.string2buf(j):x.call(j)==="[object ArrayBuffer]"?new Uint8Array(j):j,g=i.inflateSetDictionary(this.strm,B)),g===u.Z_BUF_ERROR&&U===!0&&(g=u.Z_OK,U=!1),g!==u.Z_STREAM_END&&g!==u.Z_OK)return this.onEnd(g),!(this.ended=!0);P.next_out&&(P.avail_out!==0&&g!==u.Z_STREAM_END&&(P.avail_in!==0||k!==u.Z_FINISH&&k!==u.Z_SYNC_FLUSH)||(this.options.to==="string"?(T=a.utf8border(P.output,P.next_out),A=P.next_out-T,O=a.buf2string(P.output,T),P.next_out=A,P.avail_out=q-A,A&&o.arraySet(P.output,P.output,T,A,0),this.onData(O)):this.onData(o.shrinkBuf(P.output,P.next_out)))),P.avail_in===0&&P.avail_out===0&&(U=!0)}while((0<P.avail_in||P.avail_out===0)&&g!==u.Z_STREAM_END);return g===u.Z_STREAM_END&&(k=u.Z_FINISH),k===u.Z_FINISH?(g=i.inflateEnd(this.strm),this.onEnd(g),this.ended=!0,g===u.Z_OK):k!==u.Z_SYNC_FLUSH||(this.onEnd(u.Z_OK),!(P.avail_out=0))},h.prototype.onData=function(f){this.chunks.push(f)},h.prototype.onEnd=function(f){f===u.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=f,this.msg=this.strm.msg},s.Inflate=h,s.inflate=b,s.inflateRaw=function(f,_){return(_=_||{}).raw=!0,b(f,_)},s.ungzip=b},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(t,r,s){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";s.assign=function(u){for(var d=Array.prototype.slice.call(arguments,1);d.length;){var m=d.shift();if(m){if(typeof m!="object")throw new TypeError(m+"must be non-object");for(var v in m)m.hasOwnProperty(v)&&(u[v]=m[v])}}return u},s.shrinkBuf=function(u,d){return u.length===d?u:u.subarray?u.subarray(0,d):(u.length=d,u)};var o={arraySet:function(u,d,m,v,x){if(d.subarray&&u.subarray)u.set(d.subarray(m,m+v),x);else for(var h=0;h<v;h++)u[x+h]=d[m+h]},flattenChunks:function(u){var d,m,v,x,h,b;for(d=v=0,m=u.length;d<m;d++)v+=u[d].length;for(b=new Uint8Array(v),d=x=0,m=u.length;d<m;d++)h=u[d],b.set(h,x),x+=h.length;return b}},a={arraySet:function(u,d,m,v,x){for(var h=0;h<v;h++)u[x+h]=d[m+h]},flattenChunks:function(u){return[].concat.apply([],u)}};s.setTyped=function(u){u?(s.Buf8=Uint8Array,s.Buf16=Uint16Array,s.Buf32=Int32Array,s.assign(s,o)):(s.Buf8=Array,s.Buf16=Array,s.Buf32=Array,s.assign(s,a))},s.setTyped(i)},{}],42:[function(t,r,s){var i=t("./common"),o=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch{o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{a=!1}for(var u=new i.Buf8(256),d=0;d<256;d++)u[d]=252<=d?6:248<=d?5:240<=d?4:224<=d?3:192<=d?2:1;function m(v,x){if(x<65537&&(v.subarray&&a||!v.subarray&&o))return String.fromCharCode.apply(null,i.shrinkBuf(v,x));for(var h="",b=0;b<x;b++)h+=String.fromCharCode(v[b]);return h}u[254]=u[254]=1,s.string2buf=function(v){var x,h,b,f,_,g=v.length,k=0;for(f=0;f<g;f++)(64512&(h=v.charCodeAt(f)))==55296&&f+1<g&&(64512&(b=v.charCodeAt(f+1)))==56320&&(h=65536+(h-55296<<10)+(b-56320),f++),k+=h<128?1:h<2048?2:h<65536?3:4;for(x=new i.Buf8(k),f=_=0;_<k;f++)(64512&(h=v.charCodeAt(f)))==55296&&f+1<g&&(64512&(b=v.charCodeAt(f+1)))==56320&&(h=65536+(h-55296<<10)+(b-56320),f++),h<128?x[_++]=h:(h<2048?x[_++]=192|h>>>6:(h<65536?x[_++]=224|h>>>12:(x[_++]=240|h>>>18,x[_++]=128|h>>>12&63),x[_++]=128|h>>>6&63),x[_++]=128|63&h);return x},s.buf2binstring=function(v){return m(v,v.length)},s.binstring2buf=function(v){for(var x=new i.Buf8(v.length),h=0,b=x.length;h<b;h++)x[h]=v.charCodeAt(h);return x},s.buf2string=function(v,x){var h,b,f,_,g=x||v.length,k=new Array(2*g);for(h=b=0;h<g;)if((f=v[h++])<128)k[b++]=f;else if(4<(_=u[f]))k[b++]=65533,h+=_-1;else{for(f&=_===2?31:_===3?15:7;1<_&&h<g;)f=f<<6|63&v[h++],_--;1<_?k[b++]=65533:f<65536?k[b++]=f:(f-=65536,k[b++]=55296|f>>10&1023,k[b++]=56320|1023&f)}return m(k,b)},s.utf8border=function(v,x){var h;for((x=x||v.length)>v.length&&(x=v.length),h=x-1;0<=h&&(192&v[h])==128;)h--;return h<0||h===0?x:h+u[v[h]]>x?h:x}},{"./common":41}],43:[function(t,r,s){r.exports=function(i,o,a,u){for(var d=65535&i|0,m=i>>>16&65535|0,v=0;a!==0;){for(a-=v=2e3<a?2e3:a;m=m+(d=d+o[u++]|0)|0,--v;);d%=65521,m%=65521}return d|m<<16|0}},{}],44:[function(t,r,s){r.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(t,r,s){var i=function(){for(var o,a=[],u=0;u<256;u++){o=u;for(var d=0;d<8;d++)o=1&o?3988292384^o>>>1:o>>>1;a[u]=o}return a}();r.exports=function(o,a,u,d){var m=i,v=d+u;o^=-1;for(var x=d;x<v;x++)o=o>>>8^m[255&(o^a[x])];return-1^o}},{}],46:[function(t,r,s){var i,o=t("../utils/common"),a=t("./trees"),u=t("./adler32"),d=t("./crc32"),m=t("./messages"),v=0,x=4,h=0,b=-2,f=-1,_=4,g=2,k=8,T=9,A=286,O=30,B=19,P=2*A+1,q=15,j=3,U=258,Q=U+j+1,S=42,z=113,l=1,D=2,oe=3,$=4;function le(c,L){return c.msg=m[L],L}function V(c){return(c<<1)-(4<c?9:0)}function ne(c){for(var L=c.length;0<=--L;)c[L]=0}function I(c){var L=c.state,N=L.pending;N>c.avail_out&&(N=c.avail_out),N!==0&&(o.arraySet(c.output,L.pending_buf,L.pending_out,N,c.next_out),c.next_out+=N,L.pending_out+=N,c.total_out+=N,c.avail_out-=N,L.pending-=N,L.pending===0&&(L.pending_out=0))}function R(c,L){a._tr_flush_block(c,0<=c.block_start?c.block_start:-1,c.strstart-c.block_start,L),c.block_start=c.strstart,I(c.strm)}function ie(c,L){c.pending_buf[c.pending++]=L}function K(c,L){c.pending_buf[c.pending++]=L>>>8&255,c.pending_buf[c.pending++]=255&L}function H(c,L){var N,w,y=c.max_chain_length,E=c.strstart,Z=c.prev_length,M=c.nice_match,C=c.strstart>c.w_size-Q?c.strstart-(c.w_size-Q):0,J=c.window,X=c.w_mask,W=c.prev,re=c.strstart+U,me=J[E+Z-1],fe=J[E+Z];c.prev_length>=c.good_match&&(y>>=2),M>c.lookahead&&(M=c.lookahead);do if(J[(N=L)+Z]===fe&&J[N+Z-1]===me&&J[N]===J[E]&&J[++N]===J[E+1]){E+=2,N++;do;while(J[++E]===J[++N]&&J[++E]===J[++N]&&J[++E]===J[++N]&&J[++E]===J[++N]&&J[++E]===J[++N]&&J[++E]===J[++N]&&J[++E]===J[++N]&&J[++E]===J[++N]&&E<re);if(w=U-(re-E),E=re-U,Z<w){if(c.match_start=L,M<=(Z=w))break;me=J[E+Z-1],fe=J[E+Z]}}while((L=W[L&X])>C&&--y!=0);return Z<=c.lookahead?Z:c.lookahead}function ye(c){var L,N,w,y,E,Z,M,C,J,X,W=c.w_size;do{if(y=c.window_size-c.lookahead-c.strstart,c.strstart>=W+(W-Q)){for(o.arraySet(c.window,c.window,W,W,0),c.match_start-=W,c.strstart-=W,c.block_start-=W,L=N=c.hash_size;w=c.head[--L],c.head[L]=W<=w?w-W:0,--N;);for(L=N=W;w=c.prev[--L],c.prev[L]=W<=w?w-W:0,--N;);y+=W}if(c.strm.avail_in===0)break;if(Z=c.strm,M=c.window,C=c.strstart+c.lookahead,J=y,X=void 0,X=Z.avail_in,J<X&&(X=J),N=X===0?0:(Z.avail_in-=X,o.arraySet(M,Z.input,Z.next_in,X,C),Z.state.wrap===1?Z.adler=u(Z.adler,M,X,C):Z.state.wrap===2&&(Z.adler=d(Z.adler,M,X,C)),Z.next_in+=X,Z.total_in+=X,X),c.lookahead+=N,c.lookahead+c.insert>=j)for(E=c.strstart-c.insert,c.ins_h=c.window[E],c.ins_h=(c.ins_h<<c.hash_shift^c.window[E+1])&c.hash_mask;c.insert&&(c.ins_h=(c.ins_h<<c.hash_shift^c.window[E+j-1])&c.hash_mask,c.prev[E&c.w_mask]=c.head[c.ins_h],c.head[c.ins_h]=E,E++,c.insert--,!(c.lookahead+c.insert<j)););}while(c.lookahead<Q&&c.strm.avail_in!==0)}function we(c,L){for(var N,w;;){if(c.lookahead<Q){if(ye(c),c.lookahead<Q&&L===v)return l;if(c.lookahead===0)break}if(N=0,c.lookahead>=j&&(c.ins_h=(c.ins_h<<c.hash_shift^c.window[c.strstart+j-1])&c.hash_mask,N=c.prev[c.strstart&c.w_mask]=c.head[c.ins_h],c.head[c.ins_h]=c.strstart),N!==0&&c.strstart-N<=c.w_size-Q&&(c.match_length=H(c,N)),c.match_length>=j)if(w=a._tr_tally(c,c.strstart-c.match_start,c.match_length-j),c.lookahead-=c.match_length,c.match_length<=c.max_lazy_match&&c.lookahead>=j){for(c.match_length--;c.strstart++,c.ins_h=(c.ins_h<<c.hash_shift^c.window[c.strstart+j-1])&c.hash_mask,N=c.prev[c.strstart&c.w_mask]=c.head[c.ins_h],c.head[c.ins_h]=c.strstart,--c.match_length!=0;);c.strstart++}else c.strstart+=c.match_length,c.match_length=0,c.ins_h=c.window[c.strstart],c.ins_h=(c.ins_h<<c.hash_shift^c.window[c.strstart+1])&c.hash_mask;else w=a._tr_tally(c,0,c.window[c.strstart]),c.lookahead--,c.strstart++;if(w&&(R(c,!1),c.strm.avail_out===0))return l}return c.insert=c.strstart<j-1?c.strstart:j-1,L===x?(R(c,!0),c.strm.avail_out===0?oe:$):c.last_lit&&(R(c,!1),c.strm.avail_out===0)?l:D}function de(c,L){for(var N,w,y;;){if(c.lookahead<Q){if(ye(c),c.lookahead<Q&&L===v)return l;if(c.lookahead===0)break}if(N=0,c.lookahead>=j&&(c.ins_h=(c.ins_h<<c.hash_shift^c.window[c.strstart+j-1])&c.hash_mask,N=c.prev[c.strstart&c.w_mask]=c.head[c.ins_h],c.head[c.ins_h]=c.strstart),c.prev_length=c.match_length,c.prev_match=c.match_start,c.match_length=j-1,N!==0&&c.prev_length<c.max_lazy_match&&c.strstart-N<=c.w_size-Q&&(c.match_length=H(c,N),c.match_length<=5&&(c.strategy===1||c.match_length===j&&4096<c.strstart-c.match_start)&&(c.match_length=j-1)),c.prev_length>=j&&c.match_length<=c.prev_length){for(y=c.strstart+c.lookahead-j,w=a._tr_tally(c,c.strstart-1-c.prev_match,c.prev_length-j),c.lookahead-=c.prev_length-1,c.prev_length-=2;++c.strstart<=y&&(c.ins_h=(c.ins_h<<c.hash_shift^c.window[c.strstart+j-1])&c.hash_mask,N=c.prev[c.strstart&c.w_mask]=c.head[c.ins_h],c.head[c.ins_h]=c.strstart),--c.prev_length!=0;);if(c.match_available=0,c.match_length=j-1,c.strstart++,w&&(R(c,!1),c.strm.avail_out===0))return l}else if(c.match_available){if((w=a._tr_tally(c,0,c.window[c.strstart-1]))&&R(c,!1),c.strstart++,c.lookahead--,c.strm.avail_out===0)return l}else c.match_available=1,c.strstart++,c.lookahead--}return c.match_available&&(w=a._tr_tally(c,0,c.window[c.strstart-1]),c.match_available=0),c.insert=c.strstart<j-1?c.strstart:j-1,L===x?(R(c,!0),c.strm.avail_out===0?oe:$):c.last_lit&&(R(c,!1),c.strm.avail_out===0)?l:D}function pe(c,L,N,w,y){this.good_length=c,this.max_lazy=L,this.nice_length=N,this.max_chain=w,this.func=y}function be(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=k,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(2*P),this.dyn_dtree=new o.Buf16(2*(2*O+1)),this.bl_tree=new o.Buf16(2*(2*B+1)),ne(this.dyn_ltree),ne(this.dyn_dtree),ne(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16(q+1),this.heap=new o.Buf16(2*A+1),ne(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(2*A+1),ne(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function _e(c){var L;return c&&c.state?(c.total_in=c.total_out=0,c.data_type=g,(L=c.state).pending=0,L.pending_out=0,L.wrap<0&&(L.wrap=-L.wrap),L.status=L.wrap?S:z,c.adler=L.wrap===2?0:1,L.last_flush=v,a._tr_init(L),h):le(c,b)}function je(c){var L=_e(c);return L===h&&function(N){N.window_size=2*N.w_size,ne(N.head),N.max_lazy_match=i[N.level].max_lazy,N.good_match=i[N.level].good_length,N.nice_match=i[N.level].nice_length,N.max_chain_length=i[N.level].max_chain,N.strstart=0,N.block_start=0,N.lookahead=0,N.insert=0,N.match_length=N.prev_length=j-1,N.match_available=0,N.ins_h=0}(c.state),L}function Ae(c,L,N,w,y,E){if(!c)return b;var Z=1;if(L===f&&(L=6),w<0?(Z=0,w=-w):15<w&&(Z=2,w-=16),y<1||T<y||N!==k||w<8||15<w||L<0||9<L||E<0||_<E)return le(c,b);w===8&&(w=9);var M=new be;return(c.state=M).strm=c,M.wrap=Z,M.gzhead=null,M.w_bits=w,M.w_size=1<<M.w_bits,M.w_mask=M.w_size-1,M.hash_bits=y+7,M.hash_size=1<<M.hash_bits,M.hash_mask=M.hash_size-1,M.hash_shift=~~((M.hash_bits+j-1)/j),M.window=new o.Buf8(2*M.w_size),M.head=new o.Buf16(M.hash_size),M.prev=new o.Buf16(M.w_size),M.lit_bufsize=1<<y+6,M.pending_buf_size=4*M.lit_bufsize,M.pending_buf=new o.Buf8(M.pending_buf_size),M.d_buf=1*M.lit_bufsize,M.l_buf=3*M.lit_bufsize,M.level=L,M.strategy=E,M.method=N,je(c)}i=[new pe(0,0,0,0,function(c,L){var N=65535;for(N>c.pending_buf_size-5&&(N=c.pending_buf_size-5);;){if(c.lookahead<=1){if(ye(c),c.lookahead===0&&L===v)return l;if(c.lookahead===0)break}c.strstart+=c.lookahead,c.lookahead=0;var w=c.block_start+N;if((c.strstart===0||c.strstart>=w)&&(c.lookahead=c.strstart-w,c.strstart=w,R(c,!1),c.strm.avail_out===0)||c.strstart-c.block_start>=c.w_size-Q&&(R(c,!1),c.strm.avail_out===0))return l}return c.insert=0,L===x?(R(c,!0),c.strm.avail_out===0?oe:$):(c.strstart>c.block_start&&(R(c,!1),c.strm.avail_out),l)}),new pe(4,4,8,4,we),new pe(4,5,16,8,we),new pe(4,6,32,32,we),new pe(4,4,16,16,de),new pe(8,16,32,32,de),new pe(8,16,128,128,de),new pe(8,32,128,256,de),new pe(32,128,258,1024,de),new pe(32,258,258,4096,de)],s.deflateInit=function(c,L){return Ae(c,L,k,15,8,0)},s.deflateInit2=Ae,s.deflateReset=je,s.deflateResetKeep=_e,s.deflateSetHeader=function(c,L){return c&&c.state?c.state.wrap!==2?b:(c.state.gzhead=L,h):b},s.deflate=function(c,L){var N,w,y,E;if(!c||!c.state||5<L||L<0)return c?le(c,b):b;if(w=c.state,!c.output||!c.input&&c.avail_in!==0||w.status===666&&L!==x)return le(c,c.avail_out===0?-5:b);if(w.strm=c,N=w.last_flush,w.last_flush=L,w.status===S)if(w.wrap===2)c.adler=0,ie(w,31),ie(w,139),ie(w,8),w.gzhead?(ie(w,(w.gzhead.text?1:0)+(w.gzhead.hcrc?2:0)+(w.gzhead.extra?4:0)+(w.gzhead.name?8:0)+(w.gzhead.comment?16:0)),ie(w,255&w.gzhead.time),ie(w,w.gzhead.time>>8&255),ie(w,w.gzhead.time>>16&255),ie(w,w.gzhead.time>>24&255),ie(w,w.level===9?2:2<=w.strategy||w.level<2?4:0),ie(w,255&w.gzhead.os),w.gzhead.extra&&w.gzhead.extra.length&&(ie(w,255&w.gzhead.extra.length),ie(w,w.gzhead.extra.length>>8&255)),w.gzhead.hcrc&&(c.adler=d(c.adler,w.pending_buf,w.pending,0)),w.gzindex=0,w.status=69):(ie(w,0),ie(w,0),ie(w,0),ie(w,0),ie(w,0),ie(w,w.level===9?2:2<=w.strategy||w.level<2?4:0),ie(w,3),w.status=z);else{var Z=k+(w.w_bits-8<<4)<<8;Z|=(2<=w.strategy||w.level<2?0:w.level<6?1:w.level===6?2:3)<<6,w.strstart!==0&&(Z|=32),Z+=31-Z%31,w.status=z,K(w,Z),w.strstart!==0&&(K(w,c.adler>>>16),K(w,65535&c.adler)),c.adler=1}if(w.status===69)if(w.gzhead.extra){for(y=w.pending;w.gzindex<(65535&w.gzhead.extra.length)&&(w.pending!==w.pending_buf_size||(w.gzhead.hcrc&&w.pending>y&&(c.adler=d(c.adler,w.pending_buf,w.pending-y,y)),I(c),y=w.pending,w.pending!==w.pending_buf_size));)ie(w,255&w.gzhead.extra[w.gzindex]),w.gzindex++;w.gzhead.hcrc&&w.pending>y&&(c.adler=d(c.adler,w.pending_buf,w.pending-y,y)),w.gzindex===w.gzhead.extra.length&&(w.gzindex=0,w.status=73)}else w.status=73;if(w.status===73)if(w.gzhead.name){y=w.pending;do{if(w.pending===w.pending_buf_size&&(w.gzhead.hcrc&&w.pending>y&&(c.adler=d(c.adler,w.pending_buf,w.pending-y,y)),I(c),y=w.pending,w.pending===w.pending_buf_size)){E=1;break}E=w.gzindex<w.gzhead.name.length?255&w.gzhead.name.charCodeAt(w.gzindex++):0,ie(w,E)}while(E!==0);w.gzhead.hcrc&&w.pending>y&&(c.adler=d(c.adler,w.pending_buf,w.pending-y,y)),E===0&&(w.gzindex=0,w.status=91)}else w.status=91;if(w.status===91)if(w.gzhead.comment){y=w.pending;do{if(w.pending===w.pending_buf_size&&(w.gzhead.hcrc&&w.pending>y&&(c.adler=d(c.adler,w.pending_buf,w.pending-y,y)),I(c),y=w.pending,w.pending===w.pending_buf_size)){E=1;break}E=w.gzindex<w.gzhead.comment.length?255&w.gzhead.comment.charCodeAt(w.gzindex++):0,ie(w,E)}while(E!==0);w.gzhead.hcrc&&w.pending>y&&(c.adler=d(c.adler,w.pending_buf,w.pending-y,y)),E===0&&(w.status=103)}else w.status=103;if(w.status===103&&(w.gzhead.hcrc?(w.pending+2>w.pending_buf_size&&I(c),w.pending+2<=w.pending_buf_size&&(ie(w,255&c.adler),ie(w,c.adler>>8&255),c.adler=0,w.status=z)):w.status=z),w.pending!==0){if(I(c),c.avail_out===0)return w.last_flush=-1,h}else if(c.avail_in===0&&V(L)<=V(N)&&L!==x)return le(c,-5);if(w.status===666&&c.avail_in!==0)return le(c,-5);if(c.avail_in!==0||w.lookahead!==0||L!==v&&w.status!==666){var M=w.strategy===2?function(C,J){for(var X;;){if(C.lookahead===0&&(ye(C),C.lookahead===0)){if(J===v)return l;break}if(C.match_length=0,X=a._tr_tally(C,0,C.window[C.strstart]),C.lookahead--,C.strstart++,X&&(R(C,!1),C.strm.avail_out===0))return l}return C.insert=0,J===x?(R(C,!0),C.strm.avail_out===0?oe:$):C.last_lit&&(R(C,!1),C.strm.avail_out===0)?l:D}(w,L):w.strategy===3?function(C,J){for(var X,W,re,me,fe=C.window;;){if(C.lookahead<=U){if(ye(C),C.lookahead<=U&&J===v)return l;if(C.lookahead===0)break}if(C.match_length=0,C.lookahead>=j&&0<C.strstart&&(W=fe[re=C.strstart-1])===fe[++re]&&W===fe[++re]&&W===fe[++re]){me=C.strstart+U;do;while(W===fe[++re]&&W===fe[++re]&&W===fe[++re]&&W===fe[++re]&&W===fe[++re]&&W===fe[++re]&&W===fe[++re]&&W===fe[++re]&&re<me);C.match_length=U-(me-re),C.match_length>C.lookahead&&(C.match_length=C.lookahead)}if(C.match_length>=j?(X=a._tr_tally(C,1,C.match_length-j),C.lookahead-=C.match_length,C.strstart+=C.match_length,C.match_length=0):(X=a._tr_tally(C,0,C.window[C.strstart]),C.lookahead--,C.strstart++),X&&(R(C,!1),C.strm.avail_out===0))return l}return C.insert=0,J===x?(R(C,!0),C.strm.avail_out===0?oe:$):C.last_lit&&(R(C,!1),C.strm.avail_out===0)?l:D}(w,L):i[w.level].func(w,L);if(M!==oe&&M!==$||(w.status=666),M===l||M===oe)return c.avail_out===0&&(w.last_flush=-1),h;if(M===D&&(L===1?a._tr_align(w):L!==5&&(a._tr_stored_block(w,0,0,!1),L===3&&(ne(w.head),w.lookahead===0&&(w.strstart=0,w.block_start=0,w.insert=0))),I(c),c.avail_out===0))return w.last_flush=-1,h}return L!==x?h:w.wrap<=0?1:(w.wrap===2?(ie(w,255&c.adler),ie(w,c.adler>>8&255),ie(w,c.adler>>16&255),ie(w,c.adler>>24&255),ie(w,255&c.total_in),ie(w,c.total_in>>8&255),ie(w,c.total_in>>16&255),ie(w,c.total_in>>24&255)):(K(w,c.adler>>>16),K(w,65535&c.adler)),I(c),0<w.wrap&&(w.wrap=-w.wrap),w.pending!==0?h:1)},s.deflateEnd=function(c){var L;return c&&c.state?(L=c.state.status)!==S&&L!==69&&L!==73&&L!==91&&L!==103&&L!==z&&L!==666?le(c,b):(c.state=null,L===z?le(c,-3):h):b},s.deflateSetDictionary=function(c,L){var N,w,y,E,Z,M,C,J,X=L.length;if(!c||!c.state||(E=(N=c.state).wrap)===2||E===1&&N.status!==S||N.lookahead)return b;for(E===1&&(c.adler=u(c.adler,L,X,0)),N.wrap=0,X>=N.w_size&&(E===0&&(ne(N.head),N.strstart=0,N.block_start=0,N.insert=0),J=new o.Buf8(N.w_size),o.arraySet(J,L,X-N.w_size,N.w_size,0),L=J,X=N.w_size),Z=c.avail_in,M=c.next_in,C=c.input,c.avail_in=X,c.next_in=0,c.input=L,ye(N);N.lookahead>=j;){for(w=N.strstart,y=N.lookahead-(j-1);N.ins_h=(N.ins_h<<N.hash_shift^N.window[w+j-1])&N.hash_mask,N.prev[w&N.w_mask]=N.head[N.ins_h],N.head[N.ins_h]=w,w++,--y;);N.strstart=w,N.lookahead=j-1,ye(N)}return N.strstart+=N.lookahead,N.block_start=N.strstart,N.insert=N.lookahead,N.lookahead=0,N.match_length=N.prev_length=j-1,N.match_available=0,c.next_in=M,c.input=C,c.avail_in=Z,N.wrap=E,h},s.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(t,r,s){r.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(t,r,s){r.exports=function(i,o){var a,u,d,m,v,x,h,b,f,_,g,k,T,A,O,B,P,q,j,U,Q,S,z,l,D;a=i.state,u=i.next_in,l=i.input,d=u+(i.avail_in-5),m=i.next_out,D=i.output,v=m-(o-i.avail_out),x=m+(i.avail_out-257),h=a.dmax,b=a.wsize,f=a.whave,_=a.wnext,g=a.window,k=a.hold,T=a.bits,A=a.lencode,O=a.distcode,B=(1<<a.lenbits)-1,P=(1<<a.distbits)-1;e:do{T<15&&(k+=l[u++]<<T,T+=8,k+=l[u++]<<T,T+=8),q=A[k&B];t:for(;;){if(k>>>=j=q>>>24,T-=j,(j=q>>>16&255)===0)D[m++]=65535&q;else{if(!(16&j)){if(!(64&j)){q=A[(65535&q)+(k&(1<<j)-1)];continue t}if(32&j){a.mode=12;break e}i.msg="invalid literal/length code",a.mode=30;break e}U=65535&q,(j&=15)&&(T<j&&(k+=l[u++]<<T,T+=8),U+=k&(1<<j)-1,k>>>=j,T-=j),T<15&&(k+=l[u++]<<T,T+=8,k+=l[u++]<<T,T+=8),q=O[k&P];r:for(;;){if(k>>>=j=q>>>24,T-=j,!(16&(j=q>>>16&255))){if(!(64&j)){q=O[(65535&q)+(k&(1<<j)-1)];continue r}i.msg="invalid distance code",a.mode=30;break e}if(Q=65535&q,T<(j&=15)&&(k+=l[u++]<<T,(T+=8)<j&&(k+=l[u++]<<T,T+=8)),h<(Q+=k&(1<<j)-1)){i.msg="invalid distance too far back",a.mode=30;break e}if(k>>>=j,T-=j,(j=m-v)<Q){if(f<(j=Q-j)&&a.sane){i.msg="invalid distance too far back",a.mode=30;break e}if(z=g,(S=0)===_){if(S+=b-j,j<U){for(U-=j;D[m++]=g[S++],--j;);S=m-Q,z=D}}else if(_<j){if(S+=b+_-j,(j-=_)<U){for(U-=j;D[m++]=g[S++],--j;);if(S=0,_<U){for(U-=j=_;D[m++]=g[S++],--j;);S=m-Q,z=D}}}else if(S+=_-j,j<U){for(U-=j;D[m++]=g[S++],--j;);S=m-Q,z=D}for(;2<U;)D[m++]=z[S++],D[m++]=z[S++],D[m++]=z[S++],U-=3;U&&(D[m++]=z[S++],1<U&&(D[m++]=z[S++]))}else{for(S=m-Q;D[m++]=D[S++],D[m++]=D[S++],D[m++]=D[S++],2<(U-=3););U&&(D[m++]=D[S++],1<U&&(D[m++]=D[S++]))}break}}break}}while(u<d&&m<x);u-=U=T>>3,k&=(1<<(T-=U<<3))-1,i.next_in=u,i.next_out=m,i.avail_in=u<d?d-u+5:5-(u-d),i.avail_out=m<x?x-m+257:257-(m-x),a.hold=k,a.bits=T}},{}],49:[function(t,r,s){var i=t("../utils/common"),o=t("./adler32"),a=t("./crc32"),u=t("./inffast"),d=t("./inftrees"),m=1,v=2,x=0,h=-2,b=1,f=852,_=592;function g(S){return(S>>>24&255)+(S>>>8&65280)+((65280&S)<<8)+((255&S)<<24)}function k(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new i.Buf16(320),this.work=new i.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function T(S){var z;return S&&S.state?(z=S.state,S.total_in=S.total_out=z.total=0,S.msg="",z.wrap&&(S.adler=1&z.wrap),z.mode=b,z.last=0,z.havedict=0,z.dmax=32768,z.head=null,z.hold=0,z.bits=0,z.lencode=z.lendyn=new i.Buf32(f),z.distcode=z.distdyn=new i.Buf32(_),z.sane=1,z.back=-1,x):h}function A(S){var z;return S&&S.state?((z=S.state).wsize=0,z.whave=0,z.wnext=0,T(S)):h}function O(S,z){var l,D;return S&&S.state?(D=S.state,z<0?(l=0,z=-z):(l=1+(z>>4),z<48&&(z&=15)),z&&(z<8||15<z)?h:(D.window!==null&&D.wbits!==z&&(D.window=null),D.wrap=l,D.wbits=z,A(S))):h}function B(S,z){var l,D;return S?(D=new k,(S.state=D).window=null,(l=O(S,z))!==x&&(S.state=null),l):h}var P,q,j=!0;function U(S){if(j){var z;for(P=new i.Buf32(512),q=new i.Buf32(32),z=0;z<144;)S.lens[z++]=8;for(;z<256;)S.lens[z++]=9;for(;z<280;)S.lens[z++]=7;for(;z<288;)S.lens[z++]=8;for(d(m,S.lens,0,288,P,0,S.work,{bits:9}),z=0;z<32;)S.lens[z++]=5;d(v,S.lens,0,32,q,0,S.work,{bits:5}),j=!1}S.lencode=P,S.lenbits=9,S.distcode=q,S.distbits=5}function Q(S,z,l,D){var oe,$=S.state;return $.window===null&&($.wsize=1<<$.wbits,$.wnext=0,$.whave=0,$.window=new i.Buf8($.wsize)),D>=$.wsize?(i.arraySet($.window,z,l-$.wsize,$.wsize,0),$.wnext=0,$.whave=$.wsize):(D<(oe=$.wsize-$.wnext)&&(oe=D),i.arraySet($.window,z,l-D,oe,$.wnext),(D-=oe)?(i.arraySet($.window,z,l-D,D,0),$.wnext=D,$.whave=$.wsize):($.wnext+=oe,$.wnext===$.wsize&&($.wnext=0),$.whave<$.wsize&&($.whave+=oe))),0}s.inflateReset=A,s.inflateReset2=O,s.inflateResetKeep=T,s.inflateInit=function(S){return B(S,15)},s.inflateInit2=B,s.inflate=function(S,z){var l,D,oe,$,le,V,ne,I,R,ie,K,H,ye,we,de,pe,be,_e,je,Ae,c,L,N,w,y=0,E=new i.Buf8(4),Z=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!S||!S.state||!S.output||!S.input&&S.avail_in!==0)return h;(l=S.state).mode===12&&(l.mode=13),le=S.next_out,oe=S.output,ne=S.avail_out,$=S.next_in,D=S.input,V=S.avail_in,I=l.hold,R=l.bits,ie=V,K=ne,L=x;e:for(;;)switch(l.mode){case b:if(l.wrap===0){l.mode=13;break}for(;R<16;){if(V===0)break e;V--,I+=D[$++]<<R,R+=8}if(2&l.wrap&&I===35615){E[l.check=0]=255&I,E[1]=I>>>8&255,l.check=a(l.check,E,2,0),R=I=0,l.mode=2;break}if(l.flags=0,l.head&&(l.head.done=!1),!(1&l.wrap)||(((255&I)<<8)+(I>>8))%31){S.msg="incorrect header check",l.mode=30;break}if((15&I)!=8){S.msg="unknown compression method",l.mode=30;break}if(R-=4,c=8+(15&(I>>>=4)),l.wbits===0)l.wbits=c;else if(c>l.wbits){S.msg="invalid window size",l.mode=30;break}l.dmax=1<<c,S.adler=l.check=1,l.mode=512&I?10:12,R=I=0;break;case 2:for(;R<16;){if(V===0)break e;V--,I+=D[$++]<<R,R+=8}if(l.flags=I,(255&l.flags)!=8){S.msg="unknown compression method",l.mode=30;break}if(57344&l.flags){S.msg="unknown header flags set",l.mode=30;break}l.head&&(l.head.text=I>>8&1),512&l.flags&&(E[0]=255&I,E[1]=I>>>8&255,l.check=a(l.check,E,2,0)),R=I=0,l.mode=3;case 3:for(;R<32;){if(V===0)break e;V--,I+=D[$++]<<R,R+=8}l.head&&(l.head.time=I),512&l.flags&&(E[0]=255&I,E[1]=I>>>8&255,E[2]=I>>>16&255,E[3]=I>>>24&255,l.check=a(l.check,E,4,0)),R=I=0,l.mode=4;case 4:for(;R<16;){if(V===0)break e;V--,I+=D[$++]<<R,R+=8}l.head&&(l.head.xflags=255&I,l.head.os=I>>8),512&l.flags&&(E[0]=255&I,E[1]=I>>>8&255,l.check=a(l.check,E,2,0)),R=I=0,l.mode=5;case 5:if(1024&l.flags){for(;R<16;){if(V===0)break e;V--,I+=D[$++]<<R,R+=8}l.length=I,l.head&&(l.head.extra_len=I),512&l.flags&&(E[0]=255&I,E[1]=I>>>8&255,l.check=a(l.check,E,2,0)),R=I=0}else l.head&&(l.head.extra=null);l.mode=6;case 6:if(1024&l.flags&&(V<(H=l.length)&&(H=V),H&&(l.head&&(c=l.head.extra_len-l.length,l.head.extra||(l.head.extra=new Array(l.head.extra_len)),i.arraySet(l.head.extra,D,$,H,c)),512&l.flags&&(l.check=a(l.check,D,H,$)),V-=H,$+=H,l.length-=H),l.length))break e;l.length=0,l.mode=7;case 7:if(2048&l.flags){if(V===0)break e;for(H=0;c=D[$+H++],l.head&&c&&l.length<65536&&(l.head.name+=String.fromCharCode(c)),c&&H<V;);if(512&l.flags&&(l.check=a(l.check,D,H,$)),V-=H,$+=H,c)break e}else l.head&&(l.head.name=null);l.length=0,l.mode=8;case 8:if(4096&l.flags){if(V===0)break e;for(H=0;c=D[$+H++],l.head&&c&&l.length<65536&&(l.head.comment+=String.fromCharCode(c)),c&&H<V;);if(512&l.flags&&(l.check=a(l.check,D,H,$)),V-=H,$+=H,c)break e}else l.head&&(l.head.comment=null);l.mode=9;case 9:if(512&l.flags){for(;R<16;){if(V===0)break e;V--,I+=D[$++]<<R,R+=8}if(I!==(65535&l.check)){S.msg="header crc mismatch",l.mode=30;break}R=I=0}l.head&&(l.head.hcrc=l.flags>>9&1,l.head.done=!0),S.adler=l.check=0,l.mode=12;break;case 10:for(;R<32;){if(V===0)break e;V--,I+=D[$++]<<R,R+=8}S.adler=l.check=g(I),R=I=0,l.mode=11;case 11:if(l.havedict===0)return S.next_out=le,S.avail_out=ne,S.next_in=$,S.avail_in=V,l.hold=I,l.bits=R,2;S.adler=l.check=1,l.mode=12;case 12:if(z===5||z===6)break e;case 13:if(l.last){I>>>=7&R,R-=7&R,l.mode=27;break}for(;R<3;){if(V===0)break e;V--,I+=D[$++]<<R,R+=8}switch(l.last=1&I,R-=1,3&(I>>>=1)){case 0:l.mode=14;break;case 1:if(U(l),l.mode=20,z!==6)break;I>>>=2,R-=2;break e;case 2:l.mode=17;break;case 3:S.msg="invalid block type",l.mode=30}I>>>=2,R-=2;break;case 14:for(I>>>=7&R,R-=7&R;R<32;){if(V===0)break e;V--,I+=D[$++]<<R,R+=8}if((65535&I)!=(I>>>16^65535)){S.msg="invalid stored block lengths",l.mode=30;break}if(l.length=65535&I,R=I=0,l.mode=15,z===6)break e;case 15:l.mode=16;case 16:if(H=l.length){if(V<H&&(H=V),ne<H&&(H=ne),H===0)break e;i.arraySet(oe,D,$,H,le),V-=H,$+=H,ne-=H,le+=H,l.length-=H;break}l.mode=12;break;case 17:for(;R<14;){if(V===0)break e;V--,I+=D[$++]<<R,R+=8}if(l.nlen=257+(31&I),I>>>=5,R-=5,l.ndist=1+(31&I),I>>>=5,R-=5,l.ncode=4+(15&I),I>>>=4,R-=4,286<l.nlen||30<l.ndist){S.msg="too many length or distance symbols",l.mode=30;break}l.have=0,l.mode=18;case 18:for(;l.have<l.ncode;){for(;R<3;){if(V===0)break e;V--,I+=D[$++]<<R,R+=8}l.lens[Z[l.have++]]=7&I,I>>>=3,R-=3}for(;l.have<19;)l.lens[Z[l.have++]]=0;if(l.lencode=l.lendyn,l.lenbits=7,N={bits:l.lenbits},L=d(0,l.lens,0,19,l.lencode,0,l.work,N),l.lenbits=N.bits,L){S.msg="invalid code lengths set",l.mode=30;break}l.have=0,l.mode=19;case 19:for(;l.have<l.nlen+l.ndist;){for(;pe=(y=l.lencode[I&(1<<l.lenbits)-1])>>>16&255,be=65535&y,!((de=y>>>24)<=R);){if(V===0)break e;V--,I+=D[$++]<<R,R+=8}if(be<16)I>>>=de,R-=de,l.lens[l.have++]=be;else{if(be===16){for(w=de+2;R<w;){if(V===0)break e;V--,I+=D[$++]<<R,R+=8}if(I>>>=de,R-=de,l.have===0){S.msg="invalid bit length repeat",l.mode=30;break}c=l.lens[l.have-1],H=3+(3&I),I>>>=2,R-=2}else if(be===17){for(w=de+3;R<w;){if(V===0)break e;V--,I+=D[$++]<<R,R+=8}R-=de,c=0,H=3+(7&(I>>>=de)),I>>>=3,R-=3}else{for(w=de+7;R<w;){if(V===0)break e;V--,I+=D[$++]<<R,R+=8}R-=de,c=0,H=11+(127&(I>>>=de)),I>>>=7,R-=7}if(l.have+H>l.nlen+l.ndist){S.msg="invalid bit length repeat",l.mode=30;break}for(;H--;)l.lens[l.have++]=c}}if(l.mode===30)break;if(l.lens[256]===0){S.msg="invalid code -- missing end-of-block",l.mode=30;break}if(l.lenbits=9,N={bits:l.lenbits},L=d(m,l.lens,0,l.nlen,l.lencode,0,l.work,N),l.lenbits=N.bits,L){S.msg="invalid literal/lengths set",l.mode=30;break}if(l.distbits=6,l.distcode=l.distdyn,N={bits:l.distbits},L=d(v,l.lens,l.nlen,l.ndist,l.distcode,0,l.work,N),l.distbits=N.bits,L){S.msg="invalid distances set",l.mode=30;break}if(l.mode=20,z===6)break e;case 20:l.mode=21;case 21:if(6<=V&&258<=ne){S.next_out=le,S.avail_out=ne,S.next_in=$,S.avail_in=V,l.hold=I,l.bits=R,u(S,K),le=S.next_out,oe=S.output,ne=S.avail_out,$=S.next_in,D=S.input,V=S.avail_in,I=l.hold,R=l.bits,l.mode===12&&(l.back=-1);break}for(l.back=0;pe=(y=l.lencode[I&(1<<l.lenbits)-1])>>>16&255,be=65535&y,!((de=y>>>24)<=R);){if(V===0)break e;V--,I+=D[$++]<<R,R+=8}if(pe&&!(240&pe)){for(_e=de,je=pe,Ae=be;pe=(y=l.lencode[Ae+((I&(1<<_e+je)-1)>>_e)])>>>16&255,be=65535&y,!(_e+(de=y>>>24)<=R);){if(V===0)break e;V--,I+=D[$++]<<R,R+=8}I>>>=_e,R-=_e,l.back+=_e}if(I>>>=de,R-=de,l.back+=de,l.length=be,pe===0){l.mode=26;break}if(32&pe){l.back=-1,l.mode=12;break}if(64&pe){S.msg="invalid literal/length code",l.mode=30;break}l.extra=15&pe,l.mode=22;case 22:if(l.extra){for(w=l.extra;R<w;){if(V===0)break e;V--,I+=D[$++]<<R,R+=8}l.length+=I&(1<<l.extra)-1,I>>>=l.extra,R-=l.extra,l.back+=l.extra}l.was=l.length,l.mode=23;case 23:for(;pe=(y=l.distcode[I&(1<<l.distbits)-1])>>>16&255,be=65535&y,!((de=y>>>24)<=R);){if(V===0)break e;V--,I+=D[$++]<<R,R+=8}if(!(240&pe)){for(_e=de,je=pe,Ae=be;pe=(y=l.distcode[Ae+((I&(1<<_e+je)-1)>>_e)])>>>16&255,be=65535&y,!(_e+(de=y>>>24)<=R);){if(V===0)break e;V--,I+=D[$++]<<R,R+=8}I>>>=_e,R-=_e,l.back+=_e}if(I>>>=de,R-=de,l.back+=de,64&pe){S.msg="invalid distance code",l.mode=30;break}l.offset=be,l.extra=15&pe,l.mode=24;case 24:if(l.extra){for(w=l.extra;R<w;){if(V===0)break e;V--,I+=D[$++]<<R,R+=8}l.offset+=I&(1<<l.extra)-1,I>>>=l.extra,R-=l.extra,l.back+=l.extra}if(l.offset>l.dmax){S.msg="invalid distance too far back",l.mode=30;break}l.mode=25;case 25:if(ne===0)break e;if(H=K-ne,l.offset>H){if((H=l.offset-H)>l.whave&&l.sane){S.msg="invalid distance too far back",l.mode=30;break}ye=H>l.wnext?(H-=l.wnext,l.wsize-H):l.wnext-H,H>l.length&&(H=l.length),we=l.window}else we=oe,ye=le-l.offset,H=l.length;for(ne<H&&(H=ne),ne-=H,l.length-=H;oe[le++]=we[ye++],--H;);l.length===0&&(l.mode=21);break;case 26:if(ne===0)break e;oe[le++]=l.length,ne--,l.mode=21;break;case 27:if(l.wrap){for(;R<32;){if(V===0)break e;V--,I|=D[$++]<<R,R+=8}if(K-=ne,S.total_out+=K,l.total+=K,K&&(S.adler=l.check=l.flags?a(l.check,oe,K,le-K):o(l.check,oe,K,le-K)),K=ne,(l.flags?I:g(I))!==l.check){S.msg="incorrect data check",l.mode=30;break}R=I=0}l.mode=28;case 28:if(l.wrap&&l.flags){for(;R<32;){if(V===0)break e;V--,I+=D[$++]<<R,R+=8}if(I!==(4294967295&l.total)){S.msg="incorrect length check",l.mode=30;break}R=I=0}l.mode=29;case 29:L=1;break e;case 30:L=-3;break e;case 31:return-4;case 32:default:return h}return S.next_out=le,S.avail_out=ne,S.next_in=$,S.avail_in=V,l.hold=I,l.bits=R,(l.wsize||K!==S.avail_out&&l.mode<30&&(l.mode<27||z!==4))&&Q(S,S.output,S.next_out,K-S.avail_out)?(l.mode=31,-4):(ie-=S.avail_in,K-=S.avail_out,S.total_in+=ie,S.total_out+=K,l.total+=K,l.wrap&&K&&(S.adler=l.check=l.flags?a(l.check,oe,K,S.next_out-K):o(l.check,oe,K,S.next_out-K)),S.data_type=l.bits+(l.last?64:0)+(l.mode===12?128:0)+(l.mode===20||l.mode===15?256:0),(ie==0&&K===0||z===4)&&L===x&&(L=-5),L)},s.inflateEnd=function(S){if(!S||!S.state)return h;var z=S.state;return z.window&&(z.window=null),S.state=null,x},s.inflateGetHeader=function(S,z){var l;return S&&S.state&&2&(l=S.state).wrap?((l.head=z).done=!1,x):h},s.inflateSetDictionary=function(S,z){var l,D=z.length;return S&&S.state?(l=S.state).wrap!==0&&l.mode!==11?h:l.mode===11&&o(1,z,D,0)!==l.check?-3:Q(S,z,D,D)?(l.mode=31,-4):(l.havedict=1,x):h},s.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(t,r,s){var i=t("../utils/common"),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],u=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],d=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];r.exports=function(m,v,x,h,b,f,_,g){var k,T,A,O,B,P,q,j,U,Q=g.bits,S=0,z=0,l=0,D=0,oe=0,$=0,le=0,V=0,ne=0,I=0,R=null,ie=0,K=new i.Buf16(16),H=new i.Buf16(16),ye=null,we=0;for(S=0;S<=15;S++)K[S]=0;for(z=0;z<h;z++)K[v[x+z]]++;for(oe=Q,D=15;1<=D&&K[D]===0;D--);if(D<oe&&(oe=D),D===0)return b[f++]=20971520,b[f++]=20971520,g.bits=1,0;for(l=1;l<D&&K[l]===0;l++);for(oe<l&&(oe=l),S=V=1;S<=15;S++)if(V<<=1,(V-=K[S])<0)return-1;if(0<V&&(m===0||D!==1))return-1;for(H[1]=0,S=1;S<15;S++)H[S+1]=H[S]+K[S];for(z=0;z<h;z++)v[x+z]!==0&&(_[H[v[x+z]]++]=z);if(P=m===0?(R=ye=_,19):m===1?(R=o,ie-=257,ye=a,we-=257,256):(R=u,ye=d,-1),S=l,B=f,le=z=I=0,A=-1,O=(ne=1<<($=oe))-1,m===1&&852<ne||m===2&&592<ne)return 1;for(;;){for(q=S-le,U=_[z]<P?(j=0,_[z]):_[z]>P?(j=ye[we+_[z]],R[ie+_[z]]):(j=96,0),k=1<<S-le,l=T=1<<$;b[B+(I>>le)+(T-=k)]=q<<24|j<<16|U|0,T!==0;);for(k=1<<S-1;I&k;)k>>=1;if(k!==0?(I&=k-1,I+=k):I=0,z++,--K[S]==0){if(S===D)break;S=v[x+_[z]]}if(oe<S&&(I&O)!==A){for(le===0&&(le=oe),B+=l,V=1<<($=S-le);$+le<D&&!((V-=K[$+le])<=0);)$++,V<<=1;if(ne+=1<<$,m===1&&852<ne||m===2&&592<ne)return 1;b[A=I&O]=oe<<24|$<<16|B-f|0}}return I!==0&&(b[B+I]=S-le<<24|64<<16|0),g.bits=oe,0}},{"../utils/common":41}],51:[function(t,r,s){r.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(t,r,s){var i=t("../utils/common"),o=0,a=1;function u(y){for(var E=y.length;0<=--E;)y[E]=0}var d=0,m=29,v=256,x=v+1+m,h=30,b=19,f=2*x+1,_=15,g=16,k=7,T=256,A=16,O=17,B=18,P=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],q=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],j=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],U=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Q=new Array(2*(x+2));u(Q);var S=new Array(2*h);u(S);var z=new Array(512);u(z);var l=new Array(256);u(l);var D=new Array(m);u(D);var oe,$,le,V=new Array(h);function ne(y,E,Z,M,C){this.static_tree=y,this.extra_bits=E,this.extra_base=Z,this.elems=M,this.max_length=C,this.has_stree=y&&y.length}function I(y,E){this.dyn_tree=y,this.max_code=0,this.stat_desc=E}function R(y){return y<256?z[y]:z[256+(y>>>7)]}function ie(y,E){y.pending_buf[y.pending++]=255&E,y.pending_buf[y.pending++]=E>>>8&255}function K(y,E,Z){y.bi_valid>g-Z?(y.bi_buf|=E<<y.bi_valid&65535,ie(y,y.bi_buf),y.bi_buf=E>>g-y.bi_valid,y.bi_valid+=Z-g):(y.bi_buf|=E<<y.bi_valid&65535,y.bi_valid+=Z)}function H(y,E,Z){K(y,Z[2*E],Z[2*E+1])}function ye(y,E){for(var Z=0;Z|=1&y,y>>>=1,Z<<=1,0<--E;);return Z>>>1}function we(y,E,Z){var M,C,J=new Array(_+1),X=0;for(M=1;M<=_;M++)J[M]=X=X+Z[M-1]<<1;for(C=0;C<=E;C++){var W=y[2*C+1];W!==0&&(y[2*C]=ye(J[W]++,W))}}function de(y){var E;for(E=0;E<x;E++)y.dyn_ltree[2*E]=0;for(E=0;E<h;E++)y.dyn_dtree[2*E]=0;for(E=0;E<b;E++)y.bl_tree[2*E]=0;y.dyn_ltree[2*T]=1,y.opt_len=y.static_len=0,y.last_lit=y.matches=0}function pe(y){8<y.bi_valid?ie(y,y.bi_buf):0<y.bi_valid&&(y.pending_buf[y.pending++]=y.bi_buf),y.bi_buf=0,y.bi_valid=0}function be(y,E,Z,M){var C=2*E,J=2*Z;return y[C]<y[J]||y[C]===y[J]&&M[E]<=M[Z]}function _e(y,E,Z){for(var M=y.heap[Z],C=Z<<1;C<=y.heap_len&&(C<y.heap_len&&be(E,y.heap[C+1],y.heap[C],y.depth)&&C++,!be(E,M,y.heap[C],y.depth));)y.heap[Z]=y.heap[C],Z=C,C<<=1;y.heap[Z]=M}function je(y,E,Z){var M,C,J,X,W=0;if(y.last_lit!==0)for(;M=y.pending_buf[y.d_buf+2*W]<<8|y.pending_buf[y.d_buf+2*W+1],C=y.pending_buf[y.l_buf+W],W++,M===0?H(y,C,E):(H(y,(J=l[C])+v+1,E),(X=P[J])!==0&&K(y,C-=D[J],X),H(y,J=R(--M),Z),(X=q[J])!==0&&K(y,M-=V[J],X)),W<y.last_lit;);H(y,T,E)}function Ae(y,E){var Z,M,C,J=E.dyn_tree,X=E.stat_desc.static_tree,W=E.stat_desc.has_stree,re=E.stat_desc.elems,me=-1;for(y.heap_len=0,y.heap_max=f,Z=0;Z<re;Z++)J[2*Z]!==0?(y.heap[++y.heap_len]=me=Z,y.depth[Z]=0):J[2*Z+1]=0;for(;y.heap_len<2;)J[2*(C=y.heap[++y.heap_len]=me<2?++me:0)]=1,y.depth[C]=0,y.opt_len--,W&&(y.static_len-=X[2*C+1]);for(E.max_code=me,Z=y.heap_len>>1;1<=Z;Z--)_e(y,J,Z);for(C=re;Z=y.heap[1],y.heap[1]=y.heap[y.heap_len--],_e(y,J,1),M=y.heap[1],y.heap[--y.heap_max]=Z,y.heap[--y.heap_max]=M,J[2*C]=J[2*Z]+J[2*M],y.depth[C]=(y.depth[Z]>=y.depth[M]?y.depth[Z]:y.depth[M])+1,J[2*Z+1]=J[2*M+1]=C,y.heap[1]=C++,_e(y,J,1),2<=y.heap_len;);y.heap[--y.heap_max]=y.heap[1],function(fe,Te){var ct,Re,lt,ve,Dt,rr,Pe=Te.dyn_tree,yr=Te.max_code,Pn=Te.stat_desc.static_tree,Dn=Te.stat_desc.has_stree,Bn=Te.stat_desc.extra_bits,_r=Te.stat_desc.extra_base,ut=Te.stat_desc.max_length,Bt=0;for(ve=0;ve<=_;ve++)fe.bl_count[ve]=0;for(Pe[2*fe.heap[fe.heap_max]+1]=0,ct=fe.heap_max+1;ct<f;ct++)ut<(ve=Pe[2*Pe[2*(Re=fe.heap[ct])+1]+1]+1)&&(ve=ut,Bt++),Pe[2*Re+1]=ve,yr<Re||(fe.bl_count[ve]++,Dt=0,_r<=Re&&(Dt=Bn[Re-_r]),rr=Pe[2*Re],fe.opt_len+=rr*(ve+Dt),Dn&&(fe.static_len+=rr*(Pn[2*Re+1]+Dt)));if(Bt!==0){do{for(ve=ut-1;fe.bl_count[ve]===0;)ve--;fe.bl_count[ve]--,fe.bl_count[ve+1]+=2,fe.bl_count[ut]--,Bt-=2}while(0<Bt);for(ve=ut;ve!==0;ve--)for(Re=fe.bl_count[ve];Re!==0;)yr<(lt=fe.heap[--ct])||(Pe[2*lt+1]!==ve&&(fe.opt_len+=(ve-Pe[2*lt+1])*Pe[2*lt],Pe[2*lt+1]=ve),Re--)}}(y,E),we(J,me,y.bl_count)}function c(y,E,Z){var M,C,J=-1,X=E[1],W=0,re=7,me=4;for(X===0&&(re=138,me=3),E[2*(Z+1)+1]=65535,M=0;M<=Z;M++)C=X,X=E[2*(M+1)+1],++W<re&&C===X||(W<me?y.bl_tree[2*C]+=W:C!==0?(C!==J&&y.bl_tree[2*C]++,y.bl_tree[2*A]++):W<=10?y.bl_tree[2*O]++:y.bl_tree[2*B]++,J=C,me=(W=0)===X?(re=138,3):C===X?(re=6,3):(re=7,4))}function L(y,E,Z){var M,C,J=-1,X=E[1],W=0,re=7,me=4;for(X===0&&(re=138,me=3),M=0;M<=Z;M++)if(C=X,X=E[2*(M+1)+1],!(++W<re&&C===X)){if(W<me)for(;H(y,C,y.bl_tree),--W!=0;);else C!==0?(C!==J&&(H(y,C,y.bl_tree),W--),H(y,A,y.bl_tree),K(y,W-3,2)):W<=10?(H(y,O,y.bl_tree),K(y,W-3,3)):(H(y,B,y.bl_tree),K(y,W-11,7));J=C,me=(W=0)===X?(re=138,3):C===X?(re=6,3):(re=7,4)}}u(V);var N=!1;function w(y,E,Z,M){K(y,(d<<1)+(M?1:0),3),function(C,J,X,W){pe(C),ie(C,X),ie(C,~X),i.arraySet(C.pending_buf,C.window,J,X,C.pending),C.pending+=X}(y,E,Z)}s._tr_init=function(y){N||(function(){var E,Z,M,C,J,X=new Array(_+1);for(C=M=0;C<m-1;C++)for(D[C]=M,E=0;E<1<<P[C];E++)l[M++]=C;for(l[M-1]=C,C=J=0;C<16;C++)for(V[C]=J,E=0;E<1<<q[C];E++)z[J++]=C;for(J>>=7;C<h;C++)for(V[C]=J<<7,E=0;E<1<<q[C]-7;E++)z[256+J++]=C;for(Z=0;Z<=_;Z++)X[Z]=0;for(E=0;E<=143;)Q[2*E+1]=8,E++,X[8]++;for(;E<=255;)Q[2*E+1]=9,E++,X[9]++;for(;E<=279;)Q[2*E+1]=7,E++,X[7]++;for(;E<=287;)Q[2*E+1]=8,E++,X[8]++;for(we(Q,x+1,X),E=0;E<h;E++)S[2*E+1]=5,S[2*E]=ye(E,5);oe=new ne(Q,P,v+1,x,_),$=new ne(S,q,0,h,_),le=new ne(new Array(0),j,0,b,k)}(),N=!0),y.l_desc=new I(y.dyn_ltree,oe),y.d_desc=new I(y.dyn_dtree,$),y.bl_desc=new I(y.bl_tree,le),y.bi_buf=0,y.bi_valid=0,de(y)},s._tr_stored_block=w,s._tr_flush_block=function(y,E,Z,M){var C,J,X=0;0<y.level?(y.strm.data_type===2&&(y.strm.data_type=function(W){var re,me=4093624447;for(re=0;re<=31;re++,me>>>=1)if(1&me&&W.dyn_ltree[2*re]!==0)return o;if(W.dyn_ltree[18]!==0||W.dyn_ltree[20]!==0||W.dyn_ltree[26]!==0)return a;for(re=32;re<v;re++)if(W.dyn_ltree[2*re]!==0)return a;return o}(y)),Ae(y,y.l_desc),Ae(y,y.d_desc),X=function(W){var re;for(c(W,W.dyn_ltree,W.l_desc.max_code),c(W,W.dyn_dtree,W.d_desc.max_code),Ae(W,W.bl_desc),re=b-1;3<=re&&W.bl_tree[2*U[re]+1]===0;re--);return W.opt_len+=3*(re+1)+5+5+4,re}(y),C=y.opt_len+3+7>>>3,(J=y.static_len+3+7>>>3)<=C&&(C=J)):C=J=Z+5,Z+4<=C&&E!==-1?w(y,E,Z,M):y.strategy===4||J===C?(K(y,2+(M?1:0),3),je(y,Q,S)):(K(y,4+(M?1:0),3),function(W,re,me,fe){var Te;for(K(W,re-257,5),K(W,me-1,5),K(W,fe-4,4),Te=0;Te<fe;Te++)K(W,W.bl_tree[2*U[Te]+1],3);L(W,W.dyn_ltree,re-1),L(W,W.dyn_dtree,me-1)}(y,y.l_desc.max_code+1,y.d_desc.max_code+1,X+1),je(y,y.dyn_ltree,y.dyn_dtree)),de(y),M&&pe(y)},s._tr_tally=function(y,E,Z){return y.pending_buf[y.d_buf+2*y.last_lit]=E>>>8&255,y.pending_buf[y.d_buf+2*y.last_lit+1]=255&E,y.pending_buf[y.l_buf+y.last_lit]=255&Z,y.last_lit++,E===0?y.dyn_ltree[2*Z]++:(y.matches++,E--,y.dyn_ltree[2*(l[Z]+v+1)]++,y.dyn_dtree[2*R(E)]++),y.last_lit===y.lit_bufsize-1},s._tr_align=function(y){K(y,2,3),H(y,T,Q),function(E){E.bi_valid===16?(ie(E,E.bi_buf),E.bi_buf=0,E.bi_valid=0):8<=E.bi_valid&&(E.pending_buf[E.pending++]=255&E.bi_buf,E.bi_buf>>=8,E.bi_valid-=8)}(y)}},{"../utils/common":41}],53:[function(t,r,s){r.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(t,r,s){(function(i){(function(o,a){if(!o.setImmediate){var u,d,m,v,x=1,h={},b=!1,f=o.document,_=Object.getPrototypeOf&&Object.getPrototypeOf(o);_=_&&_.setTimeout?_:o,u={}.toString.call(o.process)==="[object process]"?function(A){process.nextTick(function(){k(A)})}:function(){if(o.postMessage&&!o.importScripts){var A=!0,O=o.onmessage;return o.onmessage=function(){A=!1},o.postMessage("","*"),o.onmessage=O,A}}()?(v="setImmediate$"+Math.random()+"$",o.addEventListener?o.addEventListener("message",T,!1):o.attachEvent("onmessage",T),function(A){o.postMessage(v+A,"*")}):o.MessageChannel?((m=new MessageChannel).port1.onmessage=function(A){k(A.data)},function(A){m.port2.postMessage(A)}):f&&"onreadystatechange"in f.createElement("script")?(d=f.documentElement,function(A){var O=f.createElement("script");O.onreadystatechange=function(){k(A),O.onreadystatechange=null,d.removeChild(O),O=null},d.appendChild(O)}):function(A){setTimeout(k,0,A)},_.setImmediate=function(A){typeof A!="function"&&(A=new Function(""+A));for(var O=new Array(arguments.length-1),B=0;B<O.length;B++)O[B]=arguments[B+1];var P={callback:A,args:O};return h[x]=P,u(x),x++},_.clearImmediate=g}function g(A){delete h[A]}function k(A){if(b)setTimeout(k,0,A);else{var O=h[A];if(O){b=!0;try{(function(B){var P=B.callback,q=B.args;switch(q.length){case 0:P();break;case 1:P(q[0]);break;case 2:P(q[0],q[1]);break;case 3:P(q[0],q[1],q[2]);break;default:P.apply(a,q)}})(O)}finally{g(A),b=!1}}}}function T(A){A.source===o&&typeof A.data=="string"&&A.data.indexOf(v)===0&&k(+A.data.slice(v.length))}})(typeof self>"u"?i===void 0?this:i:self)}).call(this,typeof Le<"u"?Le:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(Nn);var po=Nn.exports;const yo=ho(po);var zn={exports:{}};(function(n,e){(function(t,r){r()})(Le,function(){function t(d,m){return typeof m>"u"?m={autoBom:!1}:typeof m!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),m={autoBom:!m}),m.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(d.type)?new Blob(["\uFEFF",d],{type:d.type}):d}function r(d,m,v){var x=new XMLHttpRequest;x.open("GET",d),x.responseType="blob",x.onload=function(){u(x.response,m,v)},x.onerror=function(){console.error("could not download file")},x.send()}function s(d){var m=new XMLHttpRequest;m.open("HEAD",d,!1);try{m.send()}catch{}return 200<=m.status&&299>=m.status}function i(d){try{d.dispatchEvent(new MouseEvent("click"))}catch{var m=document.createEvent("MouseEvents");m.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),d.dispatchEvent(m)}}var o=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof Le=="object"&&Le.global===Le?Le:void 0,a=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),u=o.saveAs||(typeof window!="object"||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!a?function(d,m,v){var x=o.URL||o.webkitURL,h=document.createElement("a");m=m||d.name||"download",h.download=m,h.rel="noopener",typeof d=="string"?(h.href=d,h.origin===location.origin?i(h):s(h.href)?r(d,m,v):i(h,h.target="_blank")):(h.href=x.createObjectURL(d),setTimeout(function(){x.revokeObjectURL(h.href)},4e4),setTimeout(function(){i(h)},0))}:"msSaveOrOpenBlob"in navigator?function(d,m,v){if(m=m||d.name||"download",typeof d!="string")navigator.msSaveOrOpenBlob(t(d,v),m);else if(s(d))r(d,m,v);else{var x=document.createElement("a");x.href=d,x.target="_blank",setTimeout(function(){i(x)})}}:function(d,m,v,x){if(x=x||open("","_blank"),x&&(x.document.title=x.document.body.innerText="downloading..."),typeof d=="string")return r(d,m,v);var h=d.type==="application/octet-stream",b=/constructor/i.test(o.HTMLElement)||o.safari,f=/CriOS\/[\d]+/.test(navigator.userAgent);if((f||h&&b||a)&&typeof FileReader<"u"){var _=new FileReader;_.onloadend=function(){var T=_.result;T=f?T:T.replace(/^data:[^;]*;/,"data:attachment/file;"),x?x.location.href=T:location=T,x=null},_.readAsDataURL(d)}else{var g=o.URL||o.webkitURL,k=g.createObjectURL(d);x?x.location=k:location.href=k,x=null,setTimeout(function(){g.revokeObjectURL(k)},4e4)}});o.saveAs=u.saveAs=u,n.exports=u})})(zn);var _o=zn.exports;function mo(){document.documentElement.classList.toggle("dark"),localStorage.setItem("darkMode",document.documentElement.classList.contains("dark"))}(localStorage.getItem("darkMode")==="true"||!("darkMode"in localStorage)&&window.matchMedia("(prefers-color-scheme: dark)").matches)&&document.documentElement.classList.add("dark");const tr=document.createElement("button");tr.innerHTML="🌓";tr.className="fixed bottom-4 right-4 bg-gray-200 dark:bg-gray-700 p-2 rounded-full";tr.addEventListener("click",mo);document.body.appendChild(tr);export{_o as F,yo as J,go as g,gi as p};
